var ie=Object.defineProperty;var se=(t,e,o)=>e in t?ie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o;var b=(t,e,o)=>(se(t,typeof e!="symbol"?e+"":e,o),o);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function o(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(r){if(r.ep)return;r.ep=!0;const n=o(r);fetch(r.href,n)}})();var U,h,X,C,q,Z,K,P={},ee=[],ce=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,W=Array.isArray;function w(t,e){for(var o in e)t[o]=e[o];return t}function te(t){var e=t.parentNode;e&&e.removeChild(t)}function de(t,e,o){var l,r,n,i={};for(n in e)n=="key"?l=e[n]:n=="ref"?r=e[n]:i[n]=e[n];if(arguments.length>2&&(i.children=arguments.length>3?U.call(arguments,2):o),typeof t=="function"&&t.defaultProps!=null)for(n in t.defaultProps)i[n]===void 0&&(i[n]=t.defaultProps[n]);return I(t,i,l,r,null)}function I(t,e,o,l,r){var n={type:t,props:e,key:o,ref:l,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:r??++X,__i:-1,__u:0};return r==null&&h.vnode!=null&&h.vnode(n),n}function F(t){return t.children}function x(t,e){this.props=t,this.context=e}function D(t,e){if(e==null)return t.__?D(t.__,t.__i+1):null;for(var o;e<t.__k.length;e++)if((o=t.__k[e])!=null&&o.__e!=null)return o.__e;return typeof t.type=="function"?D(t):null}function oe(t){var e,o;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((o=t.__k[e])!=null&&o.__e!=null){t.__e=t.__c.base=o.__e;break}return oe(t)}}function z(t){(!t.__d&&(t.__d=!0)&&C.push(t)&&!M.__r++||q!==h.debounceRendering)&&((q=h.debounceRendering)||Z)(M)}function M(){var t,e,o,l,r,n,i,s,d;for(C.sort(K);t=C.shift();)t.__d&&(e=C.length,l=void 0,n=(r=(o=t).__v).__e,s=[],d=[],(i=o.__P)&&((l=w({},r)).__v=r.__v+1,h.vnode&&h.vnode(l),H(i,l,r,o.__n,i.ownerSVGElement!==void 0,32&r.__u?[n]:null,s,n??D(r),!!(32&r.__u),d),l.__v=r.__v,l.__.__k[l.__i]=l,le(s,l,d),l.__e!=n&&oe(l)),C.length>e&&C.sort(K));M.__r=0}function ne(t,e,o,l,r,n,i,s,d,c,u){var _,v,a,m,S,y=l&&l.__k||ee,p=e.length;for(o.__d=d,ae(o,e,y),d=o.__d,_=0;_<p;_++)(a=o.__k[_])!=null&&typeof a!="boolean"&&typeof a!="function"&&(v=a.__i===-1?P:y[a.__i]||P,a.__i=_,H(t,a,v,r,n,i,s,d,c,u),m=a.__e,a.ref&&v.ref!=a.ref&&(v.ref&&j(v.ref,null,a),u.push(a.ref,a.__c||m,a)),S==null&&m!=null&&(S=m),65536&a.__u||v.__k===a.__k?(m||v.__e!=d||(d=D(v)),d=re(a,d,t)):typeof a.type=="function"&&a.__d!==void 0?d=a.__d:m&&(d=m.nextSibling),a.__d=void 0,a.__u&=-196609);o.__d=d,o.__e=S}function ae(t,e,o){var l,r,n,i,s,d=e.length,c=o.length,u=c,_=0;for(t.__k=[],l=0;l<d;l++)i=l+_,(r=t.__k[l]=(r=e[l])==null||typeof r=="boolean"||typeof r=="function"?null:typeof r=="string"||typeof r=="number"||typeof r=="bigint"||r.constructor==String?I(null,r,null,null,null):W(r)?I(F,{children:r},null,null,null):r.constructor===void 0&&r.__b>0?I(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r)!=null?(r.__=t,r.__b=t.__b+1,s=ue(r,o,i,u),r.__i=s,n=null,s!==-1&&(u--,(n=o[s])&&(n.__u|=131072)),n==null||n.__v===null?(s==-1&&_--,typeof r.type!="function"&&(r.__u|=65536)):s!==i&&(s===i+1?_++:s>i?u>d-i?_+=s-i:_--:s<i?s==i-1&&(_=s-i):_=0,s!==l+_&&(r.__u|=65536))):(n=o[i])&&n.key==null&&n.__e&&!(131072&n.__u)&&(n.__e==t.__d&&(t.__d=D(n)),R(n,n,!1),o[i]=null,u--);if(u)for(l=0;l<c;l++)(n=o[l])!=null&&!(131072&n.__u)&&(n.__e==t.__d&&(t.__d=D(n)),R(n,n))}function re(t,e,o){var l,r;if(typeof t.type=="function"){for(l=t.__k,r=0;l&&r<l.length;r++)l[r]&&(l[r].__=t,e=re(l[r],e,o));return e}t.__e!=e&&(o.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType===8);return e}function ue(t,e,o,l){var r=t.key,n=t.type,i=o-1,s=o+1,d=e[o];if(d===null||d&&r==d.key&&n===d.type&&!(131072&d.__u))return o;if(l>(d!=null&&!(131072&d.__u)?1:0))for(;i>=0||s<e.length;){if(i>=0){if((d=e[i])&&!(131072&d.__u)&&r==d.key&&n===d.type)return i;i--}if(s<e.length){if((d=e[s])&&!(131072&d.__u)&&r==d.key&&n===d.type)return s;s++}}return-1}function V(t,e,o){e[0]==="-"?t.setProperty(e,o??""):t[e]=o==null?"":typeof o!="number"||ce.test(e)?o:o+"px"}function O(t,e,o,l,r){var n;e:if(e==="style")if(typeof o=="string")t.style.cssText=o;else{if(typeof l=="string"&&(t.style.cssText=l=""),l)for(e in l)o&&e in o||V(t.style,e,"");if(o)for(e in o)l&&o[e]===l[e]||V(t.style,e,o[e])}else if(e[0]==="o"&&e[1]==="n")n=e!==(e=e.replace(/(PointerCapture)$|Capture$/i,"$1")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+n]=o,o?l?o.u=l.u:(o.u=Date.now(),t.addEventListener(e,n?G:Y,n)):t.removeEventListener(e,n?G:Y,n);else{if(r)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="width"&&e!=="height"&&e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e!=="rowSpan"&&e!=="colSpan"&&e!=="role"&&e in t)try{t[e]=o??"";break e}catch{}typeof o=="function"||(o==null||o===!1&&e[4]!=="-"?t.removeAttribute(e):t.setAttribute(e,o))}}function Y(t){if(this.l){var e=this.l[t.type+!1];if(t.t){if(t.t<=e.u)return}else t.t=Date.now();return e(h.event?h.event(t):t)}}function G(t){if(this.l)return this.l[t.type+!0](h.event?h.event(t):t)}function H(t,e,o,l,r,n,i,s,d,c){var u,_,v,a,m,S,y,p,g,T,N,E,B,A,$,k=e.type;if(e.constructor!==void 0)return null;128&o.__u&&(d=!!(32&o.__u),n=[s=e.__e=o.__e]),(u=h.__b)&&u(e);e:if(typeof k=="function")try{if(p=e.props,g=(u=k.contextType)&&l[u.__c],T=u?g?g.props.value:u.__:l,o.__c?y=(_=e.__c=o.__c).__=_.__E:("prototype"in k&&k.prototype.render?e.__c=_=new k(p,T):(e.__c=_=new x(p,T),_.constructor=k,_.render=he),g&&g.sub(_),_.props=p,_.state||(_.state={}),_.context=T,_.__n=l,v=_.__d=!0,_.__h=[],_._sb=[]),_.__s==null&&(_.__s=_.state),k.getDerivedStateFromProps!=null&&(_.__s==_.state&&(_.__s=w({},_.__s)),w(_.__s,k.getDerivedStateFromProps(p,_.__s))),a=_.props,m=_.state,_.__v=e,v)k.getDerivedStateFromProps==null&&_.componentWillMount!=null&&_.componentWillMount(),_.componentDidMount!=null&&_.__h.push(_.componentDidMount);else{if(k.getDerivedStateFromProps==null&&p!==a&&_.componentWillReceiveProps!=null&&_.componentWillReceiveProps(p,T),!_.__e&&(_.shouldComponentUpdate!=null&&_.shouldComponentUpdate(p,_.__s,T)===!1||e.__v===o.__v)){for(e.__v!==o.__v&&(_.props=p,_.state=_.__s,_.__d=!1),e.__e=o.__e,e.__k=o.__k,e.__k.forEach(function(L){L&&(L.__=e)}),N=0;N<_._sb.length;N++)_.__h.push(_._sb[N]);_._sb=[],_.__h.length&&i.push(_);break e}_.componentWillUpdate!=null&&_.componentWillUpdate(p,_.__s,T),_.componentDidUpdate!=null&&_.__h.push(function(){_.componentDidUpdate(a,m,S)})}if(_.context=T,_.props=p,_.__P=t,_.__e=!1,E=h.__r,B=0,"prototype"in k&&k.prototype.render){for(_.state=_.__s,_.__d=!1,E&&E(e),u=_.render(_.props,_.state,_.context),A=0;A<_._sb.length;A++)_.__h.push(_._sb[A]);_._sb=[]}else do _.__d=!1,E&&E(e),u=_.render(_.props,_.state,_.context),_.state=_.__s;while(_.__d&&++B<25);_.state=_.__s,_.getChildContext!=null&&(l=w(w({},l),_.getChildContext())),v||_.getSnapshotBeforeUpdate==null||(S=_.getSnapshotBeforeUpdate(a,m)),ne(t,W($=u!=null&&u.type===F&&u.key==null?u.props.children:u)?$:[$],e,o,l,r,n,i,s,d,c),_.base=e.__e,e.__u&=-161,_.__h.length&&i.push(_),y&&(_.__E=_.__=null)}catch(L){e.__v=null,d||n!=null?(e.__e=s,e.__u|=d?160:32,n[n.indexOf(s)]=null):(e.__e=o.__e,e.__k=o.__k),h.__e(L,e,o)}else n==null&&e.__v===o.__v?(e.__k=o.__k,e.__e=o.__e):e.__e=fe(o.__e,e,o,l,r,n,i,d,c);(u=h.diffed)&&u(e)}function le(t,e,o){e.__d=void 0;for(var l=0;l<o.length;l++)j(o[l],o[++l],o[++l]);h.__c&&h.__c(e,t),t.some(function(r){try{t=r.__h,r.__h=[],t.some(function(n){n.call(r)})}catch(n){h.__e(n,r.__v)}})}function fe(t,e,o,l,r,n,i,s,d){var c,u,_,v,a,m,S,y=o.props,p=e.props,g=e.type;if(g==="svg"&&(r=!0),n!=null){for(c=0;c<n.length;c++)if((a=n[c])&&"setAttribute"in a==!!g&&(g?a.localName===g:a.nodeType===3)){t=a,n[c]=null;break}}if(t==null){if(g===null)return document.createTextNode(p);t=r?document.createElementNS("http://www.w3.org/2000/svg",g):document.createElement(g,p.is&&p),n=null,s=!1}if(g===null)y===p||s&&t.data===p||(t.data=p);else{if(n=n&&U.call(t.childNodes),y=o.props||P,!s&&n!=null)for(y={},c=0;c<t.attributes.length;c++)y[(a=t.attributes[c]).name]=a.value;for(c in y)a=y[c],c=="children"||(c=="dangerouslySetInnerHTML"?_=a:c==="key"||c in p||O(t,c,null,a,r));for(c in p)a=p[c],c=="children"?v=a:c=="dangerouslySetInnerHTML"?u=a:c=="value"?m=a:c=="checked"?S=a:c==="key"||s&&typeof a!="function"||y[c]===a||O(t,c,a,y[c],r);if(u)s||_&&(u.__html===_.__html||u.__html===t.innerHTML)||(t.innerHTML=u.__html),e.__k=[];else if(_&&(t.innerHTML=""),ne(t,W(v)?v:[v],e,o,l,r&&g!=="foreignObject",n,i,n?n[0]:o.__k&&D(o,0),s,d),n!=null)for(c=n.length;c--;)n[c]!=null&&te(n[c]);s||(c="value",m!==void 0&&(m!==t[c]||g==="progress"&&!m||g==="option"&&m!==y[c])&&O(t,c,m,y[c],!1),c="checked",S!==void 0&&S!==t[c]&&O(t,c,S,y[c],!1))}return t}function j(t,e,o){try{typeof t=="function"?t(e):t.current=e}catch(l){h.__e(l,o)}}function R(t,e,o){var l,r;if(h.unmount&&h.unmount(t),(l=t.ref)&&(l.current&&l.current!==t.__e||j(l,null,e)),(l=t.__c)!=null){if(l.componentWillUnmount)try{l.componentWillUnmount()}catch(n){h.__e(n,e)}l.base=l.__P=null,t.__c=void 0}if(l=t.__k)for(r=0;r<l.length;r++)l[r]&&R(l[r],e,o||typeof t.type!="function");o||t.__e==null||te(t.__e),t.__=t.__e=t.__d=void 0}function he(t,e,o){return this.constructor(t,o)}function pe(t,e,o){var l,r,n,i;h.__&&h.__(t,e),r=(l=typeof o=="function")?null:o&&o.__k||e.__k,n=[],i=[],H(e,t=(!l&&o||e).__k=de(F,null,[t]),r||P,P,e.ownerSVGElement!==void 0,!l&&o?[o]:r?null:e.firstChild?U.call(e.childNodes):null,n,!l&&o?o:r?r.__e:e.firstChild,l,i),le(n,t,i)}U=ee.slice,h={__e:function(t,e,o,l){for(var r,n,i;e=e.__;)if((r=e.__c)&&!r.__)try{if((n=r.constructor)&&n.getDerivedStateFromError!=null&&(r.setState(n.getDerivedStateFromError(t)),i=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,l||{}),i=r.__d),i)return r.__E=r}catch(s){t=s}throw t}},X=0,x.prototype.setState=function(t,e){var o;o=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=w({},this.state),typeof t=="function"&&(t=t(w({},o),this.props)),t&&w(o,t),t!=null&&this.__v&&(e&&this._sb.push(e),z(this))},x.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),z(this))},x.prototype.render=F,C=[],Z=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,K=function(t,e){return t.__v.__b-e.__v.__b},M.__r=0;function me(){let t="";for(let e=0;e<32;e++){let o=Math.random()*16|0;(e===8||e===12||e===16||e===20)&&(t+="-"),t+=(e===12?4:e===16?o&3|8:o).toString(16)}return t}function ve(t,e){return t===1?e:e+"s"}function J(t,e){if(e)return localStorage[t]=JSON.stringify(e);let o=localStorage[t];return o&&JSON.parse(o)||[]}class ye{constructor(e,o){this.key=e,this.todos=J(e)||[],this.onChanges=[o]}inform(){J(this.key,this.todos),this.onChanges.forEach(e=>e())}addTodo(e){this.todos=this.todos.concat({id:me(),title:e,completed:!1}),this.inform()}toggleAll(e){this.todos=this.todos.map(o=>({...o,completed:e})),this.inform()}toggle(e){this.todos=this.todos.map(o=>o!==e?o:{...o,completed:!o.completed}),this.inform()}destroy(e){this.todos=this.todos.filter(o=>o!==e),this.inform()}save(e,o){this.todos=this.todos.map(l=>l!==e?l:{...l,title:o}),this.inform()}clearCompleted(){this.todos=this.todos.filter(e=>!e.completed),this.inform()}}var ge=0;function f(t,e,o,l,r,n){var i,s,d={};for(s in e)s=="ref"?i=e[s]:d[s]=e[s];var c={type:t,props:d,key:o,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--ge,__i:-1,__u:0,__source:r,__self:n};if(typeof t=="function"&&(i=t.defaultProps))for(s in i)d[s]===void 0&&(d[s]=i[s]);return h.vnode&&h.vnode(c),c}class be extends x{render({nowShowing:e,count:o,completedCount:l,onClearCompleted:r}){return f("footer",{class:"footer",children:[f("span",{class:"todo-count",children:[f("strong",{children:o})," ",ve(o,"item")," left"]}),f("ul",{class:"filters",children:[f("li",{children:f("a",{href:"#/",class:e=="all"&&"selected",children:"All"})})," ",f("li",{children:f("a",{href:"#/active",class:e=="active"&&"selected",children:"Active"})})," ",f("li",{children:f("a",{href:"#/completed",class:e=="completed"&&"selected",children:"Completed"})})]}),l>0&&f("button",{class:"clear-completed",onClick:r,children:"Clear completed"})]})}}function ke(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var _e={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function o(){for(var n="",i=0;i<arguments.length;i++){var s=arguments[i];s&&(n=r(n,l(s)))}return n}function l(n){if(typeof n=="string"||typeof n=="number")return n;if(typeof n!="object")return"";if(Array.isArray(n))return o.apply(null,n);if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]"))return n.toString();var i="";for(var s in n)e.call(n,s)&&n[s]&&(i=r(i,s));return i}function r(n,i){return i?n?n+" "+i:n+i:n}t.exports?(o.default=o,t.exports=o):window.classNames=o})()})(_e);var Se=_e.exports;const Te=ke(Se),we=27,Ce=13;class xe extends x{constructor(){super(...arguments);b(this,"handleSubmit",()=>{let{onSave:o,onDestroy:l,todo:r}=this.props,n=this.state.editText.trim();n?(o(r,n),this.setState({editText:n})):l(r)});b(this,"handleEdit",()=>{let{onEdit:o,todo:l}=this.props;o(l),this.setState({editText:l.title})});b(this,"toggle",o=>{let{onToggle:l,todo:r}=this.props;l(r),o.preventDefault()});b(this,"handleTextInput",o=>{this.setState({editText:o.target.value})});b(this,"handleKeyDown",o=>{if(o.which===we){let{todo:l}=this.props;this.setState({editText:l.title}),this.props.onCancel(l)}else o.which===Ce&&this.handleSubmit()});b(this,"handleDestroy",()=>{this.props.onDestroy(this.props.todo)})}componentDidUpdate(){let o=this.base&&this.base.querySelector(".edit");o&&o.focus()}render({todo:{title:o,completed:l},onToggle:r,onDestroy:n,editing:i},{editText:s}){return f("li",{class:Te({completed:l,editing:i}),children:[f("div",{class:"view",children:[f("input",{class:"toggle",type:"checkbox",checked:l,onChange:this.toggle}),f("label",{onDblClick:this.handleEdit,children:o}),f("button",{class:"destroy",onClick:this.handleDestroy})]}),i&&f("input",{class:"edit",value:s,onBlur:this.handleSubmit,onInput:this.handleTextInput,onKeyDown:this.handleKeyDown})]})}}const De=13,Q={all:t=>!0,active:t=>!t.completed,completed:t=>t.completed};class Ee extends x{constructor(){super();b(this,"handleNewTodoKeyDown",o=>{if(o.keyCode!==De)return;o.preventDefault();let l=this.state.newTodo.trim();l&&(this.model.addTodo(l),this.setState({newTodo:""}))});b(this,"handleNewTodoInput",o=>{this.setState({newTodo:o.target.value})});b(this,"toggleAll",o=>{let l=o.target.checked;this.model.toggleAll(l)});b(this,"toggle",o=>{this.model.toggle(o)});b(this,"destroy",o=>{this.model.destroy(o)});b(this,"edit",o=>{this.setState({editing:o.id})});b(this,"save",(o,l)=>{this.model.save(o,l),this.setState({editing:null})});b(this,"cancel",()=>{this.setState({editing:null})});b(this,"clearCompleted",()=>{this.model.clearCompleted()});this.model=new ye("preact-todos",()=>this.setState({})),addEventListener("hashchange",this.handleRoute.bind(this)),this.handleRoute()}handleRoute(){let o=String(location.hash||"").split("/").pop();Q[o]||(o="all"),this.setState({nowShowing:o})}render({},{nowShowing:o=ALL_TODOS,newTodo:l,editing:r}){let{todos:n}=this.model,i=n.filter(Q[o]),s=n.reduce((c,u)=>c+(u.completed?0:1),0),d=n.length-s;return f("div",{children:[f("header",{class:"header",children:[f("h1",{children:"todos"}),f("input",{class:"new-todo",placeholder:"What needs to be done?",value:l,onKeyDown:this.handleNewTodoKeyDown,onInput:this.handleNewTodoInput,autoFocus:!0})]}),n.length?f("section",{class:"main",children:[f("input",{id:"toggle-all",class:"toggle-all",type:"checkbox",onChange:this.toggleAll,checked:s===0}),f("label",{for:"toggle-all",children:"Mark all as complete"}),f("ul",{class:"todo-list",children:i.map(c=>f(xe,{todo:c,onToggle:this.toggle,onDestroy:this.destroy,onEdit:this.edit,editing:r===c.id,onSave:this.save,onCancel:this.cancel}))})]}):null,s||d?f(be,{count:s,completedCount:d,nowShowing:o,onClearCompleted:this.clearCompleted}):null]})}}pe(f(Ee,{}),document.getElementById("app"));
