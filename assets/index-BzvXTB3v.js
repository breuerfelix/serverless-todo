var ce=Object.defineProperty;var de=(o,e,t)=>e in o?ce(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var b=(o,e,t)=>(de(o,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&l(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(r){if(r.ep)return;r.ep=!0;const n=t(r);fetch(r.href,n)}})();var F,h,ee,w,Y,te,K,j,R,W,P={},oe=[],ae=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,B=Array.isArray;function C(o,e){for(var t in e)o[t]=e[t];return o}function ne(o){var e=o.parentNode;e&&e.removeChild(o)}function ue(o,e,t){var l,r,n,s={};for(n in e)n=="key"?l=e[n]:n=="ref"?r=e[n]:s[n]=e[n];if(arguments.length>2&&(s.children=arguments.length>3?F.call(arguments,2):t),typeof o=="function"&&o.defaultProps!=null)for(n in o.defaultProps)s[n]===void 0&&(s[n]=o.defaultProps[n]);return I(o,s,l,r,null)}function I(o,e,t,l,r){var n={type:o,props:e,key:t,ref:l,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:r??++ee,__i:-1,__u:0};return r==null&&h.vnode!=null&&h.vnode(n),n}function U(o){return o.children}function x(o,e){this.props=o,this.context=e}function E(o,e){if(e==null)return o.__?E(o.__,o.__i+1):null;for(var t;e<o.__k.length;e++)if((t=o.__k[e])!=null&&t.__e!=null)return t.__e;return typeof o.type=="function"?E(o):null}function re(o){var e,t;if((o=o.__)!=null&&o.__c!=null){for(o.__e=o.__c.base=null,e=0;e<o.__k.length;e++)if((t=o.__k[e])!=null&&t.__e!=null){o.__e=o.__c.base=t.__e;break}return re(o)}}function G(o){(!o.__d&&(o.__d=!0)&&w.push(o)&&!M.__r++||Y!==h.debounceRendering)&&((Y=h.debounceRendering)||te)(M)}function M(){var o,e,t,l,r,n,s,i;for(w.sort(K);o=w.shift();)o.__d&&(e=w.length,l=void 0,n=(r=(t=o).__v).__e,s=[],i=[],t.__P&&((l=C({},r)).__v=r.__v+1,h.vnode&&h.vnode(l),q(t.__P,l,r,t.__n,t.__P.ownerSVGElement!==void 0,32&r.__u?[n]:null,s,n??E(r),!!(32&r.__u),i),l.__v=r.__v,l.__.__k[l.__i]=l,se(s,l,i),l.__e!=n&&re(l)),w.length>e&&w.sort(K));M.__r=0}function le(o,e,t,l,r,n,s,i,d,c,u){var _,g,a,m,S,v=l&&l.__k||oe,p=e.length;for(t.__d=d,fe(t,e,v),d=t.__d,_=0;_<p;_++)(a=t.__k[_])!=null&&typeof a!="boolean"&&typeof a!="function"&&(g=a.__i===-1?P:v[a.__i]||P,a.__i=_,q(o,a,g,r,n,s,i,d,c,u),m=a.__e,a.ref&&g.ref!=a.ref&&(g.ref&&z(g.ref,null,a),u.push(a.ref,a.__c||m,a)),S==null&&m!=null&&(S=m),65536&a.__u||g.__k===a.__k?(d&&!d.isConnected&&(d=E(g)),d=_e(a,d,o)):typeof a.type=="function"&&a.__d!==void 0?d=a.__d:m&&(d=m.nextSibling),a.__d=void 0,a.__u&=-196609);t.__d=d,t.__e=S}function fe(o,e,t){var l,r,n,s,i,d=e.length,c=t.length,u=c,_=0;for(o.__k=[],l=0;l<d;l++)s=l+_,(r=o.__k[l]=(r=e[l])==null||typeof r=="boolean"||typeof r=="function"?null:typeof r=="string"||typeof r=="number"||typeof r=="bigint"||r.constructor==String?I(null,r,null,null,null):B(r)?I(U,{children:r},null,null,null):r.constructor===void 0&&r.__b>0?I(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r)!=null?(r.__=o,r.__b=o.__b+1,i=he(r,t,s,u),r.__i=i,n=null,i!==-1&&(u--,(n=t[i])&&(n.__u|=131072)),n==null||n.__v===null?(i==-1&&_--,typeof r.type!="function"&&(r.__u|=65536)):i!==s&&(i===s+1?_++:i>s?u>d-s?_+=i-s:_--:i<s?i==s-1&&(_=i-s):_=0,i!==l+_&&(r.__u|=65536))):(n=t[s])&&n.key==null&&n.__e&&!(131072&n.__u)&&(n.__e==o.__d&&(o.__d=E(n)),H(n,n,!1),t[s]=null,u--);if(u)for(l=0;l<c;l++)(n=t[l])!=null&&!(131072&n.__u)&&(n.__e==o.__d&&(o.__d=E(n)),H(n,n))}function _e(o,e,t){var l,r;if(typeof o.type=="function"){for(l=o.__k,r=0;l&&r<l.length;r++)l[r]&&(l[r].__=o,e=_e(l[r],e,t));return e}o.__e!=e&&(t.insertBefore(o.__e,e||null),e=o.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType===8);return e}function he(o,e,t,l){var r=o.key,n=o.type,s=t-1,i=t+1,d=e[t];if(d===null||d&&r==d.key&&n===d.type&&!(131072&d.__u))return t;if(l>(d!=null&&!(131072&d.__u)?1:0))for(;s>=0||i<e.length;){if(s>=0){if((d=e[s])&&!(131072&d.__u)&&r==d.key&&n===d.type)return s;s--}if(i<e.length){if((d=e[i])&&!(131072&d.__u)&&r==d.key&&n===d.type)return i;i++}}return-1}function J(o,e,t){e[0]==="-"?o.setProperty(e,t??""):o[e]=t==null?"":typeof t!="number"||ae.test(e)?t:t+"px"}function O(o,e,t,l,r){var n;e:if(e==="style")if(typeof t=="string")o.style.cssText=t;else{if(typeof l=="string"&&(o.style.cssText=l=""),l)for(e in l)t&&e in t||J(o.style,e,"");if(t)for(e in t)l&&t[e]===l[e]||J(o.style,e,t[e])}else if(e[0]==="o"&&e[1]==="n")n=e!==(e=e.replace(/(PointerCapture)$|Capture$/i,"$1")),e=e.toLowerCase()in o||e==="onFocusOut"||e==="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),o.l||(o.l={}),o.l[e+n]=t,t?l?t.u=l.u:(t.u=j,o.addEventListener(e,n?W:R,n)):o.removeEventListener(e,n?W:R,n);else{if(r)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e in o)try{o[e]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&e[4]!=="-"?o.removeAttribute(e):o.setAttribute(e,t))}}function Q(o){return function(e){if(this.l){var t=this.l[e.type+o];if(e.t==null)e.t=j++;else if(e.t<t.u)return;return t(h.event?h.event(e):e)}}}function q(o,e,t,l,r,n,s,i,d,c){var u,_,g,a,m,S,v,p,y,T,N,D,V,A,$,k=e.type;if(e.constructor!==void 0)return null;128&t.__u&&(d=!!(32&t.__u),n=[i=e.__e=t.__e]),(u=h.__b)&&u(e);e:if(typeof k=="function")try{if(p=e.props,y=(u=k.contextType)&&l[u.__c],T=u?y?y.props.value:u.__:l,t.__c?v=(_=e.__c=t.__c).__=_.__E:("prototype"in k&&k.prototype.render?e.__c=_=new k(p,T):(e.__c=_=new x(p,T),_.constructor=k,_.render=me),y&&y.sub(_),_.props=p,_.state||(_.state={}),_.context=T,_.__n=l,g=_.__d=!0,_.__h=[],_._sb=[]),_.__s==null&&(_.__s=_.state),k.getDerivedStateFromProps!=null&&(_.__s==_.state&&(_.__s=C({},_.__s)),C(_.__s,k.getDerivedStateFromProps(p,_.__s))),a=_.props,m=_.state,_.__v=e,g)k.getDerivedStateFromProps==null&&_.componentWillMount!=null&&_.componentWillMount(),_.componentDidMount!=null&&_.__h.push(_.componentDidMount);else{if(k.getDerivedStateFromProps==null&&p!==a&&_.componentWillReceiveProps!=null&&_.componentWillReceiveProps(p,T),!_.__e&&(_.shouldComponentUpdate!=null&&_.shouldComponentUpdate(p,_.__s,T)===!1||e.__v===t.__v)){for(e.__v!==t.__v&&(_.props=p,_.state=_.__s,_.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.forEach(function(L){L&&(L.__=e)}),N=0;N<_._sb.length;N++)_.__h.push(_._sb[N]);_._sb=[],_.__h.length&&s.push(_);break e}_.componentWillUpdate!=null&&_.componentWillUpdate(p,_.__s,T),_.componentDidUpdate!=null&&_.__h.push(function(){_.componentDidUpdate(a,m,S)})}if(_.context=T,_.props=p,_.__P=o,_.__e=!1,D=h.__r,V=0,"prototype"in k&&k.prototype.render){for(_.state=_.__s,_.__d=!1,D&&D(e),u=_.render(_.props,_.state,_.context),A=0;A<_._sb.length;A++)_.__h.push(_._sb[A]);_._sb=[]}else do _.__d=!1,D&&D(e),u=_.render(_.props,_.state,_.context),_.state=_.__s;while(_.__d&&++V<25);_.state=_.__s,_.getChildContext!=null&&(l=C(C({},l),_.getChildContext())),g||_.getSnapshotBeforeUpdate==null||(S=_.getSnapshotBeforeUpdate(a,m)),le(o,B($=u!=null&&u.type===U&&u.key==null?u.props.children:u)?$:[$],e,t,l,r,n,s,i,d,c),_.base=e.__e,e.__u&=-161,_.__h.length&&s.push(_),v&&(_.__E=_.__=null)}catch(L){e.__v=null,d||n!=null?(e.__e=i,e.__u|=d?160:32,n[n.indexOf(i)]=null):(e.__e=t.__e,e.__k=t.__k),h.__e(L,e,t)}else n==null&&e.__v===t.__v?(e.__k=t.__k,e.__e=t.__e):e.__e=pe(t.__e,e,t,l,r,n,s,d,c);(u=h.diffed)&&u(e)}function se(o,e,t){e.__d=void 0;for(var l=0;l<t.length;l++)z(t[l],t[++l],t[++l]);h.__c&&h.__c(e,o),o.some(function(r){try{o=r.__h,r.__h=[],o.some(function(n){n.call(r)})}catch(n){h.__e(n,r.__v)}})}function pe(o,e,t,l,r,n,s,i,d){var c,u,_,g,a,m,S,v=t.props,p=e.props,y=e.type;if(y==="svg"&&(r=!0),n!=null){for(c=0;c<n.length;c++)if((a=n[c])&&"setAttribute"in a==!!y&&(y?a.localName===y:a.nodeType===3)){o=a,n[c]=null;break}}if(o==null){if(y===null)return document.createTextNode(p);o=r?document.createElementNS("http://www.w3.org/2000/svg",y):document.createElement(y,p.is&&p),n=null,i=!1}if(y===null)v===p||i&&o.data===p||(o.data=p);else{if(n=n&&F.call(o.childNodes),v=t.props||P,!i&&n!=null)for(v={},c=0;c<o.attributes.length;c++)v[(a=o.attributes[c]).name]=a.value;for(c in v)a=v[c],c=="children"||(c=="dangerouslySetInnerHTML"?_=a:c==="key"||c in p||O(o,c,null,a,r));for(c in p)a=p[c],c=="children"?g=a:c=="dangerouslySetInnerHTML"?u=a:c=="value"?m=a:c=="checked"?S=a:c==="key"||i&&typeof a!="function"||v[c]===a||O(o,c,a,v[c],r);if(u)i||_&&(u.__html===_.__html||u.__html===o.innerHTML)||(o.innerHTML=u.__html),e.__k=[];else if(_&&(o.innerHTML=""),le(o,B(g)?g:[g],e,t,l,r&&y!=="foreignObject",n,s,n?n[0]:t.__k&&E(t,0),i,d),n!=null)for(c=n.length;c--;)n[c]!=null&&ne(n[c]);i||(c="value",m!==void 0&&(m!==o[c]||y==="progress"&&!m||y==="option"&&m!==v[c])&&O(o,c,m,v[c],!1),c="checked",S!==void 0&&S!==o[c]&&O(o,c,S,v[c],!1))}return o}function z(o,e,t){try{typeof o=="function"?o(e):o.current=e}catch(l){h.__e(l,t)}}function H(o,e,t){var l,r;if(h.unmount&&h.unmount(o),(l=o.ref)&&(l.current&&l.current!==o.__e||z(l,null,e)),(l=o.__c)!=null){if(l.componentWillUnmount)try{l.componentWillUnmount()}catch(n){h.__e(n,e)}l.base=l.__P=null}if(l=o.__k)for(r=0;r<l.length;r++)l[r]&&H(l[r],e,t||typeof o.type!="function");t||o.__e==null||ne(o.__e),o.__c=o.__=o.__e=o.__d=void 0}function me(o,e,t){return this.constructor(o,t)}function ve(o,e,t){var l,r,n,s;h.__&&h.__(o,e),r=(l=typeof t=="function")?null:t&&t.__k||e.__k,n=[],s=[],q(e,o=(!l&&t||e).__k=ue(U,null,[o]),r||P,P,e.ownerSVGElement!==void 0,!l&&t?[t]:r?null:e.firstChild?F.call(e.childNodes):null,n,!l&&t?t:r?r.__e:e.firstChild,l,s),se(n,o,s)}F=oe.slice,h={__e:function(o,e,t,l){for(var r,n,s;e=e.__;)if((r=e.__c)&&!r.__)try{if((n=r.constructor)&&n.getDerivedStateFromError!=null&&(r.setState(n.getDerivedStateFromError(o)),s=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(o,l||{}),s=r.__d),s)return r.__E=r}catch(i){o=i}throw o}},ee=0,x.prototype.setState=function(o,e){var t;t=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=C({},this.state),typeof o=="function"&&(o=o(C({},t),this.props)),o&&C(t,o),o!=null&&this.__v&&(e&&this._sb.push(e),G(this))},x.prototype.forceUpdate=function(o){this.__v&&(this.__e=!0,o&&this.__h.push(o),G(this))},x.prototype.render=U,w=[],te=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,K=function(o,e){return o.__v.__b-e.__v.__b},M.__r=0,j=0,R=Q(!1),W=Q(!0);function ye(){let o="";for(let e=0;e<32;e++){let t=Math.random()*16|0;(e===8||e===12||e===16||e===20)&&(o+="-"),o+=(e===12?4:e===16?t&3|8:t).toString(16)}return o}function ge(o,e){return o===1?e:e+"s"}function X(o,e){if(e)return localStorage[o]=JSON.stringify(e);let t=localStorage[o];return t&&JSON.parse(t)||[]}class be{constructor(e,t){this.key=e,this.todos=X(e)||[],this.onChanges=[t]}inform(){X(this.key,this.todos),this.onChanges.forEach(e=>e())}addTodo(e){this.todos=this.todos.concat({id:ye(),title:e,completed:!1}),this.inform()}toggleAll(e){this.todos=this.todos.map(t=>({...t,completed:e})),this.inform()}toggle(e){this.todos=this.todos.map(t=>t!==e?t:{...t,completed:!t.completed}),this.inform()}destroy(e){this.todos=this.todos.filter(t=>t!==e),this.inform()}save(e,t){this.todos=this.todos.map(l=>l!==e?l:{...l,title:t}),this.inform()}clearCompleted(){this.todos=this.todos.filter(e=>!e.completed),this.inform()}}var ke=0;function f(o,e,t,l,r,n){var s,i,d={};for(i in e)i=="ref"?s=e[i]:d[i]=e[i];var c={type:o,props:d,key:t,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--ke,__i:-1,__u:0,__source:r,__self:n};if(typeof o=="function"&&(s=o.defaultProps))for(i in s)d[i]===void 0&&(d[i]=s[i]);return h.vnode&&h.vnode(c),c}class Se extends x{render({nowShowing:e,count:t,completedCount:l,onClearCompleted:r}){return f("footer",{class:"footer",children:[f("span",{class:"todo-count",children:[f("strong",{children:t})," ",ge(t,"item")," left"]}),f("ul",{class:"filters",children:[f("li",{children:f("a",{href:"#/",class:e=="all"&&"selected",children:"All"})})," ",f("li",{children:f("a",{href:"#/active",class:e=="active"&&"selected",children:"Active"})})," ",f("li",{children:f("a",{href:"#/completed",class:e=="completed"&&"selected",children:"Completed"})})]}),l>0&&f("button",{class:"clear-completed",onClick:r,children:"Clear completed"})]})}}function Te(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var ie={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(o){(function(){var e={}.hasOwnProperty;function t(){for(var n="",s=0;s<arguments.length;s++){var i=arguments[s];i&&(n=r(n,l(i)))}return n}function l(n){if(typeof n=="string"||typeof n=="number")return n;if(typeof n!="object")return"";if(Array.isArray(n))return t.apply(null,n);if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]"))return n.toString();var s="";for(var i in n)e.call(n,i)&&n[i]&&(s=r(s,i));return s}function r(n,s){return s?n?n+" "+s:n+s:n}o.exports?(t.default=t,o.exports=t):window.classNames=t})()})(ie);var Ce=ie.exports;const we=Te(Ce),xe=27,Ee=13;class De extends x{constructor(){super(...arguments);b(this,"handleSubmit",()=>{let{onSave:t,onDestroy:l,todo:r}=this.props,n=this.state.editText.trim();n?(t(r,n),this.setState({editText:n})):l(r)});b(this,"handleEdit",()=>{let{onEdit:t,todo:l}=this.props;t(l),this.setState({editText:l.title})});b(this,"toggle",t=>{let{onToggle:l,todo:r}=this.props;l(r),t.preventDefault()});b(this,"handleTextInput",t=>{this.setState({editText:t.target.value})});b(this,"handleKeyDown",t=>{if(t.which===xe){let{todo:l}=this.props;this.setState({editText:l.title}),this.props.onCancel(l)}else t.which===Ee&&this.handleSubmit()});b(this,"handleDestroy",()=>{this.props.onDestroy(this.props.todo)})}componentDidUpdate(){let t=this.base&&this.base.querySelector(".edit");t&&t.focus()}render({todo:{title:t,completed:l},onToggle:r,onDestroy:n,editing:s},{editText:i}){return f("li",{class:we({completed:l,editing:s}),children:[f("div",{class:"view",children:[f("input",{class:"toggle",type:"checkbox",checked:l,onChange:this.toggle}),f("label",{onDblClick:this.handleEdit,children:t}),f("button",{class:"destroy",onClick:this.handleDestroy})]}),s&&f("input",{class:"edit",value:i,onBlur:this.handleSubmit,onInput:this.handleTextInput,onKeyDown:this.handleKeyDown})]})}}const Pe=13,Z={all:o=>!0,active:o=>!o.completed,completed:o=>o.completed};class Ne extends x{constructor(){super();b(this,"handleNewTodoKeyDown",t=>{if(t.keyCode!==Pe)return;t.preventDefault();let l=this.state.newTodo.trim();l&&(this.model.addTodo(l),this.setState({newTodo:""}))});b(this,"handleNewTodoInput",t=>{this.setState({newTodo:t.target.value})});b(this,"toggleAll",t=>{let l=t.target.checked;this.model.toggleAll(l)});b(this,"toggle",t=>{this.model.toggle(t)});b(this,"destroy",t=>{this.model.destroy(t)});b(this,"edit",t=>{this.setState({editing:t.id})});b(this,"save",(t,l)=>{this.model.save(t,l),this.setState({editing:null})});b(this,"cancel",()=>{this.setState({editing:null})});b(this,"clearCompleted",()=>{this.model.clearCompleted()});this.model=new be("preact-todos",()=>this.setState({})),addEventListener("hashchange",this.handleRoute.bind(this)),this.handleRoute()}handleRoute(){let t=String(location.hash||"").split("/").pop();Z[t]||(t="all"),this.setState({nowShowing:t})}render({},{nowShowing:t=ALL_TODOS,newTodo:l,editing:r}){let{todos:n}=this.model,s=n.filter(Z[t]),i=n.reduce((c,u)=>c+(u.completed?0:1),0),d=n.length-i;return f("div",{children:[f("header",{class:"header",children:[f("h1",{children:"todos"}),f("input",{class:"new-todo",placeholder:"What needs to be done?",value:l,onKeyDown:this.handleNewTodoKeyDown,onInput:this.handleNewTodoInput,autoFocus:!0})]}),n.length?f("section",{class:"main",children:[f("input",{id:"toggle-all",class:"toggle-all",type:"checkbox",onChange:this.toggleAll,checked:i===0}),f("label",{for:"toggle-all",children:"Mark all as complete"}),f("ul",{class:"todo-list",children:s.map(c=>f(De,{todo:c,onToggle:this.toggle,onDestroy:this.destroy,onEdit:this.edit,editing:r===c.id,onSave:this.save,onCancel:this.cancel}))})]}):null,i||d?f(Se,{count:i,completedCount:d,nowShowing:t,onClearCompleted:this.clearCompleted}):null]})}}ve(f(Ne,{}),document.getElementById("app"));
