(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();var Rr,Z,Da,nt,hi,Ba,Ia,Pa,sn,Bs,Is,zt={},Ma=[],tl=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,kr=Array.isArray;function ze(t,e){for(var r in e)t[r]=e[r];return t}function nn(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function rl(t,e,r){var s,n,i,o={};for(i in e)i=="key"?s=e[i]:i=="ref"?n=e[i]:o[i]=e[i];if(arguments.length>2&&(o.children=arguments.length>3?Rr.call(arguments,2):r),typeof t=="function"&&t.defaultProps!=null)for(i in t.defaultProps)o[i]===void 0&&(o[i]=t.defaultProps[i]);return lr(t,o,s,n,null)}function lr(t,e,r,s,n){var i={type:t,props:e,key:r,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:n??++Da,__i:-1,__u:0};return n==null&&Z.vnode!=null&&Z.vnode(i),i}function Tr(t){return t.children}function it(t,e){this.props=t,this.context=e}function xt(t,e){if(e==null)return t.__?xt(t.__,t.__i+1):null;for(var r;e<t.__k.length;e++)if((r=t.__k[e])!=null&&r.__e!=null)return r.__e;return typeof t.type=="function"?xt(t):null}function Na(t){var e,r;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((r=t.__k[e])!=null&&r.__e!=null){t.__e=t.__c.base=r.__e;break}return Na(t)}}function pi(t){(!t.__d&&(t.__d=!0)&&nt.push(t)&&!hr.__r++||hi!=Z.debounceRendering)&&((hi=Z.debounceRendering)||Ba)(hr)}function hr(){for(var t,e,r,s,n,i,o,a=1;nt.length;)nt.length>a&&nt.sort(Ia),t=nt.shift(),a=nt.length,t.__d&&(r=void 0,s=void 0,n=(s=(e=t).__v).__e,i=[],o=[],e.__P&&((r=ze({},s)).__v=s.__v+1,Z.vnode&&Z.vnode(r),on(e.__P,r,s,e.__n,e.__P.namespaceURI,32&s.__u?[n]:null,i,n??xt(s),!!(32&s.__u),o),r.__v=s.__v,r.__.__k[r.__i]=r,Ua(i,r,o),s.__e=s.__=null,r.__e!=n&&Na(r)));hr.__r=0}function Oa(t,e,r,s,n,i,o,a,u,c,f){var l,m,h,S,A,b,v,_=s&&s.__k||Ma,I=e.length;for(u=sl(r,e,_,u,I),l=0;l<I;l++)(h=r.__k[l])!=null&&(m=h.__i==-1?zt:_[h.__i]||zt,h.__i=l,b=on(t,h,m,n,i,o,a,u,c,f),S=h.__e,h.ref&&m.ref!=h.ref&&(m.ref&&an(m.ref,null,h),f.push(h.ref,h.__c||S,h)),A==null&&S!=null&&(A=S),(v=!!(4&h.__u))||m.__k===h.__k?u=$a(h,u,t,v):typeof h.type=="function"&&b!==void 0?u=b:S&&(u=S.nextSibling),h.__u&=-7);return r.__e=A,u}function sl(t,e,r,s,n){var i,o,a,u,c,f=r.length,l=f,m=0;for(t.__k=new Array(n),i=0;i<n;i++)(o=e[i])!=null&&typeof o!="boolean"&&typeof o!="function"?(typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?o=t.__k[i]=lr(null,o,null,null,null):kr(o)?o=t.__k[i]=lr(Tr,{children:o},null,null,null):o.constructor===void 0&&o.__b>0?o=t.__k[i]=lr(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):t.__k[i]=o,u=i+m,o.__=t,o.__b=t.__b+1,a=null,(c=o.__i=nl(o,r,u,l))!=-1&&(l--,(a=r[c])&&(a.__u|=2)),a==null||a.__v==null?(c==-1&&(n>f?m--:n<f&&m++),typeof o.type!="function"&&(o.__u|=4)):c!=u&&(c==u-1?m--:c==u+1?m++:(c>u?m--:m++,o.__u|=4))):t.__k[i]=null;if(l)for(i=0;i<f;i++)(a=r[i])!=null&&(2&a.__u)==0&&(a.__e==s&&(s=xt(a)),La(a,a));return s}function $a(t,e,r,s){var n,i;if(typeof t.type=="function"){for(n=t.__k,i=0;n&&i<n.length;i++)n[i]&&(n[i].__=t,e=$a(n[i],e,r,s));return e}t.__e!=e&&(s&&(e&&t.type&&!e.parentNode&&(e=xt(t)),r.insertBefore(t.__e,e||null)),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function nl(t,e,r,s){var n,i,o,a=t.key,u=t.type,c=e[r],f=c!=null&&(2&c.__u)==0;if(c===null&&a==null||f&&a==c.key&&u==c.type)return r;if(s>(f?1:0)){for(n=r-1,i=r+1;n>=0||i<e.length;)if((c=e[o=n>=0?n--:i++])!=null&&(2&c.__u)==0&&a==c.key&&u==c.type)return o}return-1}function mi(t,e,r){e[0]=="-"?t.setProperty(e,r??""):t[e]=r==null?"":typeof r!="number"||tl.test(e)?r:r+"px"}function rr(t,e,r,s,n){var i,o;e:if(e=="style")if(typeof r=="string")t.style.cssText=r;else{if(typeof s=="string"&&(t.style.cssText=s=""),s)for(e in s)r&&e in r||mi(t.style,e,"");if(r)for(e in r)s&&r[e]==s[e]||mi(t.style,e,r[e])}else if(e[0]=="o"&&e[1]=="n")i=e!=(e=e.replace(Pa,"$1")),o=e.toLowerCase(),e=o in t||e=="onFocusOut"||e=="onFocusIn"?o.slice(2):e.slice(2),t.l||(t.l={}),t.l[e+i]=r,r?s?r.u=s.u:(r.u=sn,t.addEventListener(e,i?Is:Bs,i)):t.removeEventListener(e,i?Is:Bs,i);else{if(n=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&r==1?"":r))}}function gi(t){return function(e){if(this.l){var r=this.l[e.type+t];if(e.t==null)e.t=sn++;else if(e.t<r.u)return;return r(Z.event?Z.event(e):e)}}}function on(t,e,r,s,n,i,o,a,u,c){var f,l,m,h,S,A,b,v,_,I,M,W,ue,kt,Ne,Tt,Hr,Oe=e.type;if(e.constructor!==void 0)return null;128&r.__u&&(u=!!(32&r.__u),i=[a=e.__e=r.__e]),(f=Z.__b)&&f(e);e:if(typeof Oe=="function")try{if(v=e.props,_="prototype"in Oe&&Oe.prototype.render,I=(f=Oe.contextType)&&s[f.__c],M=f?I?I.props.value:f.__:s,r.__c?b=(l=e.__c=r.__c).__=l.__E:(_?e.__c=l=new Oe(v,M):(e.__c=l=new it(v,M),l.constructor=Oe,l.render=ol),I&&I.sub(l),l.state||(l.state={}),l.__n=s,m=l.__d=!0,l.__h=[],l._sb=[]),_&&l.__s==null&&(l.__s=l.state),_&&Oe.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=ze({},l.__s)),ze(l.__s,Oe.getDerivedStateFromProps(v,l.__s))),h=l.props,S=l.state,l.__v=e,m)_&&Oe.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),_&&l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(_&&Oe.getDerivedStateFromProps==null&&v!==h&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(v,M),e.__v==r.__v||!l.__e&&l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(v,l.__s,M)===!1){for(e.__v!=r.__v&&(l.props=v,l.state=l.__s,l.__d=!1),e.__e=r.__e,e.__k=r.__k,e.__k.some(function(lt){lt&&(lt.__=e)}),W=0;W<l._sb.length;W++)l.__h.push(l._sb[W]);l._sb=[],l.__h.length&&o.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(v,l.__s,M),_&&l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(h,S,A)})}if(l.context=M,l.props=v,l.__P=t,l.__e=!1,ue=Z.__r,kt=0,_){for(l.state=l.__s,l.__d=!1,ue&&ue(e),f=l.render(l.props,l.state,l.context),Ne=0;Ne<l._sb.length;Ne++)l.__h.push(l._sb[Ne]);l._sb=[]}else do l.__d=!1,ue&&ue(e),f=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++kt<25);l.state=l.__s,l.getChildContext!=null&&(s=ze(ze({},s),l.getChildContext())),_&&!m&&l.getSnapshotBeforeUpdate!=null&&(A=l.getSnapshotBeforeUpdate(h,S)),Tt=f,f!=null&&f.type===Tr&&f.key==null&&(Tt=Fa(f.props.children)),a=Oa(t,kr(Tt)?Tt:[Tt],e,r,s,n,i,o,a,u,c),l.base=e.__e,e.__u&=-161,l.__h.length&&o.push(l),b&&(l.__E=l.__=null)}catch(lt){if(e.__v=null,u||i!=null)if(lt.then){for(e.__u|=u?160:128;a&&a.nodeType==8&&a.nextSibling;)a=a.nextSibling;i[i.indexOf(a)]=null,e.__e=a}else{for(Hr=i.length;Hr--;)nn(i[Hr]);Ps(e)}else e.__e=r.__e,e.__k=r.__k,lt.then||Ps(e);Z.__e(lt,e,r)}else i==null&&e.__v==r.__v?(e.__k=r.__k,e.__e=r.__e):a=e.__e=il(r.__e,e,r,s,n,i,o,u,c);return(f=Z.diffed)&&f(e),128&e.__u?void 0:a}function Ps(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(Ps)}function Ua(t,e,r){for(var s=0;s<r.length;s++)an(r[s],r[++s],r[++s]);Z.__c&&Z.__c(e,t),t.some(function(n){try{t=n.__h,n.__h=[],t.some(function(i){i.call(n)})}catch(i){Z.__e(i,n.__v)}})}function Fa(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:kr(t)?t.map(Fa):ze({},t)}function il(t,e,r,s,n,i,o,a,u){var c,f,l,m,h,S,A,b=r.props||zt,v=e.props,_=e.type;if(_=="svg"?n="http://www.w3.org/2000/svg":_=="math"?n="http://www.w3.org/1998/Math/MathML":n||(n="http://www.w3.org/1999/xhtml"),i!=null){for(c=0;c<i.length;c++)if((h=i[c])&&"setAttribute"in h==!!_&&(_?h.localName==_:h.nodeType==3)){t=h,i[c]=null;break}}if(t==null){if(_==null)return document.createTextNode(v);t=document.createElementNS(n,_,v.is&&v),a&&(Z.__m&&Z.__m(e,i),a=!1),i=null}if(_==null)b===v||a&&t.data==v||(t.data=v);else{if(i=i&&Rr.call(t.childNodes),!a&&i!=null)for(b={},c=0;c<t.attributes.length;c++)b[(h=t.attributes[c]).name]=h.value;for(c in b)if(h=b[c],c!="children"){if(c=="dangerouslySetInnerHTML")l=h;else if(!(c in v)){if(c=="value"&&"defaultValue"in v||c=="checked"&&"defaultChecked"in v)continue;rr(t,c,null,h,n)}}for(c in v)h=v[c],c=="children"?m=h:c=="dangerouslySetInnerHTML"?f=h:c=="value"?S=h:c=="checked"?A=h:a&&typeof h!="function"||b[c]===h||rr(t,c,h,b[c],n);if(f)a||l&&(f.__html==l.__html||f.__html==t.innerHTML)||(t.innerHTML=f.__html),e.__k=[];else if(l&&(t.innerHTML=""),Oa(e.type=="template"?t.content:t,kr(m)?m:[m],e,r,s,_=="foreignObject"?"http://www.w3.org/1999/xhtml":n,i,o,i?i[0]:r.__k&&xt(r,0),a,u),i!=null)for(c=i.length;c--;)nn(i[c]);a||(c="value",_=="progress"&&S==null?t.removeAttribute("value"):S!=null&&(S!==t[c]||_=="progress"&&!S||_=="option"&&S!=b[c])&&rr(t,c,S,b[c],n),c="checked",A!=null&&A!=t[c]&&rr(t,c,A,b[c],n))}return t}function an(t,e,r){try{if(typeof t=="function"){var s=typeof t.__u=="function";s&&t.__u(),s&&e==null||(t.__u=t(e))}else t.current=e}catch(n){Z.__e(n,r)}}function La(t,e,r){var s,n;if(Z.unmount&&Z.unmount(t),(s=t.ref)&&(s.current&&s.current!=t.__e||an(s,null,e)),(s=t.__c)!=null){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(i){Z.__e(i,e)}s.base=s.__P=null}if(s=t.__k)for(n=0;n<s.length;n++)s[n]&&La(s[n],e,r||typeof t.type!="function");r||nn(t.__e),t.__c=t.__=t.__e=void 0}function ol(t,e,r){return this.constructor(t,r)}function al(t,e,r){var s,n,i,o;e==document&&(e=document.documentElement),Z.__&&Z.__(t,e),n=(s=!1)?null:e.__k,i=[],o=[],on(e,t=e.__k=rl(Tr,null,[t]),n||zt,zt,e.namespaceURI,n?null:e.firstChild?Rr.call(e.childNodes):null,i,n?n.__e:e.firstChild,s,o),Ua(i,t,o)}Rr=Ma.slice,Z={__e:function(t,e,r,s){for(var n,i,o;e=e.__;)if((n=e.__c)&&!n.__)try{if((i=n.constructor)&&i.getDerivedStateFromError!=null&&(n.setState(i.getDerivedStateFromError(t)),o=n.__d),n.componentDidCatch!=null&&(n.componentDidCatch(t,s||{}),o=n.__d),o)return n.__E=n}catch(a){t=a}throw t}},Da=0,it.prototype.setState=function(t,e){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=ze({},this.state),typeof t=="function"&&(t=t(ze({},r),this.props)),t&&ze(r,t),t!=null&&this.__v&&(e&&this._sb.push(e),pi(this))},it.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),pi(this))},it.prototype.render=Tr,nt=[],Ba=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ia=function(t,e){return t.__v.__b-e.__v.__b},hr.__r=0,Pa=/(PointerCapture)$|Capture$/i,sn=0,Bs=gi(!1),Is=gi(!0);var cl=0;function q(t,e,r,s,n,i){e||(e={});var o,a,u=e;if("ref"in u)for(a in u={},e)a=="ref"?o=e[a]:u[a]=e[a];var c={type:t,props:u,key:r,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--cl,__i:-1,__u:0,__source:n,__self:i};if(typeof t=="function"&&(o=t.defaultProps))for(a in o)u[a]===void 0&&(u[a]=o[a]);return Z.vnode&&Z.vnode(c),c}function ul(){let t="";for(let e=0;e<32;e++){const r=Math.random()*16|0;(e===8||e===12||e===16||e===20)&&(t+="-"),t+=(e===12?4:e===16?r&3|8:r).toString(16)}return t}function ll(t,e){return t===1?e:`${e}s`}const dl=t=>({setHttpHandler(e){t.httpHandler=e},httpHandler(){return t.httpHandler},updateHttpClientConfig(e,r){t.httpHandler?.updateHttpClientConfig(e,r)},httpHandlerConfigs(){return t.httpHandler.httpHandlerConfigs()}}),fl=t=>({httpHandler:t.httpHandler()});var jt;(function(t){t.HTTP="http",t.HTTPS="https"})(jt||(jt={}));var pr;(function(t){t.MD5="md5",t.CRC32="crc32",t.CRC32C="crc32c",t.SHA1="sha1",t.SHA256="sha256"})(pr||(pr={}));const Ms="__smithy_context";class ae{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){const r=new ae({...e,headers:{...e.headers}});return r.query&&(r.query=hl(r.query)),r}static isInstance(e){if(!e)return!1;const r=e;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return ae.clone(this)}}function hl(t){return Object.keys(t).reduce((e,r)=>{const s=t[r];return{...e,[r]:Array.isArray(s)?[...s]:s}},{})}class Qe{statusCode;reason;headers;body;constructor(e){this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;const r=e;return typeof r.statusCode=="number"&&typeof r.headers=="object"}}function pl(t){return e=>async r=>{const{request:s}=r;if(t.expectContinueHeader!==!1&&ae.isInstance(s)&&s.body&&t.runtime==="node"&&t.requestHandler?.constructor?.name!=="FetchHttpHandler"){let n=!0;if(typeof t.expectContinueHeader=="number")try{n=(Number(s.headers?.["content-length"])??t.bodyLengthChecker?.(s.body)??1/0)>=t.expectContinueHeader}catch{}else n=!!t.expectContinueHeader;n&&(s.headers.Expect="100-continue")}return e({...r,request:s})}}const ml={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware",override:!0},gl=t=>({applyToStack:e=>{e.add(pl(t),ml)}}),bt={WHEN_SUPPORTED:"WHEN_SUPPORTED",WHEN_REQUIRED:"WHEN_REQUIRED"},yl=bt.WHEN_SUPPORTED,zr={WHEN_SUPPORTED:"WHEN_SUPPORTED",WHEN_REQUIRED:"WHEN_REQUIRED"},Sl=bt.WHEN_SUPPORTED;var K;(function(t){t.MD5="MD5",t.CRC32="CRC32",t.CRC32C="CRC32C",t.CRC64NVME="CRC64NVME",t.SHA1="SHA1",t.SHA256="SHA256"})(K||(K={}));var yi;(function(t){t.HEADER="header",t.TRAILER="trailer"})(yi||(yi={}));const Ns=K.CRC32;function wl(t,e,r){return t.$source||(t.$source={}),t.$source[e]=r,t}function se(t,e,r){t.__aws_sdk_context?t.__aws_sdk_context.features||(t.__aws_sdk_context.features={}):t.__aws_sdk_context={features:{}},t.__aws_sdk_context.features[e]=r}const Si=t=>Qe.isInstance(t)?t.headers?.date??t.headers?.Date:void 0,cn=t=>new Date(Date.now()+t),xl=(t,e)=>Math.abs(cn(e).getTime()-t)>=3e5,wi=(t,e)=>{const r=Date.parse(t);return xl(r,e)?r-Date.now():e},Mt=(t,e)=>{if(!e)throw new Error(`Property \`${t}\` is not resolved for AWS SDK SigV4Auth`);return e},Ha=async t=>{const e=Mt("context",t.context),r=Mt("config",t.config),s=e.endpointV2?.properties?.authSchemes?.[0],i=await Mt("signer",r.signer)(s),o=t?.signingRegion,a=t?.signingRegionSet,u=t?.signingName;return{config:r,signer:i,signingRegion:o,signingRegionSet:a,signingName:u}};class za{async sign(e,r,s){if(!ae.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");const n=await Ha(s),{config:i,signer:o}=n;let{signingRegion:a,signingName:u}=n;const c=s.context;if(c?.authSchemes?.length??!1){const[l,m]=c.authSchemes;l?.name==="sigv4a"&&m?.name==="sigv4"&&(a=m?.signingRegion??a,u=m?.signingName??u)}return await o.sign(e,{signingDate:cn(i.systemClockOffset),signingRegion:a,signingService:u})}errorHandler(e){return r=>{const s=r.ServerTime??Si(r.$response);if(s){const n=Mt("config",e.config),i=n.systemClockOffset;n.systemClockOffset=wi(s,n.systemClockOffset),n.systemClockOffset!==i&&r.$metadata&&(r.$metadata.clockSkewCorrected=!0)}throw r}}successHandler(e,r){const s=Si(e);if(s){const n=Mt("config",r.config);n.systemClockOffset=wi(s,n.systemClockOffset)}}}class bl extends za{async sign(e,r,s){if(!ae.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");const{config:n,signer:i,signingRegion:o,signingRegionSet:a,signingName:u}=await Ha(s),f=(await n.sigv4aSigningRegionSet?.()??a??[o]).join(",");return await i.sign(e,{signingDate:cn(n.systemClockOffset),signingRegion:f,signingService:u})}}const tt=t=>t[Ms]||(t[Ms]={}),Me=t=>{if(typeof t=="function")return t;const e=Promise.resolve(t);return()=>e},El=(t,e)=>{if(!e||e.length===0)return t;const r=[];for(const s of e)for(const n of t)n.schemeId.split("#")[1]===s&&r.push(n);for(const s of t)r.find(({schemeId:n})=>n===s.schemeId)||r.push(s);return r};function Cl(t){const e=new Map;for(const r of t)e.set(r.schemeId,r);return e}const Al=(t,e)=>(r,s)=>async n=>{const i=t.httpAuthSchemeProvider(await e.httpAuthSchemeParametersProvider(t,s,n.input)),o=t.authSchemePreference?await t.authSchemePreference():[],a=El(i,o),u=Cl(t.httpAuthSchemes),c=tt(s),f=[];for(const l of a){const m=u.get(l.schemeId);if(!m){f.push(`HttpAuthScheme \`${l.schemeId}\` was not enabled for this service.`);continue}const h=m.identityProvider(await e.identityProviderConfigProvider(t));if(!h){f.push(`HttpAuthScheme \`${l.schemeId}\` did not have an IdentityProvider configured.`);continue}const{identityProperties:S={},signingProperties:A={}}=l.propertiesExtractor?.(t,s)||{};l.identityProperties=Object.assign(l.identityProperties||{},S),l.signingProperties=Object.assign(l.signingProperties||{},A),c.selectedHttpAuthScheme={httpAuthOption:l,identity:await h(l.identityProperties),signer:m.signer};break}if(!c.selectedHttpAuthScheme)throw new Error(f.join(`
`));return r(n)},_l={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},vl=(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r})=>({applyToStack:s=>{s.addRelativeTo(Al(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r}),_l)}}),Rl={name:"serializerMiddleware"},kl=t=>e=>{throw e},Tl=(t,e)=>{},Dl=t=>(e,r)=>async s=>{if(!ae.isInstance(s.request))return e(s);const i=tt(r).selectedHttpAuthScheme;if(!i)throw new Error("No HttpAuthScheme was selected: unable to sign request");const{httpAuthOption:{signingProperties:o={}},identity:a,signer:u}=i,c=await e({...s,request:await u.sign(s.request,a,o)}).catch((u.errorHandler||kl)(o));return(u.successHandler||Tl)(c.response,o),c},ja={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},Bl=t=>({applyToStack:e=>{e.addRelativeTo(Dl(),ja)}}),yt=t=>{if(typeof t=="function")return t;const e=Promise.resolve(t);return()=>e},qa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",xi=Object.entries(qa).reduce((t,[e,r])=>(t[r]=Number(e),t),{}),Il=qa.split(""),St=6,Nt=8,Pl=63,Et=t=>{let e=t.length/4*3;t.slice(-2)==="=="?e-=2:t.slice(-1)==="="&&e--;const r=new ArrayBuffer(e),s=new DataView(r);for(let n=0;n<t.length;n+=4){let i=0,o=0;for(let c=n,f=n+3;c<=f;c++)if(t[c]!=="="){if(!(t[c]in xi))throw new TypeError(`Invalid character ${t[c]} in base64 string.`);i|=xi[t[c]]<<(f-c)*St,o+=St}else i>>=St;const a=n/4*3;i>>=o%Nt;const u=Math.floor(o/Nt);for(let c=0;c<u;c++){const f=(u-c-1)*Nt;s.setUint8(a+c,(i&255<<f)>>f)}}return new Uint8Array(r)},Je=t=>new TextEncoder().encode(t),Ct=t=>typeof t=="string"?Je(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t),vt=t=>{if(typeof t=="string")return t;if(typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return new TextDecoder("utf-8").decode(t)};function ct(t){let e;typeof t=="string"?e=Je(t):e=t;const r=typeof e=="object"&&typeof e.length=="number",s=typeof e=="object"&&typeof e.byteOffset=="number"&&typeof e.byteLength=="number";if(!r&&!s)throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");let n="";for(let i=0;i<e.length;i+=3){let o=0,a=0;for(let c=i,f=Math.min(i+3,e.length);c<f;c++)o|=e[c]<<(f-c-1)*Nt,a+=Nt;const u=Math.ceil(a/St);o<<=u*St-a;for(let c=1;c<=u;c++){const f=(u-c)*St;n+=Il[(o&Pl<<f)>>f]}n+="==".slice(0,4-u)}return n}class ot extends Uint8Array{static fromString(e,r="utf-8"){if(typeof e=="string")return r==="base64"?ot.mutate(Et(e)):ot.mutate(Je(e));throw new Error(`Unsupported conversion from ${typeof e} to Uint8ArrayBlobAdapter.`)}static mutate(e){return Object.setPrototypeOf(e,ot.prototype),e}transformToString(e="utf-8"){return e==="base64"?ct(this):vt(this)}}const Ml=typeof ReadableStream=="function"?ReadableStream:function(){};class Nl extends Ml{}const Os=t=>typeof ReadableStream=="function"&&(t?.constructor?.name===ReadableStream.name||t instanceof ReadableStream),Ol=({expectedChecksum:t,checksum:e,source:r,checksumSourceLocation:s,base64Encoder:n})=>{if(!Os(r))throw new Error(`@smithy/util-stream: unsupported source type ${r?.constructor?.name??r} in ChecksumStream.`);const i=n??ct;if(typeof TransformStream!="function")throw new Error("@smithy/util-stream: unable to instantiate ChecksumStream because API unavailable: ReadableStream/TransformStream.");const o=new TransformStream({start(){},async transform(u,c){e.update(u),c.enqueue(u)},async flush(u){const c=await e.digest(),f=i(c);if(t!==f){const l=new Error(`Checksum mismatch: expected "${t}" but received "${f}" in response header "${s}".`);u.error(l)}else u.terminate()}});r.pipeThrough(o);const a=o.readable;return Object.setPrototypeOf(a,Nl.prototype),a};class $l{allocByteArray;byteLength=0;byteArrays=[];constructor(e){this.allocByteArray=e}push(e){this.byteArrays.push(e),this.byteLength+=e.byteLength}flush(){if(this.byteArrays.length===1){const s=this.byteArrays[0];return this.reset(),s}const e=this.allocByteArray(this.byteLength);let r=0;for(let s=0;s<this.byteArrays.length;++s){const n=this.byteArrays[s];e.set(n,r),r+=n.byteLength}return this.reset(),e}reset(){this.byteArrays=[],this.byteLength=0}}function Ul(t,e,r){const s=t.getReader();let n=!1,i=0;const o=["",new $l(c=>new Uint8Array(c))];let a=-1;const u=async c=>{const{value:f,done:l}=await s.read(),m=f;if(l){if(a!==-1){const h=jr(o,a);Ot(h)>0&&c.enqueue(h)}c.close()}else{const h=Hl(m,!1);if(a!==h&&(a>=0&&c.enqueue(jr(o,a)),a=h),a===-1){c.enqueue(m);return}const S=Ot(m);i+=S;const A=Ot(o[a]);if(S>=e&&A===0)c.enqueue(m);else{const b=Ll(o,a,m);!n&&i>e*2&&(n=!0,r?.warn(`@smithy/util-stream - stream chunk size ${S} is below threshold of ${e}, automatically buffering.`)),b>=e?c.enqueue(jr(o,a)):await u(c)}}};return new ReadableStream({pull:u})}const Fl=Ul;function Ll(t,e,r){switch(e){case 0:return t[0]+=r,Ot(t[0]);case 1:case 2:return t[e].push(r),Ot(t[e])}}function jr(t,e){switch(e){case 0:const r=t[0];return t[0]="",r;case 1:case 2:return t[e].flush()}throw new Error(`@smithy/util-stream - invalid index ${e} given to flush()`)}function Ot(t){return t?.byteLength??t?.length??0}function Hl(t,e=!0){return e&&typeof Buffer<"u"&&t instanceof Buffer?2:t instanceof Uint8Array?1:typeof t=="string"?0:-1}const zl=(t,e)=>{const{base64Encoder:r,bodyLengthChecker:s,checksumAlgorithmFn:n,checksumLocationName:i,streamHasher:o}=e,a=r!==void 0&&s!==void 0&&n!==void 0&&i!==void 0&&o!==void 0,u=a?o(n,t):void 0,c=t.getReader();return new ReadableStream({async pull(f){const{value:l,done:m}=await c.read();if(m){if(f.enqueue(`0\r
`),a){const h=r(await u);f.enqueue(`${i}:${h}\r
`),f.enqueue(`\r
`)}f.close()}else f.enqueue(`${(s(l)||0).toString(16)}\r
${l}\r
`)}})};async function jl(t,e){let r=0;const s=[],n=t.getReader();let i=!1;for(;!i;){const{done:u,value:c}=await n.read();if(c&&(s.push(c),r+=c?.byteLength??0),r>=e)break;i=u}n.releaseLock();const o=new Uint8Array(Math.min(e,r));let a=0;for(const u of s){if(u.byteLength>o.byteLength-a){o.set(u.subarray(0,o.byteLength-a),a);break}else o.set(u,a);a+=u.length}return o}const at=t=>encodeURIComponent(t).replace(/[!'()*]/g,ql),ql=t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`;function Wl(t){const e=[];for(let r of Object.keys(t).sort()){const s=t[r];if(r=at(r),Array.isArray(s))for(let n=0,i=s.length;n<i;n++)e.push(`${r}=${at(s[n])}`);else{let n=r;(s||typeof s=="string")&&(n+=`=${at(s)}`),e.push(n)}}return e.join("&")}function bi(t,e){return new Request(t,e)}function Vl(t=0){return new Promise((e,r)=>{t&&setTimeout(()=>{const s=new Error(`Request did not complete within ${t} ms`);s.name="TimeoutError",r(s)},t)})}const qr={supported:void 0};class un{config;configProvider;static create(e){return typeof e?.handle=="function"?e:new un(e)}constructor(e){typeof e=="function"?this.configProvider=e().then(r=>r||{}):(this.config=e??{},this.configProvider=Promise.resolve(this.config)),qr.supported===void 0&&(qr.supported=typeof Request<"u"&&"keepalive"in bi("https://[::1]"))}destroy(){}async handle(e,{abortSignal:r,requestTimeout:s}={}){this.config||(this.config=await this.configProvider);const n=s??this.config.requestTimeout,i=this.config.keepAlive===!0,o=this.config.credentials;if(r?.aborted){const _=new Error("Request aborted");return _.name="AbortError",Promise.reject(_)}let a=e.path;const u=Wl(e.query||{});u&&(a+=`?${u}`),e.fragment&&(a+=`#${e.fragment}`);let c="";if(e.username!=null||e.password!=null){const _=e.username??"",I=e.password??"";c=`${_}:${I}@`}const{port:f,method:l}=e,m=`${e.protocol}//${c}${e.hostname}${f?`:${f}`:""}${a}`,h=l==="GET"||l==="HEAD"?void 0:e.body,S={body:h,headers:new Headers(e.headers),method:l,credentials:o};this.config?.cache&&(S.cache=this.config.cache),h&&(S.duplex="half"),typeof AbortController<"u"&&(S.signal=r),qr.supported&&(S.keepalive=i),typeof this.config.requestInit=="function"&&Object.assign(S,this.config.requestInit(e));let A=()=>{};const b=bi(m,S),v=[fetch(b).then(_=>{const I=_.headers,M={};for(const ue of I.entries())M[ue[0]]=ue[1];return _.body!=null?{response:new Qe({headers:M,reason:_.statusText,statusCode:_.status,body:_.body})}:_.blob().then(ue=>({response:new Qe({headers:M,reason:_.statusText,statusCode:_.status,body:ue})}))}),Vl(n)];return r&&v.push(new Promise((_,I)=>{const M=()=>{const W=new Error("Request aborted");W.name="AbortError",I(W)};if(typeof r.addEventListener=="function"){const W=r;W.addEventListener("abort",M,{once:!0}),A=()=>W.removeEventListener("abort",M)}else r.onabort=M})),Promise.race(v).finally(A)}updateHttpClientConfig(e,r){this.config=void 0,this.configProvider=this.configProvider.then(s=>(s[e]=r,s))}httpHandlerConfigs(){return this.config??{}}}const Wa=async t=>typeof Blob=="function"&&t instanceof Blob||t.constructor?.name==="Blob"?Blob.prototype.arrayBuffer!==void 0?new Uint8Array(await t.arrayBuffer()):Gl(t):Kl(t);async function Gl(t){const e=await Xl(t),r=Et(e);return new Uint8Array(r)}async function Kl(t){const e=[],r=t.getReader();let s=!1,n=0;for(;!s;){const{done:a,value:u}=await r.read();u&&(e.push(u),n+=u.length),s=a}const i=new Uint8Array(n);let o=0;for(const a of e)i.set(a,o),o+=a.length;return i}function Xl(t){return new Promise((e,r)=>{const s=new FileReader;s.onloadend=()=>{if(s.readyState!==2)return r(new Error("Reader aborted too early"));const n=s.result??"",i=n.indexOf(","),o=i>-1?i+1:n.length;e(n.substring(o))},s.onabort=()=>r(new Error("Read aborted")),s.onerror=()=>r(s.error),s.readAsDataURL(t)})}const Va={},$s={};for(let t=0;t<256;t++){let e=t.toString(16).toLowerCase();e.length===1&&(e=`0${e}`),Va[t]=e,$s[e]=t}function Ga(t){if(t.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const e=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2){const s=t.slice(r,r+2).toLowerCase();if(s in $s)e[r/2]=$s[s];else throw new Error(`Cannot decode unrecognized sequence ${s} as hexadecimal`)}return e}function _e(t){let e="";for(let r=0;r<t.byteLength;r++)e+=Va[t[r]];return e}const Ei="The stream has already been transformed.",Ka=t=>{if(!Ci(t)&&!Os(t)){const n=t?.__proto__?.constructor?.name||t;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${n}`)}let e=!1;const r=async()=>{if(e)throw new Error(Ei);return e=!0,await Wa(t)},s=n=>{if(typeof n.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return n.stream()};return Object.assign(t,{transformToByteArray:r,transformToString:async n=>{const i=await r();if(n==="base64")return ct(i);if(n==="hex")return _e(i);if(n===void 0||n==="utf8"||n==="utf-8")return vt(i);if(typeof TextDecoder=="function")return new TextDecoder(n).decode(i);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(e)throw new Error(Ei);if(e=!0,Ci(t))return s(t);if(Os(t))return t;throw new Error(`Cannot transform payload to web stream, got ${t}`)}})},Ci=t=>typeof Blob=="function"&&t instanceof Blob;async function Zl(t){return typeof t.stream=="function"&&(t=t.stream()),t.tee()}const sr=async(t=new Uint8Array,e)=>{if(t instanceof Uint8Array)return ot.mutate(t);if(!t)return ot.mutate(new Uint8Array);const r=e.streamCollector(t);return ot.mutate(await r)};function Ai(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}const Wr=t=>typeof t=="function"?t():t,Xa=(t,e,r,s,n)=>({name:e,namespace:t,traits:r,input:s,output:n}),Ql=t=>(e,r)=>async s=>{const{response:n}=await e(s),{operationSchema:i}=tt(r),[,o,a,u,c,f]=i??[];try{const l=await t.protocol.deserializeResponse(Xa(o,a,u,c,f),{...t,...r},n);return{response:n,output:l}}catch(l){if(Object.defineProperty(l,"$response",{value:n,enumerable:!1,writable:!1,configurable:!1}),!("$metadata"in l)){const m="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{l.message+=`
  `+m}catch{!r.logger||r.logger?.constructor?.name==="NoOpLogger"?console.warn(m):r.logger?.warn?.(m)}typeof l.$responseBodyText<"u"&&l.$response&&(l.$response.body=l.$responseBodyText);try{if(Qe.isInstance(n)){const{headers:h={}}=n,S=Object.entries(h);l.$metadata={httpStatusCode:n.statusCode,requestId:Vr(/^x-[\w-]+-request-?id$/,S),extendedRequestId:Vr(/^x-[\w-]+-id-2$/,S),cfId:Vr(/^x-[\w-]+-cf-id$/,S)}}}catch{}}throw l}},Vr=(t,e)=>(e.find(([r])=>r.match(t))||[void 0,void 0])[1],Jl=t=>(e,r)=>async s=>{const{operationSchema:n}=tt(r),[,i,o,a,u,c]=n??[],f=r.endpointV2?.url&&t.urlParser?async()=>t.urlParser(r.endpointV2.url):t.endpoint,l=await t.protocol.serializeRequest(Xa(i,o,a,u,c),s.input,{...t,...r,endpoint:f});return e({...s,request:l})},Yl={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},ed={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function td(t){return{applyToStack:e=>{e.add(Jl(t),ed),e.add(Ql(t),Yl),t.protocol.setSerdeContext(t)}}}function pt(t){if(typeof t=="object")return t;t=t|0;const e={};let r=0;for(const s of["httpLabel","idempotent","idempotencyToken","sensitive","httpPayload","httpResponseCode","httpQueryParams"])(t>>r++&1)===1&&(e[s]=1);return e}const _i={it:Symbol.for("@smithy/nor-struct-it")};class Q{ref;memberName;static symbol=Symbol.for("@smithy/nor");symbol=Q.symbol;name;schema;_isMemberSchema;traits;memberTraits;normalizedTraits;constructor(e,r){this.ref=e,this.memberName=r;const s=[];let n=e,i=e;for(this._isMemberSchema=!1;Gr(n);)s.push(n[1]),n=n[0],i=Wr(n),this._isMemberSchema=!0;if(s.length>0){this.memberTraits={};for(let o=s.length-1;o>=0;--o){const a=s[o];Object.assign(this.memberTraits,pt(a))}}else this.memberTraits=0;if(i instanceof Q){const o=this.memberTraits;Object.assign(this,i),this.memberTraits=Object.assign({},o,i.getMemberTraits(),this.getMemberTraits()),this.normalizedTraits=void 0,this.memberName=r??i.memberName;return}if(this.schema=Wr(i),rd(this.schema)?(this.name=`${this.schema[1]}#${this.schema[2]}`,this.traits=this.schema[3]):(this.name=this.memberName??String(i),this.traits=0),this._isMemberSchema&&!r)throw new Error(`@smithy/core/schema - NormalizedSchema member init ${this.getName(!0)} missing member name.`)}static[Symbol.hasInstance](e){const r=this.prototype.isPrototypeOf(e);return!r&&typeof e=="object"&&e!==null?e.symbol===this.symbol:r}static of(e){const r=Wr(e);if(r instanceof Q)return r;if(Gr(r)){const[s,n]=r;if(s instanceof Q)return Object.assign(s.getMergedTraits(),pt(n)),s;throw new Error(`@smithy/core/schema - may not init unwrapped member schema=${JSON.stringify(e,null,2)}.`)}return new Q(r)}getSchema(){const e=this.schema;return Array.isArray(e)&&e[0]===0?e[4]:e}getName(e=!1){const{name:r}=this;return!e&&r&&r.includes("#")?r.split("#")[1]:r||void 0}getMemberName(){return this.memberName}isMemberSchema(){return this._isMemberSchema}isListSchema(){const e=this.getSchema();return typeof e=="number"?e>=64&&e<128:e[0]===1}isMapSchema(){const e=this.getSchema();return typeof e=="number"?e>=128&&e<=255:e[0]===2}isStructSchema(){const e=this.getSchema();if(typeof e!="object")return!1;const r=e[0];return r===3||r===-3||r===4}isUnionSchema(){const e=this.getSchema();return typeof e!="object"?!1:e[0]===4}isBlobSchema(){const e=this.getSchema();return e===21||e===42}isTimestampSchema(){const e=this.getSchema();return typeof e=="number"&&e>=4&&e<=7}isUnitSchema(){return this.getSchema()==="unit"}isDocumentSchema(){return this.getSchema()===15}isStringSchema(){return this.getSchema()===0}isBooleanSchema(){return this.getSchema()===2}isNumericSchema(){return this.getSchema()===1}isBigIntegerSchema(){return this.getSchema()===17}isBigDecimalSchema(){return this.getSchema()===19}isStreaming(){const{streaming:e}=this.getMergedTraits();return!!e||this.getSchema()===42}isIdempotencyToken(){return!!this.getMergedTraits().idempotencyToken}getMergedTraits(){return this.normalizedTraits??(this.normalizedTraits={...this.getOwnTraits(),...this.getMemberTraits()})}getMemberTraits(){return pt(this.memberTraits)}getOwnTraits(){return pt(this.traits)}getKeySchema(){const[e,r]=[this.isDocumentSchema(),this.isMapSchema()];if(!e&&!r)throw new Error(`@smithy/core/schema - cannot get key for non-map: ${this.getName(!0)}`);const s=this.getSchema(),n=e?15:s[4]??0;return Dt([n,0],"key")}getValueSchema(){const e=this.getSchema(),[r,s,n]=[this.isDocumentSchema(),this.isMapSchema(),this.isListSchema()],i=typeof e=="number"?63&e:e&&typeof e=="object"&&(s||n)?e[3+e[0]]:r?15:void 0;if(i!=null)return Dt([i,0],s?"value":"member");throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no value member.`)}getMemberSchema(e){const r=this.getSchema();if(this.isStructSchema()&&r[4].includes(e)){const s=r[4].indexOf(e),n=r[5][s];return Dt(Gr(n)?n:[n,0],e)}if(this.isDocumentSchema())return Dt([15,0],e);throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no no member=${e}.`)}getMemberSchemas(){const e={};try{for(const[r,s]of this.structIterator())e[r]=s}catch{}return e}getEventStreamMember(){if(this.isStructSchema()){for(const[e,r]of this.structIterator())if(r.isStreaming()&&r.isStructSchema())return e}return""}*structIterator(){if(this.isUnitSchema())return;if(!this.isStructSchema())throw new Error("@smithy/core/schema - cannot iterate non-struct schema.");const e=this.getSchema(),r=e[4].length;let s=e[_i.it];if(s&&r===s.length){yield*s;return}s=Array(r);for(let n=0;n<r;++n){const i=e[4][n],o=Dt([e[5][n],0],i);yield s[n]=[i,o]}e[_i.it]=s}}function Dt(t,e){if(t instanceof Q)return Object.assign(t,{memberName:e,_isMemberSchema:!0});const r=Q;return new r(t,e)}const Gr=t=>Array.isArray(t)&&t.length===2,rd=t=>Array.isArray(t)&&t.length>=5;class V{namespace;schemas;exceptions;static registries=new Map;constructor(e,r=new Map,s=new Map){this.namespace=e,this.schemas=r,this.exceptions=s}static for(e){return V.registries.has(e)||V.registries.set(e,new V(e)),V.registries.get(e)}register(e,r){const s=this.normalizeShapeId(e);V.for(s.split("#")[0]).schemas.set(s,r)}getSchema(e){const r=this.normalizeShapeId(e);if(!this.schemas.has(r))throw new Error(`@smithy/core/schema - schema not found for ${r}`);return this.schemas.get(r)}registerError(e,r){const s=e,n=V.for(s[1]);n.schemas.set(s[1]+"#"+s[2],s),n.exceptions.set(s,r)}getErrorCtor(e){const r=e;return V.for(r[1]).exceptions.get(r)}getBaseException(){for(const e of this.exceptions.keys())if(Array.isArray(e)){const[,r,s]=e,n=r+"#"+s;if(n.startsWith("smithy.ts.sdk.synthetic.")&&n.endsWith("ServiceException"))return e}}find(e){return[...this.schemas.values()].find(e)}clear(){this.schemas.clear(),this.exceptions.clear()}normalizeShapeId(e){return e.includes("#")?e:this.namespace+"#"+e}}const sd=t=>{if(t!=null){if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return String(e)!==String(t)&&dd.warn(ld(`Expected number but observed string: ${t}`)),e}if(typeof t=="number")return t;throw new TypeError(`Expected number, got ${typeof t}: ${t}`)}},nd=Math.ceil(2**127*(2-2**-23)),vi=t=>{const e=sd(t);if(e!==void 0&&!Number.isNaN(e)&&e!==1/0&&e!==-1/0&&Math.abs(e)>nd)throw new TypeError(`Expected 32-bit float, got ${t}`);return e},id=t=>{if(t!=null){if(Number.isInteger(t)&&!Number.isNaN(t))return t;throw new TypeError(`Expected integer, got ${typeof t}: ${t}`)}},Ri=t=>Za(t,16),ki=t=>Za(t,8),Za=(t,e)=>{const r=id(t);if(r!==void 0&&od(r,e)!==r)throw new TypeError(`Expected ${e}-bit integer, got ${t}`);return r},od=(t,e)=>{switch(e){case 32:return Int32Array.of(t)[0];case 16:return Int16Array.of(t)[0];case 8:return Int8Array.of(t)[0]}},ad=t=>vi(typeof t=="string"?ln(t):t),cd=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,ln=t=>{const e=t.match(cd);if(e===null||e[0].length!==t.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(t)},Us=t=>Ri(typeof t=="string"?ln(t):t),ud=t=>ki(typeof t=="string"?ln(t):t),ld=t=>String(new TypeError(t).stack||t).split(`
`).slice(0,5).filter(e=>!e.includes("stackTraceWarning")).join(`
`),dd={warn:console.warn},fd=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dn=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Fs(t){const e=t.getUTCFullYear(),r=t.getUTCMonth(),s=t.getUTCDay(),n=t.getUTCDate(),i=t.getUTCHours(),o=t.getUTCMinutes(),a=t.getUTCSeconds(),u=n<10?`0${n}`:`${n}`,c=i<10?`0${i}`:`${i}`,f=o<10?`0${o}`:`${o}`,l=a<10?`0${a}`:`${a}`;return`${fd[s]}, ${u} ${dn[r]} ${e} ${c}:${f}:${l} GMT`}const hd=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),pd=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),md=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),gd=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let e=hd.exec(t);if(e){const[r,s,n,i,o,a,u,c]=e;return Kr(Us(mr(i)),Xr(n),wt(s,"day",1,31),{hours:o,minutes:a,seconds:u,fractionalMilliseconds:c})}if(e=pd.exec(t),e){const[r,s,n,i,o,a,u,c]=e;return wd(Kr(yd(i),Xr(n),wt(s,"day",1,31),{hours:o,minutes:a,seconds:u,fractionalMilliseconds:c}))}if(e=md.exec(t),e){const[r,s,n,i,o,a,u,c]=e;return Kr(Us(mr(c)),Xr(s),wt(n.trimLeft(),"day",1,31),{hours:i,minutes:o,seconds:a,fractionalMilliseconds:u})}throw new TypeError("Invalid RFC-7231 date-time value")},Kr=(t,e,r,s)=>{const n=e-1;return bd(t,n,r),new Date(Date.UTC(t,n,r,wt(s.hours,"hour",0,23),wt(s.minutes,"minute",0,59),wt(s.seconds,"seconds",0,60),Cd(s.fractionalMilliseconds)))},yd=t=>{const e=new Date().getUTCFullYear(),r=Math.floor(e/100)*100+Us(mr(t));return r<e?r+100:r},Sd=50*365*24*60*60*1e3,wd=t=>t.getTime()-new Date().getTime()>Sd?new Date(Date.UTC(t.getUTCFullYear()-100,t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds())):t,Xr=t=>{const e=dn.indexOf(t);if(e<0)throw new TypeError(`Invalid month: ${t}`);return e+1},xd=[31,28,31,30,31,30,31,31,30,31,30,31],bd=(t,e,r)=>{let s=xd[e];if(e===1&&Ed(t)&&(s=29),r>s)throw new TypeError(`Invalid day for ${dn[e]} in ${t}: ${r}`)},Ed=t=>t%4===0&&(t%100!==0||t%400===0),wt=(t,e,r,s)=>{const n=ud(mr(t));if(n<r||n>s)throw new TypeError(`${e} must be between ${r} and ${s}, inclusive`);return n},Cd=t=>t==null?0:ad("0."+t)*1e3,mr=t=>{let e=0;for(;e<t.length-1&&t.charAt(e)==="0";)e++;return e===0?t:t.slice(e)},Ti=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ge=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0")),fn=()=>{if(Ti)return Ti();const t=new Uint8Array(16);return crypto.getRandomValues(t),t[6]=t[6]&15|64,t[8]=t[8]&63|128,ge[t[0]]+ge[t[1]]+ge[t[2]]+ge[t[3]]+"-"+ge[t[4]]+ge[t[5]]+"-"+ge[t[6]]+ge[t[7]]+"-"+ge[t[8]]+ge[t[9]]+"-"+ge[t[10]]+ge[t[11]]+ge[t[12]]+ge[t[13]]+ge[t[14]]+ge[t[15]]},Xe=function(e){return Object.assign(new String(e),{deserializeJSON(){return JSON.parse(String(e))},toString(){return String(e)},toJSON(){return String(e)}})};Xe.from=t=>t&&typeof t=="object"&&(t instanceof Xe||"deserializeJSON"in t)?t:typeof t=="string"||Object.getPrototypeOf(t)===String.prototype?Xe(String(t)):Xe(JSON.stringify(t));Xe.fromObject=Xe.from;function Ad(t){return(t.includes(",")||t.includes('"'))&&(t=`"${t.replace(/"/g,'\\"')}"`),t}const hn="(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun)(?:[ne|u?r]?s?day)?",pn="(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)",mn="(\\d?\\d):(\\d{2}):(\\d{2})(?:\\.(\\d+))?",Qa="(\\d?\\d)",Ja="(\\d{4})",_d=new RegExp(/^(\d{4})-(\d\d)-(\d\d)[tT](\d\d):(\d\d):(\d\d)(\.(\d+))?(([-+]\d\d:\d\d)|[zZ])$/),vd=new RegExp(`^${hn}, ${Qa} ${pn} ${Ja} ${mn} GMT$`),Rd=new RegExp(`^${hn}, ${Qa}-${pn}-(\\d\\d) ${mn} GMT$`),kd=new RegExp(`^${hn} ${pn} ( [1-9]|\\d\\d) ${mn} ${Ja}$`),Td=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Dd=t=>{if(t==null)return;let e=NaN;if(typeof t=="number")e=t;else if(typeof t=="string"){if(!/^-?\d*\.?\d+$/.test(t))throw new TypeError("parseEpochTimestamp - numeric string invalid.");e=Number.parseFloat(t)}else typeof t=="object"&&t.tag===1&&(e=t.value);if(isNaN(e)||Math.abs(e)===1/0)throw new TypeError("Epoch timestamps must be valid finite numbers.");return new Date(Math.round(e*1e3))},Bd=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC3339 timestamps must be strings");const e=_d.exec(t);if(!e)throw new TypeError(`Invalid RFC3339 timestamp format ${t}`);const[,r,s,n,i,o,a,,u,c]=e;He(s,1,12),He(n,1,31),He(i,0,23),He(o,0,59),He(a,0,60);const f=new Date(Date.UTC(Number(r),Number(s)-1,Number(n),Number(i),Number(o),Number(a),Number(u)?Math.round(parseFloat(`0.${u}`)*1e3):0));if(f.setUTCFullYear(Number(r)),c.toUpperCase()!="Z"){const[,l,m,h]=/([+-])(\d\d):(\d\d)/.exec(c)||[void 0,"+",0,0],S=l==="-"?1:-1;f.setTime(f.getTime()+S*(Number(m)*60*60*1e3+Number(h)*60*1e3))}return f},Id=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC7231 timestamps must be strings.");let e,r,s,n,i,o,a,u;if((u=vd.exec(t))?[,e,r,s,n,i,o,a]=u:(u=Rd.exec(t))?([,e,r,s,n,i,o,a]=u,s=(Number(s)+1900).toString()):(u=kd.exec(t))&&([,r,e,n,i,o,a,s]=u),s&&o){const c=Date.UTC(Number(s),Td.indexOf(r),Number(e),Number(n),Number(i),Number(o),a?Math.round(parseFloat(`0.${a}`)*1e3):0);He(e,1,31),He(n,0,23),He(i,0,59),He(o,0,60);const f=new Date(c);return f.setUTCFullYear(Number(s)),f}throw new TypeError(`Invalid RFC7231 date-time value ${t}.`)};function He(t,e,r){const s=Number(t);if(s<e||s>r)throw new Error(`Value ${s} out of range [${e}, ${r}]`)}function Pd(t,e,r){if(!Number.isInteger(r))throw new Error("Invalid number of delimiters ("+r+") for splitEvery.");const s=t.split(e),n=[];let i="";for(let o=0;o<s.length;o++)i===""?i=s[o]:i+=e+s[o],(o+1)%r===0&&(n.push(i),i="");return i!==""&&n.push(i),n}const Ya=t=>{const e=t.length,r=[];let s=!1,n,i=0;for(let o=0;o<e;++o){const a=t[o];switch(a){case'"':n!=="\\"&&(s=!s);break;case",":s||(r.push(t.slice(i,o)),i=o+1);break}n=a}return r.push(t.slice(i)),r.map(o=>{o=o.trim();const a=o.length;return a<2?o:(o[0]==='"'&&o[a-1]==='"'&&(o=o.slice(1,a-1)),o.replace(/\\"/g,'"'))})},Di=/^-?\d*(\.\d+)?$/;class Dr{string;type;constructor(e,r){if(this.string=e,this.type=r,!Di.test(e))throw new Error('@smithy/core/serde - NumericValue must only contain [0-9], at most one decimal point ".", and an optional negation prefix "-".')}toString(){return this.string}static[Symbol.hasInstance](e){if(!e||typeof e!="object")return!1;const r=e;return Dr.prototype.isPrototypeOf(e)||r.type==="bigDecimal"&&Di.test(r.string)}}const Md="modulepreload",Nd=function(t,e){return new URL(t,e).href},Bi={},Od=function(e,r,s){let n=Promise.resolve();if(r&&r.length>0){let c=function(f){return Promise.all(f.map(l=>Promise.resolve(l).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),u=a?.nonce||a?.getAttribute("nonce");n=c(r.map(f=>{if(f=Nd(f,s),f in Bi)return;Bi[f]=!0;const l=f.endsWith(".css"),m=l?'[rel="stylesheet"]':"";if(s)for(let S=o.length-1;S>=0;S--){const A=o[S];if(A.href===f&&(!l||A.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${f}"]${m}`))return;const h=document.createElement("link");if(h.rel=l?"stylesheet":Md,l||(h.as="script"),h.crossOrigin="",h.href=f,u&&h.setAttribute("nonce",u),document.head.appendChild(h),l)return new Promise((S,A)=>{h.addEventListener("load",S),h.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${f}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return n.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};class Br{serdeContext;setSerdeContext(e){this.serdeContext=e}}class $d extends Br{options;constructor(e){super(),this.options=e}getRequestType(){return ae}getResponseType(){return Qe}setSerdeContext(e){this.serdeContext=e,this.serializer.setSerdeContext(e),this.deserializer.setSerdeContext(e),this.getPayloadCodec()&&this.getPayloadCodec().setSerdeContext(e)}updateServiceEndpoint(e,r){if("url"in r){e.protocol=r.url.protocol,e.hostname=r.url.hostname,e.port=r.url.port?Number(r.url.port):void 0,e.path=r.url.pathname,e.fragment=r.url.hash||void 0,e.username=r.url.username||void 0,e.password=r.url.password||void 0,e.query||(e.query={});for(const[s,n]of r.url.searchParams.entries())e.query[s]=n;return e}else return e.protocol=r.protocol,e.hostname=r.hostname,e.port=r.port?Number(r.port):void 0,e.path=r.path,e.query={...r.query},e}setHostPrefix(e,r,s){if(this.serdeContext?.disableHostPrefix)return;const n=Q.of(r.input),i=pt(r.traits??{});if(i.endpoint){let o=i.endpoint?.[0];if(typeof o=="string"){const a=[...n.structIterator()].filter(([,u])=>u.getMergedTraits().hostLabel);for(const[u]of a){const c=s[u];if(typeof c!="string")throw new Error(`@smithy/core/schema - ${u} in input must be a string as hostLabel.`);o=o.replace(`{${u}}`,c)}e.hostname=o+e.hostname}}}deserializeMetadata(e){return{httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}}async serializeEventStream({eventStream:e,requestSchema:r,initialRequest:s}){return(await this.loadEventStreamCapability()).serializeEventStream({eventStream:e,requestSchema:r,initialRequest:s})}async deserializeEventStream({response:e,responseSchema:r,initialResponseContainer:s}){return(await this.loadEventStreamCapability()).deserializeEventStream({response:e,responseSchema:r,initialResponseContainer:s})}async loadEventStreamCapability(){const{EventStreamSerde:e}=await Od(async()=>{const{EventStreamSerde:r}=await import("./index-kursmQay.js");return{EventStreamSerde:r}},[],import.meta.url);return new e({marshaller:this.getEventStreamMarshaller(),serializer:this.serializer,deserializer:this.deserializer,serdeContext:this.serdeContext,defaultContentType:this.getDefaultContentType()})}getDefaultContentType(){throw new Error(`@smithy/core/protocols - ${this.constructor.name} getDefaultContentType() implementation missing.`)}async deserializeHttpMessage(e,r,s,n,i){return[]}getEventStreamMarshaller(){const e=this.serdeContext;if(!e.eventStreamMarshaller)throw new Error("@smithy/core - HttpProtocol: eventStreamMarshaller missing in serdeContext.");return e.eventStreamMarshaller}}class Ud extends $d{async serializeRequest(e,r,s){const n={...r??{}},i=this.serializer,o={},a={},u=await s.endpoint(),c=Q.of(e?.input),f=c.getSchema();let l=!1,m;const h=new ae({protocol:"",hostname:"",port:void 0,path:"",fragment:void 0,query:o,headers:a,body:void 0});if(u){this.updateServiceEndpoint(h,u),this.setHostPrefix(h,e,n);const S=pt(e.traits);if(S.http){h.method=S.http[0];const[A,b]=S.http[1].split("?");h.path=="/"?h.path=A:h.path+=A;const v=new URLSearchParams(b??"");Object.assign(o,Object.fromEntries(v))}}for(const[S,A]of c.structIterator()){const b=A.getMergedTraits()??{},v=n[S];if(v==null&&!A.isIdempotencyToken()){if(b.httpLabel&&(h.path.includes(`{${S}+}`)||h.path.includes(`{${S}}`)))throw new Error(`No value provided for input HTTP label: ${S}.`);continue}if(b.httpPayload)A.isStreaming()?A.isStructSchema()?n[S]&&(m=await this.serializeEventStream({eventStream:n[S],requestSchema:c})):m=v:(i.write(A,v),m=i.flush()),delete n[S];else if(b.httpLabel){i.write(A,v);const _=i.flush();h.path.includes(`{${S}+}`)?h.path=h.path.replace(`{${S}+}`,_.split("/").map(Ai).join("/")):h.path.includes(`{${S}}`)&&(h.path=h.path.replace(`{${S}}`,Ai(_))),delete n[S]}else if(b.httpHeader)i.write(A,v),a[b.httpHeader.toLowerCase()]=String(i.flush()),delete n[S];else if(typeof b.httpPrefixHeaders=="string"){for(const[_,I]of Object.entries(v)){const M=b.httpPrefixHeaders+_;i.write([A.getValueSchema(),{httpHeader:M}],I),a[M.toLowerCase()]=i.flush()}delete n[S]}else b.httpQuery||b.httpQueryParams?(this.serializeQuery(A,v,o),delete n[S]):l=!0}return l&&n&&(i.write(f,n),m=i.flush()),h.headers=a,h.query=o,h.body=m,h}serializeQuery(e,r,s){const n=this.serializer,i=e.getMergedTraits();if(i.httpQueryParams){for(const[o,a]of Object.entries(r))if(!(o in s)){const u=e.getValueSchema();Object.assign(u.getMergedTraits(),{...i,httpQuery:o,httpQueryParams:void 0}),this.serializeQuery(u,a,s)}return}if(e.isListSchema()){const o=!!e.getMergedTraits().sparse,a=[];for(const u of r){n.write([e.getValueSchema(),i],u);const c=n.flush();(o||c!==void 0)&&a.push(c)}s[i.httpQuery]=a}else n.write([e,i],r),s[i.httpQuery]=n.flush()}async deserializeResponse(e,r,s){const n=this.deserializer,i=Q.of(e.output),o={};if(s.statusCode>=300){const u=await sr(s.body,r);throw u.byteLength>0&&Object.assign(o,await n.read(15,u)),await this.handleError(e,r,s,o,this.deserializeMetadata(s)),new Error("@smithy/core/protocols - HTTP Protocol error handler failed to throw.")}for(const u in s.headers){const c=s.headers[u];delete s.headers[u],s.headers[u.toLowerCase()]=c}const a=await this.deserializeHttpMessage(i,r,s,o);if(a.length){const u=await sr(s.body,r);if(u.byteLength>0){const c=await n.read(i,u);for(const f of a)o[f]=c[f]}}else a.discardResponseBody&&await sr(s.body,r);return o.$metadata=this.deserializeMetadata(s),o}async deserializeHttpMessage(e,r,s,n,i){let o;n instanceof Set?o=i:o=n;let a=!0;const u=this.deserializer,c=Q.of(e),f=[];for(const[l,m]of c.structIterator()){const h=m.getMemberTraits();if(h.httpPayload){if(a=!1,m.isStreaming())m.isStructSchema()?o[l]=await this.deserializeEventStream({response:s,responseSchema:c}):o[l]=Ka(s.body);else if(s.body){const A=await sr(s.body,r);A.byteLength>0&&(o[l]=await u.read(m,A))}}else if(h.httpHeader){const S=String(h.httpHeader).toLowerCase(),A=s.headers[S];if(A!=null)if(m.isListSchema()){const b=m.getValueSchema();b.getMergedTraits().httpHeader=S;let v;b.isTimestampSchema()&&b.getSchema()===4?v=Pd(A,",",2):v=Ya(A);const _=[];for(const I of v)_.push(await u.read(b,I.trim()));o[l]=_}else o[l]=await u.read(m,A)}else if(h.httpPrefixHeaders!==void 0){o[l]={};for(const[S,A]of Object.entries(s.headers))if(S.startsWith(h.httpPrefixHeaders)){const b=m.getValueSchema();b.getMergedTraits().httpHeader=S,o[l][S.slice(h.httpPrefixHeaders.length)]=await u.read(b,A)}}else h.httpResponseCode?o[l]=s.statusCode:f.push(l)}return f.discardResponseBody=a,f}}function gn(t,e){if(e.timestampFormat.useTrait&&t.isTimestampSchema()&&(t.getSchema()===5||t.getSchema()===6||t.getSchema()===7))return t.getSchema();const{httpLabel:r,httpPrefixHeaders:s,httpHeader:n,httpQuery:i}=t.getMergedTraits();return(e.httpBindings?typeof s=="string"||n?6:i||r?5:void 0:void 0)??e.timestampFormat.default}class ec extends Br{settings;constructor(e){super(),this.settings=e}read(e,r){const s=Q.of(e);if(s.isListSchema())return Ya(r).map(n=>this.read(s.getValueSchema(),n));if(s.isBlobSchema())return(this.serdeContext?.base64Decoder??Et)(r);if(s.isTimestampSchema())switch(gn(s,this.settings)){case 5:return Bd(r);case 6:return Id(r);case 7:return Dd(r);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",r),new Date(r)}if(s.isStringSchema()){const n=s.getMergedTraits().mediaType;let i=r;if(n)return s.getMergedTraits().httpHeader&&(i=this.base64ToUtf8(i)),(n==="application/json"||n.endsWith("+json"))&&(i=Xe.from(i)),i}return s.isNumericSchema()?Number(r):s.isBigIntegerSchema()?BigInt(r):s.isBigDecimalSchema()?new Dr(r,"bigDecimal"):s.isBooleanSchema()?String(r).toLowerCase()==="true":r}base64ToUtf8(e){return(this.serdeContext?.utf8Encoder??vt)((this.serdeContext?.base64Decoder??Et)(e))}}class Fd extends Br{codecDeserializer;stringDeserializer;constructor(e,r){super(),this.codecDeserializer=e,this.stringDeserializer=new ec(r)}setSerdeContext(e){this.stringDeserializer.setSerdeContext(e),this.codecDeserializer.setSerdeContext(e),this.serdeContext=e}read(e,r){const s=Q.of(e),n=s.getMergedTraits(),i=this.serdeContext?.utf8Encoder??vt;if(n.httpHeader||n.httpResponseCode)return this.stringDeserializer.read(s,i(r));if(n.httpPayload){if(s.isBlobSchema()){const o=this.serdeContext?.utf8Decoder??Je;return typeof r=="string"?o(r):r}else if(s.isStringSchema())return"byteLength"in r?i(r):r}return this.codecDeserializer.read(s,r)}}class Ld extends Br{settings;stringBuffer="";constructor(e){super(),this.settings=e}write(e,r){const s=Q.of(e);switch(typeof r){case"object":if(r===null){this.stringBuffer="null";return}if(s.isTimestampSchema()){if(!(r instanceof Date))throw new Error(`@smithy/core/protocols - received non-Date value ${r} when schema expected Date in ${s.getName(!0)}`);switch(gn(s,this.settings)){case 5:this.stringBuffer=r.toISOString().replace(".000Z","Z");break;case 6:this.stringBuffer=Fs(r);break;case 7:this.stringBuffer=String(r.getTime()/1e3);break;default:console.warn("Missing timestamp format, using epoch seconds",r),this.stringBuffer=String(r.getTime()/1e3)}return}if(s.isBlobSchema()&&"byteLength"in r){this.stringBuffer=(this.serdeContext?.base64Encoder??ct)(r);return}if(s.isListSchema()&&Array.isArray(r)){let o="";for(const a of r){this.write([s.getValueSchema(),s.getMergedTraits()],a);const u=this.flush(),c=s.getValueSchema().isTimestampSchema()?u:Ad(u);o!==""&&(o+=", "),o+=c}this.stringBuffer=o;return}this.stringBuffer=JSON.stringify(r,null,2);break;case"string":const n=s.getMergedTraits().mediaType;let i=r;if(n&&((n==="application/json"||n.endsWith("+json"))&&(i=Xe.from(i)),s.getMergedTraits().httpHeader)){this.stringBuffer=(this.serdeContext?.base64Encoder??ct)(i.toString());return}this.stringBuffer=r;break;default:s.isIdempotencyToken()?this.stringBuffer=fn():this.stringBuffer=String(r)}}flush(){const e=this.stringBuffer;return this.stringBuffer="",e}}class Hd{codecSerializer;stringSerializer;buffer;constructor(e,r,s=new Ld(r)){this.codecSerializer=e,this.stringSerializer=s}setSerdeContext(e){this.codecSerializer.setSerdeContext(e),this.stringSerializer.setSerdeContext(e)}write(e,r){const s=Q.of(e),n=s.getMergedTraits();if(n.httpHeader||n.httpLabel||n.httpQuery){this.stringSerializer.write(s,r),this.buffer=this.stringSerializer.flush();return}return this.codecSerializer.write(s,r)}flush(){if(this.buffer!==void 0){const e=this.buffer;return this.buffer=void 0,e}return this.codecSerializer.flush()}}function zd(t,e,r){t.__smithy_context?t.__smithy_context.features||(t.__smithy_context.features={}):t.__smithy_context={features:{}},t.__smithy_context.features[e]=r}class jd{authSchemes=new Map;constructor(e){for(const[r,s]of Object.entries(e))s!==void 0&&this.authSchemes.set(r,s)}getIdentityProvider(e){return this.authSchemes.get(e)}}const qd=t=>function(r){return tc(r)&&r.expiration.getTime()-Date.now()<t},Wd=3e5,Vd=qd(Wd),tc=t=>t.expiration!==void 0,Gd=(t,e,r)=>{if(t===void 0)return;const s=typeof t!="function"?async()=>Promise.resolve(t):t;let n,i,o,a=!1;const u=async c=>{i||(i=s(c));try{n=await i,o=!0,a=!1}finally{i=void 0}return n};return e===void 0?async c=>((!o||c?.forceRefresh)&&(n=await u(c)),n):async c=>((!o||c?.forceRefresh)&&(n=await u(c)),a?n:r(n)?(e(n)&&await u(c),n):(a=!0,n))},Kd=(t,e,r)=>{let s,n,i,o=!1;const a=async()=>{n||(n=t());try{s=await n,i=!0,o=!1}finally{n=void 0}return s};return async u=>((!i||u?.forceRefresh)&&(s=await a()),s)},Xd=t=>(t.sigv4aSigningRegionSet=yt(t.sigv4aSigningRegionSet),t),Zd="X-Amz-Algorithm",Qd="X-Amz-Credential",rc="X-Amz-Date",Jd="X-Amz-SignedHeaders",Yd="X-Amz-Expires",sc="X-Amz-Signature",nc="X-Amz-Security-Token",ic="authorization",oc=rc.toLowerCase(),ef="date",tf=[ic,oc,ef],rf=sc.toLowerCase(),Ls="x-amz-content-sha256",sf=nc.toLowerCase(),nf={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},of=/^proxy-/,af=/^sec-/,Zr="AWS4-HMAC-SHA256",cf="AWS4-HMAC-SHA256-PAYLOAD",uf="UNSIGNED-PAYLOAD",lf=50,ac="aws4_request",df=3600*24*7,nr={},Qr=[],Jr=(t,e,r)=>`${t}/${e}/${r}/${ac}`,ff=async(t,e,r,s,n)=>{const i=await Ii(t,e.secretAccessKey,e.accessKeyId),o=`${r}:${s}:${n}:${_e(i)}:${e.sessionToken}`;if(o in nr)return nr[o];for(Qr.push(o);Qr.length>lf;)delete nr[Qr.shift()];let a=`AWS4${e.secretAccessKey}`;for(const u of[r,s,n,ac])a=await Ii(t,a,u);return nr[o]=a},Ii=(t,e,r)=>{const s=new t(e);return s.update(Ct(r)),s.digest()},Pi=({headers:t},e,r)=>{const s={};for(const n of Object.keys(t).sort()){if(t[n]==null)continue;const i=n.toLowerCase();(i in nf||e?.has(i)||of.test(i)||af.test(i))&&(!r||r&&!r.has(i))||(s[i]=t[n].trim().replace(/\s+/g," "))}return s},cc=t=>typeof ArrayBuffer=="function"&&t instanceof ArrayBuffer||Object.prototype.toString.call(t)==="[object ArrayBuffer]",Yr=async({headers:t,body:e},r)=>{for(const s of Object.keys(t))if(s.toLowerCase()===Ls)return t[s];if(e==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof e=="string"||ArrayBuffer.isView(e)||cc(e)){const s=new r;return s.update(Ct(e)),_e(await s.digest())}return uf};class hf{format(e){const r=[];for(const i of Object.keys(e)){const o=Je(i);r.push(Uint8Array.from([o.byteLength]),o,this.formatHeaderValue(e[i]))}const s=new Uint8Array(r.reduce((i,o)=>i+o.byteLength,0));let n=0;for(const i of r)s.set(i,n),n+=i.byteLength;return s}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":const r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,e.value,!1),new Uint8Array(r.buffer);case"integer":const s=new DataView(new ArrayBuffer(5));return s.setUint8(0,4),s.setInt32(1,e.value,!1),new Uint8Array(s.buffer);case"long":const n=new Uint8Array(9);return n[0]=5,n.set(e.value.bytes,1),n;case"binary":const i=new DataView(new ArrayBuffer(3+e.value.byteLength));i.setUint8(0,6),i.setUint16(1,e.value.byteLength,!1);const o=new Uint8Array(i.buffer);return o.set(e.value,3),o;case"string":const a=Je(e.value),u=new DataView(new ArrayBuffer(3+a.byteLength));u.setUint8(0,7),u.setUint16(1,a.byteLength,!1);const c=new Uint8Array(u.buffer);return c.set(a,3),c;case"timestamp":const f=new Uint8Array(9);return f[0]=8,f.set(mf.fromNumber(e.value.valueOf()).bytes,1),f;case"uuid":if(!pf.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);const l=new Uint8Array(17);return l[0]=9,l.set(Ga(e.value.replace(/\-/g,"")),1),l}}}var Mi;(function(t){t[t.boolTrue=0]="boolTrue",t[t.boolFalse=1]="boolFalse",t[t.byte=2]="byte",t[t.short=3]="short",t[t.integer=4]="integer",t[t.long=5]="long",t[t.byteArray=6]="byteArray",t[t.string=7]="string",t[t.timestamp=8]="timestamp",t[t.uuid=9]="uuid"})(Mi||(Mi={}));const pf=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;let mf=class uc{bytes;constructor(e){if(this.bytes=e,e.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>9223372036854776e3||e<-9223372036854776e3)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);const r=new Uint8Array(8);for(let s=7,n=Math.abs(Math.round(e));s>-1&&n>0;s--,n/=256)r[s]=n;return e<0&&Ni(r),new uc(r)}valueOf(){const e=this.bytes.slice(0),r=e[0]&128;return r&&Ni(e),parseInt(_e(e),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function Ni(t){for(let e=0;e<8;e++)t[e]^=255;for(let e=7;e>-1&&(t[e]++,t[e]===0);e--);}const gf=(t,e)=>{t=t.toLowerCase();for(const r of Object.keys(e))if(t===r.toLowerCase())return!0;return!1},yf=(t,e={})=>{const{headers:r,query:s={}}=ae.clone(t);for(const n of Object.keys(r)){const i=n.toLowerCase();(i.slice(0,6)==="x-amz-"&&!e.unhoistableHeaders?.has(i)||e.hoistableHeaders?.has(i))&&(s[n]=r[n],delete r[n])}return{...t,headers:r,query:s}},Oi=t=>{t=ae.clone(t);for(const e of Object.keys(t.headers))tf.indexOf(e.toLowerCase())>-1&&delete t.headers[e];return t},Sf=({query:t={}})=>{const e=[],r={};for(const s of Object.keys(t)){if(s.toLowerCase()===rf)continue;const n=at(s);e.push(n);const i=t[s];typeof i=="string"?r[n]=`${n}=${at(i)}`:Array.isArray(i)&&(r[n]=i.slice(0).reduce((o,a)=>o.concat([`${n}=${at(a)}`]),[]).sort().join("&"))}return e.sort().map(s=>r[s]).filter(s=>s).join("&")},wf=t=>xf(t).toISOString().replace(/\.\d{3}Z$/,"Z"),xf=t=>typeof t=="number"?new Date(t*1e3):typeof t=="string"?Number(t)?new Date(Number(t)*1e3):new Date(t):t;class bf{service;regionProvider;credentialProvider;sha256;uriEscapePath;applyChecksum;constructor({applyChecksum:e,credentials:r,region:s,service:n,sha256:i,uriEscapePath:o=!0}){this.service=n,this.sha256=i,this.uriEscapePath=o,this.applyChecksum=typeof e=="boolean"?e:!0,this.regionProvider=Me(s),this.credentialProvider=Me(r)}createCanonicalRequest(e,r,s){const n=Object.keys(r).sort();return`${e.method}
${this.getCanonicalPath(e)}
${Sf(e)}
${n.map(i=>`${i}:${r[i]}`).join(`
`)}

${n.join(";")}
${s}`}async createStringToSign(e,r,s,n){const i=new this.sha256;i.update(Ct(s));const o=await i.digest();return`${n}
${e}
${r}
${_e(o)}`}getCanonicalPath({path:e}){if(this.uriEscapePath){const r=[];for(const i of e.split("/"))i?.length!==0&&i!=="."&&(i===".."?r.pop():r.push(i));const s=`${e?.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&e?.endsWith("/")?"/":""}`;return at(s).replace(/%2F/g,"/")}return e}validateResolvedCredentials(e){if(typeof e!="object"||typeof e.accessKeyId!="string"||typeof e.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}formatDate(e){const r=wf(e).replace(/[\-:]/g,"");return{longDate:r,shortDate:r.slice(0,8)}}getCanonicalHeaderList(e){return Object.keys(e).sort().join(";")}}class Hs extends bf{headerFormatter=new hf;constructor({applyChecksum:e,credentials:r,region:s,service:n,sha256:i,uriEscapePath:o=!0}){super({applyChecksum:e,credentials:r,region:s,service:n,sha256:i,uriEscapePath:o})}async presign(e,r={}){const{signingDate:s=new Date,expiresIn:n=3600,unsignableHeaders:i,unhoistableHeaders:o,signableHeaders:a,hoistableHeaders:u,signingRegion:c,signingService:f}=r,l=await this.credentialProvider();this.validateResolvedCredentials(l);const m=c??await this.regionProvider(),{longDate:h,shortDate:S}=this.formatDate(s);if(n>df)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");const A=Jr(S,m,f??this.service),b=yf(Oi(e),{unhoistableHeaders:o,hoistableHeaders:u});l.sessionToken&&(b.query[nc]=l.sessionToken),b.query[Zd]=Zr,b.query[Qd]=`${l.accessKeyId}/${A}`,b.query[rc]=h,b.query[Yd]=n.toString(10);const v=Pi(b,i,a);return b.query[Jd]=this.getCanonicalHeaderList(v),b.query[sc]=await this.getSignature(h,A,this.getSigningKey(l,m,S,f),this.createCanonicalRequest(b,v,await Yr(e,this.sha256))),b}async sign(e,r){return typeof e=="string"?this.signString(e,r):e.headers&&e.payload?this.signEvent(e,r):e.message?this.signMessage(e,r):this.signRequest(e,r)}async signEvent({headers:e,payload:r},{signingDate:s=new Date,priorSignature:n,signingRegion:i,signingService:o}){const a=i??await this.regionProvider(),{shortDate:u,longDate:c}=this.formatDate(s),f=Jr(u,a,o??this.service),l=await Yr({headers:{},body:r},this.sha256),m=new this.sha256;m.update(e);const h=_e(await m.digest()),S=[cf,c,f,n,h,l].join(`
`);return this.signString(S,{signingDate:s,signingRegion:a,signingService:o})}async signMessage(e,{signingDate:r=new Date,signingRegion:s,signingService:n}){return this.signEvent({headers:this.headerFormatter.format(e.message.headers),payload:e.message.body},{signingDate:r,signingRegion:s,signingService:n,priorSignature:e.priorSignature}).then(o=>({message:e.message,signature:o}))}async signString(e,{signingDate:r=new Date,signingRegion:s,signingService:n}={}){const i=await this.credentialProvider();this.validateResolvedCredentials(i);const o=s??await this.regionProvider(),{shortDate:a}=this.formatDate(r),u=new this.sha256(await this.getSigningKey(i,o,a,n));return u.update(Ct(e)),_e(await u.digest())}async signRequest(e,{signingDate:r=new Date,signableHeaders:s,unsignableHeaders:n,signingRegion:i,signingService:o}={}){const a=await this.credentialProvider();this.validateResolvedCredentials(a);const u=i??await this.regionProvider(),c=Oi(e),{longDate:f,shortDate:l}=this.formatDate(r),m=Jr(l,u,o??this.service);c.headers[oc]=f,a.sessionToken&&(c.headers[sf]=a.sessionToken);const h=await Yr(c,this.sha256);!gf(Ls,c.headers)&&this.applyChecksum&&(c.headers[Ls]=h);const S=Pi(c,n,s),A=await this.getSignature(f,m,this.getSigningKey(a,u,l,o),this.createCanonicalRequest(c,S,h));return c.headers[ic]=`${Zr} Credential=${a.accessKeyId}/${m}, SignedHeaders=${this.getCanonicalHeaderList(S)}, Signature=${A}`,c}async getSignature(e,r,s,n){const i=await this.createStringToSign(e,r,n,Zr),o=new this.sha256(await s);return o.update(Ct(i)),_e(await o.digest())}getSigningKey(e,r,s,n){return ff(this.sha256,e,s,r,n||this.service)}}const Ef=t=>{let e=t.credentials,r=!!t.credentials,s;Object.defineProperty(t,"credentials",{set(c){c&&c!==e&&c!==s&&(r=!0),e=c;const f=Cf(t,{credentials:e,credentialDefaultProvider:t.credentialDefaultProvider}),l=Af(t,f);if(r&&!l.attributed){const m=typeof e=="object"&&e!==null;s=async h=>{const A=await l(h);return m&&(!A.$source||Object.keys(A.$source).length===0)?wl(A,"CREDENTIALS_CODE","e"):A},s.memoized=l.memoized,s.configBound=l.configBound,s.attributed=!0}else s=l},get(){return s},enumerable:!0,configurable:!0}),t.credentials=e;const{signingEscapePath:n=!0,systemClockOffset:i=t.systemClockOffset||0,sha256:o}=t;let a;return t.signer?a=yt(t.signer):t.regionInfoProvider?a=()=>yt(t.region)().then(async c=>[await t.regionInfoProvider(c,{useFipsEndpoint:await t.useFipsEndpoint(),useDualstackEndpoint:await t.useDualstackEndpoint()})||{},c]).then(([c,f])=>{const{signingRegion:l,signingService:m}=c;t.signingRegion=t.signingRegion||l||f,t.signingName=t.signingName||m||t.serviceId;const h={...t,credentials:t.credentials,region:t.signingRegion,service:t.signingName,sha256:o,uriEscapePath:n},S=t.signerConstructor||Hs;return new S(h)}):a=async c=>{c=Object.assign({},{name:"sigv4",signingName:t.signingName||t.defaultSigningName,signingRegion:await yt(t.region)(),properties:{}},c);const f=c.signingRegion,l=c.signingName;t.signingRegion=t.signingRegion||f,t.signingName=t.signingName||l||t.serviceId;const m={...t,credentials:t.credentials,region:t.signingRegion,service:t.signingName,sha256:o,uriEscapePath:n},h=t.signerConstructor||Hs;return new h(m)},Object.assign(t,{systemClockOffset:i,signingEscapePath:n,signer:a})};function Cf(t,{credentials:e,credentialDefaultProvider:r}){let s;return e?e?.memoized?s=e:s=Gd(e,Vd,tc):r?s=yt(r(Object.assign({},t,{parentClientConfig:t}))):s=async()=>{throw new Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")},s.memoized=!0,s}function Af(t,e){if(e.configBound)return e;const r=async s=>e({...s,callerClientConfig:t});return r.memoized=e.memoized,r.configBound=!0,r}const $i=typeof TextEncoder=="function"?new TextEncoder:null,_f=t=>{if(typeof t=="string"){if($i)return $i.encode(t).byteLength;let e=t.length;for(let r=e-1;r>=0;r--){const s=t.charCodeAt(r);s>127&&s<=2047?e++:s>2047&&s<=65535&&(e+=2),s>=56320&&s<=57343&&r--}return e}else{if(typeof t.byteLength=="number")return t.byteLength;if(typeof t.size=="number")return t.size}throw new Error(`Body Length computation failed for ${t}`)},rt=(t,e)=>{const r=[];if(t&&r.push(t),e)for(const s of e)r.push(s);return r},qe=(t,e)=>`${t||"anonymous"}${e&&e.length>0?` (a.k.a. ${e.join(",")})`:""}`,gr=()=>{let t=[],e=[],r=!1;const s=new Set,n=l=>l.sort((m,h)=>Ui[h.step]-Ui[m.step]||Fi[h.priority||"normal"]-Fi[m.priority||"normal"]),i=l=>{let m=!1;const h=S=>{const A=rt(S.name,S.aliases);if(A.includes(l)){m=!0;for(const b of A)s.delete(b);return!1}return!0};return t=t.filter(h),e=e.filter(h),m},o=l=>{let m=!1;const h=S=>{if(S.middleware===l){m=!0;for(const A of rt(S.name,S.aliases))s.delete(A);return!1}return!0};return t=t.filter(h),e=e.filter(h),m},a=l=>(t.forEach(m=>{l.add(m.middleware,{...m})}),e.forEach(m=>{l.addRelativeTo(m.middleware,{...m})}),l.identifyOnResolve?.(f.identifyOnResolve()),l),u=l=>{const m=[];return l.before.forEach(h=>{h.before.length===0&&h.after.length===0?m.push(h):m.push(...u(h))}),m.push(l),l.after.reverse().forEach(h=>{h.before.length===0&&h.after.length===0?m.push(h):m.push(...u(h))}),m},c=(l=!1)=>{const m=[],h=[],S={};return t.forEach(b=>{const v={...b,before:[],after:[]};for(const _ of rt(v.name,v.aliases))S[_]=v;m.push(v)}),e.forEach(b=>{const v={...b,before:[],after:[]};for(const _ of rt(v.name,v.aliases))S[_]=v;h.push(v)}),h.forEach(b=>{if(b.toMiddleware){const v=S[b.toMiddleware];if(v===void 0){if(l)return;throw new Error(`${b.toMiddleware} is not found when adding ${qe(b.name,b.aliases)} middleware ${b.relation} ${b.toMiddleware}`)}b.relation==="after"&&v.after.push(b),b.relation==="before"&&v.before.push(b)}}),n(m).map(u).reduce((b,v)=>(b.push(...v),b),[])},f={add:(l,m={})=>{const{name:h,override:S,aliases:A}=m,b={step:"initialize",priority:"normal",middleware:l,...m},v=rt(h,A);if(v.length>0){if(v.some(_=>s.has(_))){if(!S)throw new Error(`Duplicate middleware name '${qe(h,A)}'`);for(const _ of v){const I=t.findIndex(W=>W.name===_||W.aliases?.some(ue=>ue===_));if(I===-1)continue;const M=t[I];if(M.step!==b.step||b.priority!==M.priority)throw new Error(`"${qe(M.name,M.aliases)}" middleware with ${M.priority} priority in ${M.step} step cannot be overridden by "${qe(h,A)}" middleware with ${b.priority} priority in ${b.step} step.`);t.splice(I,1)}}for(const _ of v)s.add(_)}t.push(b)},addRelativeTo:(l,m)=>{const{name:h,override:S,aliases:A}=m,b={middleware:l,...m},v=rt(h,A);if(v.length>0){if(v.some(_=>s.has(_))){if(!S)throw new Error(`Duplicate middleware name '${qe(h,A)}'`);for(const _ of v){const I=e.findIndex(W=>W.name===_||W.aliases?.some(ue=>ue===_));if(I===-1)continue;const M=e[I];if(M.toMiddleware!==b.toMiddleware||M.relation!==b.relation)throw new Error(`"${qe(M.name,M.aliases)}" middleware ${M.relation} "${M.toMiddleware}" middleware cannot be overridden by "${qe(h,A)}" middleware ${b.relation} "${b.toMiddleware}" middleware.`);e.splice(I,1)}}for(const _ of v)s.add(_)}e.push(b)},clone:()=>a(gr()),use:l=>{l.applyToStack(f)},remove:l=>typeof l=="string"?i(l):o(l),removeByTag:l=>{let m=!1;const h=S=>{const{tags:A,name:b,aliases:v}=S;if(A&&A.includes(l)){const _=rt(b,v);for(const I of _)s.delete(I);return m=!0,!1}return!0};return t=t.filter(h),e=e.filter(h),m},concat:l=>{const m=a(gr());return m.use(l),m.identifyOnResolve(r||m.identifyOnResolve()||(l.identifyOnResolve?.()??!1)),m},applyToStack:a,identify:()=>c(!0).map(l=>{const m=l.step??l.relation+" "+l.toMiddleware;return qe(l.name,l.aliases)+" - "+m}),identifyOnResolve(l){return typeof l=="boolean"&&(r=l),r},resolve:(l,m)=>{for(const h of c().map(S=>S.middleware).reverse())l=h(l,m);return r&&console.log(f.identify()),l}};return f},Ui={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},Fi={high:3,normal:2,low:1};class vf{config;middlewareStack=gr();initConfig;handlers;constructor(e){this.config=e;const{protocol:r,protocolSettings:s}=e;s&&typeof r=="function"&&(e.protocol=new r(s))}send(e,r,s){const n=typeof r!="function"?r:void 0,i=typeof r=="function"?r:s,o=n===void 0&&this.config.cacheMiddleware===!0;let a;if(o){this.handlers||(this.handlers=new WeakMap);const u=this.handlers;u.has(e.constructor)?a=u.get(e.constructor):(a=e.resolveMiddleware(this.middlewareStack,this.config,n),u.set(e.constructor,a))}else delete this.handlers,a=e.resolveMiddleware(this.middlewareStack,this.config,n);if(i)a(e).then(u=>i(null,u.output),u=>i(u)).catch(()=>{});else return a(e).then(u=>u.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}}const es="***SensitiveInformation***";function zs(t,e){if(e==null)return e;const r=Q.of(t);if(r.getMergedTraits().sensitive)return es;if(r.isListSchema()){if(!!r.getValueSchema().getMergedTraits().sensitive)return es}else if(r.isMapSchema()){if(!!r.getKeySchema().getMergedTraits().sensitive||!!r.getValueSchema().getMergedTraits().sensitive)return es}else if(r.isStructSchema()&&typeof e=="object"){const s=e,n={};for(const[i,o]of r.structIterator())s[i]!=null&&(n[i]=zs(o,s[i]));return n}return e}class Ir{middlewareStack=gr();schema;static classBuilder(){return new Rf}resolveMiddlewareWithContext(e,r,s,{middlewareFn:n,clientName:i,commandName:o,inputFilterSensitiveLog:a,outputFilterSensitiveLog:u,smithyContext:c,additionalContext:f,CommandCtor:l}){for(const b of n.bind(this)(l,e,r,s))this.middlewareStack.use(b);const m=e.concat(this.middlewareStack),{logger:h}=r,S={logger:h,clientName:i,commandName:o,inputFilterSensitiveLog:a,outputFilterSensitiveLog:u,[Ms]:{commandInstance:this,...c},...f},{requestHandler:A}=r;return m.resolve(b=>A.handle(b.request,s||{}),S)}}class Rf{_init=()=>{};_ep={};_middlewareFn=()=>[];_commandName="";_clientName="";_additionalContext={};_smithyContext={};_inputFilterSensitiveLog=void 0;_outputFilterSensitiveLog=void 0;_serializer=null;_deserializer=null;_operationSchema;init(e){this._init=e}ep(e){return this._ep=e,this}m(e){return this._middlewareFn=e,this}s(e,r,s={}){return this._smithyContext={service:e,operation:r,...s},this}c(e={}){return this._additionalContext=e,this}n(e,r){return this._clientName=e,this._commandName=r,this}f(e=s=>s,r=s=>s){return this._inputFilterSensitiveLog=e,this._outputFilterSensitiveLog=r,this}ser(e){return this._serializer=e,this}de(e){return this._deserializer=e,this}sc(e){return this._operationSchema=e,this._smithyContext.operationSchema=e,this}build(){const e=this;let r;return r=class extends Ir{input;static getEndpointParameterInstructions(){return e._ep}constructor(...[s]){super(),this.input=s??{},e._init(this),this.schema=e._operationSchema}resolveMiddleware(s,n,i){const o=e._operationSchema,a=o?.[4]??o?.input,u=o?.[5]??o?.output;return this.resolveMiddlewareWithContext(s,n,i,{CommandCtor:r,middlewareFn:e._middlewareFn,clientName:e._clientName,commandName:e._commandName,inputFilterSensitiveLog:e._inputFilterSensitiveLog??(o?zs.bind(null,a):c=>c),outputFilterSensitiveLog:e._outputFilterSensitiveLog??(o?zs.bind(null,u):c=>c),smithyContext:e._smithyContext,additionalContext:e._additionalContext})}serialize=e._serializer;deserialize=e._deserializer}}}class mt extends Error{$fault;$response;$retryable;$metadata;constructor(e){super(e.message),Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=e.name,this.$fault=e.$fault,this.$metadata=e.$metadata}static isInstance(e){if(!e)return!1;const r=e;return mt.prototype.isPrototypeOf(r)||!!r.$fault&&!!r.$metadata&&(r.$fault==="client"||r.$fault==="server")}static[Symbol.hasInstance](e){if(!e)return!1;const r=e;return this===mt?mt.isInstance(e):mt.isInstance(e)?r.name&&this.name?this.prototype.isPrototypeOf(e)||r.name===this.name:this.prototype.isPrototypeOf(e):!1}}const Li=(t,e={})=>{Object.entries(e).filter(([,s])=>s!==void 0).forEach(([s,n])=>{(t[s]==null||t[s]==="")&&(t[s]=n)});const r=t.message||t.Message||"UnknownError";return t.message=r,delete t.Message,t},kf=t=>{switch(t){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},Tf=t=>{const e=[];for(const r in pr){const s=pr[r];t[s]!==void 0&&e.push({algorithmId:()=>s,checksumConstructor:()=>t[s]})}return{addChecksumAlgorithm(r){e.push(r)},checksumAlgorithms(){return e}}},Df=t=>{const e={};return t.checksumAlgorithms().forEach(r=>{e[r.algorithmId()]=r.checksumConstructor()}),e},Bf=t=>({setRetryStrategy(e){t.retryStrategy=e},retryStrategy(){return t.retryStrategy}}),If=t=>{const e={};return e.retryStrategy=t.retryStrategy(),e},Pf=t=>Object.assign(Tf(t),Bf(t)),Mf=t=>Object.assign(Df(t),If(t)),lc=t=>{const e="#text";for(const r in t)t.hasOwnProperty(r)&&t[r][e]!==void 0?t[r]=t[r][e]:typeof t[r]=="object"&&t[r]!==null&&(t[r]=lc(t[r]));return t};class yn{trace(){}debug(){}info(){}warn(){}error(){}}class Nf{queryCompat;constructor(e=!1){this.queryCompat=e}resolveRestContentType(e,r){const s=r.getMemberSchemas(),n=Object.values(s).find(i=>!!i.getMergedTraits().httpPayload);if(n){const i=n.getMergedTraits().mediaType;return i||(n.isStringSchema()?"text/plain":n.isBlobSchema()?"application/octet-stream":e)}else if(!r.isUnitSchema()&&Object.values(s).find(o=>{const{httpQuery:a,httpQueryParams:u,httpHeader:c,httpLabel:f,httpPrefixHeaders:l}=o.getMergedTraits();return!a&&!u&&!c&&!f&&l===void 0}))return e}async getErrorSchemaOrThrowBaseException(e,r,s,n,i,o){let a=r,u=e;e.includes("#")&&([a,u]=e.split("#"));const c={$metadata:i,$fault:s.statusCode<500?"client":"server"},f=V.for(a);try{return{errorSchema:o?.(f,u)??f.getSchema(e),errorMetadata:c}}catch{n.message=n.message??n.Message??"UnknownError";const m=V.for("smithy.ts.sdk.synthetic."+a),h=m.getBaseException();if(h){const S=m.getErrorCtor(h)??Error;throw this.decorateServiceException(Object.assign(new S({name:u}),c),n)}throw this.decorateServiceException(Object.assign(new Error(u),c),n)}}decorateServiceException(e,r={}){if(this.queryCompat){const s=e.Message??r.Message,n=Li(e,r);s&&(n.message=s),n.Error={...n.Error,Type:n.Error.Type,Code:n.Error.Code,Message:n.Error.message??n.Error.Message??s};const i=n.$metadata.requestId;return i&&(n.RequestId=i),n}return Li(e,r)}setQueryCompatError(e,r){const s=r.headers?.["x-amzn-query-error"];if(e!==void 0&&s!=null){const[n,i]=s.split(";"),o=Object.entries(e),a={Code:n,Type:i};Object.assign(e,a);for(const[u,c]of o)a[u==="message"?"Message":u]=c;delete a.__type,e.Error=a}}queryCompatOutput(e,r){e.Error&&(r.Error=e.Error),e.Type&&(r.Type=e.Type),e.Code&&(r.Code=e.Code)}findQueryCompatibleError(e,r){try{return e.getSchema(r)}catch{return e.find(n=>Q.of(n).getMergedTraits().awsQueryError?.[0]===r)}}}class Sn{serdeContext;setSerdeContext(e){this.serdeContext=e}}class Of{from;to;keys;constructor(e,r){this.from=e,this.to=r,this.keys=new Set(Object.keys(this.from).filter(s=>s!=="__type"))}mark(e){this.keys.delete(e)}hasUnknown(){return this.keys.size===1&&Object.keys(this.to).length===0}writeUnknown(){if(this.hasUnknown()){const e=this.keys.values().next().value,r=this.from[e];this.to.$unknown=[e,r]}}}function $f(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function Uf(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#x0D;").replace(/\n/g,"&#x0A;").replace(/\u0085/g,"&#x85;").replace(/\u2028/,"&#x2028;")}class js{value;constructor(e){this.value=e}toString(){return Uf(""+this.value)}}class Ee{name;children;attributes={};static of(e,r,s){const n=new Ee(e);return r!==void 0&&n.addChildNode(new js(r)),s!==void 0&&n.withName(s),n}constructor(e,r=[]){this.name=e,this.children=r}withName(e){return this.name=e,this}addAttribute(e,r){return this.attributes[e]=r,this}addChildNode(e){return this.children.push(e),this}removeAttribute(e){return delete this.attributes[e],this}n(e){return this.name=e,this}c(e){return this.children.push(e),this}a(e,r){return r!=null&&(this.attributes[e]=r),this}cc(e,r,s=r){if(e[r]!=null){const n=Ee.of(r,e[r]).withName(s);this.c(n)}}l(e,r,s,n){e[r]!=null&&n().map(o=>{o.withName(s),this.c(o)})}lc(e,r,s,n){if(e[r]!=null){const i=n(),o=new Ee(s);i.map(a=>{o.c(a)}),this.c(o)}}toString(){const e=!!this.children.length;let r=`<${this.name}`;const s=this.attributes;for(const n of Object.keys(s)){const i=s[n];i!=null&&(r+=` ${n}="${$f(""+i)}"`)}return r+=e?`>${this.children.map(n=>n.toString()).join("")}</${this.name}>`:"/>"}}let ts;function Ff(t){ts||(ts=new DOMParser);const e=ts.parseFromString(t,"application/xml");if(e.getElementsByTagName("parsererror").length>0)throw new Error("DOMParser XML parsing error.");const r=s=>{if(s.nodeType===Node.TEXT_NODE&&s.textContent?.trim())return s.textContent;if(s.nodeType===Node.ELEMENT_NODE){const n=s;if(n.attributes.length===0&&n.childNodes.length===0)return"";const i={},o=Array.from(n.attributes);for(const u of o)i[`${u.name}`]=u.value;const a=Array.from(n.childNodes);for(const u of a){const c=r(u);if(c!=null){const f=u.nodeName;if(a.length===1&&o.length===0&&f==="#text")return c;i[f]?Array.isArray(i[f])?i[f].push(c):i[f]=[i[f],c]:i[f]=c}else if(a.length===1&&o.length===0)return n.textContent}return i}return null};return{[e.documentElement.nodeName]:r(e.documentElement)}}class Lf extends Sn{settings;stringDeserializer;constructor(e){super(),this.settings=e,this.stringDeserializer=new ec(e)}setSerdeContext(e){this.serdeContext=e,this.stringDeserializer.setSerdeContext(e)}read(e,r,s){const n=Q.of(e),i=n.getMemberSchemas();if(n.isStructSchema()&&n.isMemberSchema()&&!!Object.values(i).find(c=>!!c.getMemberTraits().eventPayload)){const c={},f=Object.keys(i)[0];return i[f].isBlobSchema()?c[f]=r:c[f]=this.read(i[f],r),c}const a=(this.serdeContext?.utf8Encoder??vt)(r),u=this.parseXml(a);return this.readSchema(e,s?u[s]:u)}readSchema(e,r){const s=Q.of(e);if(s.isUnitSchema())return;const n=s.getMergedTraits();if(s.isListSchema()&&!Array.isArray(r))return this.readSchema(s,[r]);if(r==null)return r;if(typeof r=="object"){const i=!!n.sparse,o=!!n.xmlFlattened;if(s.isListSchema()){const u=s.getValueSchema(),c=[],f=u.getMergedTraits().xmlName??"member",l=o?r:(r[0]??r)[f],m=Array.isArray(l)?l:[l];for(const h of m)(h!=null||i)&&c.push(this.readSchema(u,h));return c}const a={};if(s.isMapSchema()){const u=s.getKeySchema(),c=s.getValueSchema();let f;o?f=Array.isArray(r)?r:[r]:f=Array.isArray(r.entry)?r.entry:[r.entry];const l=u.getMergedTraits().xmlName??"key",m=c.getMergedTraits().xmlName??"value";for(const h of f){const S=h[l],A=h[m];(A!=null||i)&&(a[S]=this.readSchema(c,A))}return a}if(s.isStructSchema()){const u=s.isUnionSchema();let c;u&&(c=new Of(r,a));for(const[f,l]of s.structIterator()){const m=l.getMergedTraits(),h=m.httpPayload?m.xmlName??l.getName():l.getMemberTraits().xmlName??f;u&&c.mark(h),r[h]!=null&&(a[f]=this.readSchema(l,r[h]))}return u&&c.writeUnknown(),a}if(s.isDocumentSchema())return r;throw new Error(`@aws-sdk/core/protocols - xml deserializer unhandled schema type for ${s.getName(!0)}`)}return s.isListSchema()?[]:s.isMapSchema()||s.isStructSchema()?{}:this.stringDeserializer.read(s,r)}parseXml(e){if(e.length){let r;try{r=Ff(e)}catch(o){throw o&&typeof o=="object"&&Object.defineProperty(o,"$responseBodyText",{value:e}),o}const s="#text",n=Object.keys(r)[0],i=r[n];return i[s]&&(i[n]=i[s],delete i[s]),lc(i)}return{}}}const Hf=(t,e)=>{if(e?.Error?.Code!==void 0)return e.Error.Code;if(e?.Code!==void 0)return e.Code;if(t.statusCode==404)return"NotFound"};class zf extends Sn{settings;stringBuffer;byteBuffer;buffer;constructor(e){super(),this.settings=e}write(e,r){const s=Q.of(e);if(s.isStringSchema()&&typeof r=="string")this.stringBuffer=r;else if(s.isBlobSchema())this.byteBuffer="byteLength"in r?r:(this.serdeContext?.base64Decoder??Et)(r);else{this.buffer=this.writeStruct(s,r,void 0);const n=s.getMergedTraits();n.httpPayload&&!n.xmlName&&this.buffer.withName(s.getName())}}flush(){if(this.byteBuffer!==void 0){const r=this.byteBuffer;return delete this.byteBuffer,r}if(this.stringBuffer!==void 0){const r=this.stringBuffer;return delete this.stringBuffer,r}const e=this.buffer;return this.settings.xmlNamespace&&(e?.attributes?.xmlns||e.addAttribute("xmlns",this.settings.xmlNamespace)),delete this.buffer,e.toString()}writeStruct(e,r,s){const n=e.getMergedTraits(),i=e.isMemberSchema()&&!n.httpPayload?e.getMemberTraits().xmlName??e.getMemberName():n.xmlName??e.getName();if(!i||!e.isStructSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write struct with empty name or non-struct, schema=${e.getName(!0)}.`);const o=Ee.of(i),[a,u]=this.getXmlnsAttribute(e,s);for(const[f,l]of e.structIterator()){const m=r[f];if(m!=null||l.isIdempotencyToken()){if(l.getMergedTraits().xmlAttribute){o.addAttribute(l.getMergedTraits().xmlName??f,this.writeSimple(l,m));continue}if(l.isListSchema())this.writeList(l,m,o,u);else if(l.isMapSchema())this.writeMap(l,m,o,u);else if(l.isStructSchema())o.addChildNode(this.writeStruct(l,m,u));else{const h=Ee.of(l.getMergedTraits().xmlName??l.getMemberName());this.writeSimpleInto(l,m,h,u),o.addChildNode(h)}}}const{$unknown:c}=r;if(c&&e.isUnionSchema()&&Array.isArray(c)&&Object.keys(r).length===1){const[f,l]=c,m=Ee.of(f);if(typeof l!="string")if(r instanceof Ee||r instanceof js)o.addChildNode(r);else throw new Error("@aws-sdk - $unknown union member in XML requires value of type string, @aws-sdk/xml-builder::XmlNode or XmlText.");this.writeSimpleInto(0,l,m,u),o.addChildNode(m)}return u&&o.addAttribute(a,u),o}writeList(e,r,s,n){if(!e.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member list: ${e.getName(!0)}`);const i=e.getMergedTraits(),o=e.getValueSchema(),a=o.getMergedTraits(),u=!!a.sparse,c=!!i.xmlFlattened,[f,l]=this.getXmlnsAttribute(e,n),m=(h,S)=>{if(o.isListSchema())this.writeList(o,Array.isArray(S)?S:[S],h,l);else if(o.isMapSchema())this.writeMap(o,S,h,l);else if(o.isStructSchema()){const A=this.writeStruct(o,S,l);h.addChildNode(A.withName(c?i.xmlName??e.getMemberName():a.xmlName??"member"))}else{const A=Ee.of(c?i.xmlName??e.getMemberName():a.xmlName??"member");this.writeSimpleInto(o,S,A,l),h.addChildNode(A)}};if(c)for(const h of r)(u||h!=null)&&m(s,h);else{const h=Ee.of(i.xmlName??e.getMemberName());l&&h.addAttribute(f,l);for(const S of r)(u||S!=null)&&m(h,S);s.addChildNode(h)}}writeMap(e,r,s,n,i=!1){if(!e.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member map: ${e.getName(!0)}`);const o=e.getMergedTraits(),a=e.getKeySchema(),c=a.getMergedTraits().xmlName??"key",f=e.getValueSchema(),l=f.getMergedTraits(),m=l.xmlName??"value",h=!!l.sparse,S=!!o.xmlFlattened,[A,b]=this.getXmlnsAttribute(e,n),v=(_,I,M)=>{const W=Ee.of(c,I),[ue,kt]=this.getXmlnsAttribute(a,b);kt&&W.addAttribute(ue,kt),_.addChildNode(W);let Ne=Ee.of(m);f.isListSchema()?this.writeList(f,M,Ne,b):f.isMapSchema()?this.writeMap(f,M,Ne,b,!0):f.isStructSchema()?Ne=this.writeStruct(f,M,b):this.writeSimpleInto(f,M,Ne,b),_.addChildNode(Ne)};if(S){for(const[_,I]of Object.entries(r))if(h||I!=null){const M=Ee.of(o.xmlName??e.getMemberName());v(M,_,I),s.addChildNode(M)}}else{let _;i||(_=Ee.of(o.xmlName??e.getMemberName()),b&&_.addAttribute(A,b),s.addChildNode(_));for(const[I,M]of Object.entries(r))if(h||M!=null){const W=Ee.of("entry");v(W,I,M),(i?s:_).addChildNode(W)}}}writeSimple(e,r){if(r===null)throw new Error("@aws-sdk/core/protocols - (XML serializer) cannot write null value.");const s=Q.of(e);let n=null;if(r&&typeof r=="object")if(s.isBlobSchema())n=(this.serdeContext?.base64Encoder??ct)(r);else if(s.isTimestampSchema()&&r instanceof Date)switch(gn(s,this.settings)){case 5:n=r.toISOString().replace(".000Z","Z");break;case 6:n=Fs(r);break;case 7:n=String(r.getTime()/1e3);break;default:console.warn("Missing timestamp format, using http date",r),n=Fs(r);break}else{if(s.isBigDecimalSchema()&&r)return r instanceof Dr?r.string:String(r);throw s.isMapSchema()||s.isListSchema()?new Error("@aws-sdk/core/protocols - xml serializer, cannot call _write() on List/Map schema, call writeList or writeMap() instead."):new Error(`@aws-sdk/core/protocols - xml serializer, unhandled schema type for object value and schema: ${s.getName(!0)}`)}if((s.isBooleanSchema()||s.isNumericSchema()||s.isBigIntegerSchema()||s.isBigDecimalSchema())&&(n=String(r)),s.isStringSchema()&&(r===void 0&&s.isIdempotencyToken()?n=fn():n=String(r)),n===null)throw new Error(`Unhandled schema-value pair ${s.getName(!0)}=${r}`);return n}writeSimpleInto(e,r,s,n){const i=this.writeSimple(e,r),o=Q.of(e),a=new js(i),[u,c]=this.getXmlnsAttribute(o,n);c&&s.addAttribute(u,c),s.addChildNode(a)}getXmlnsAttribute(e,r){const s=e.getMergedTraits(),[n,i]=s.xmlNamespace??[];return i&&i!==r?[n?`xmlns:${n}`:"xmlns",i]:[void 0,void 0]}}class jf extends Sn{settings;constructor(e){super(),this.settings=e}createSerializer(){const e=new zf(this.settings);return e.setSerdeContext(this.serdeContext),e}createDeserializer(){const e=new Lf(this.settings);return e.setSerdeContext(this.serdeContext),e}}class qf extends Ud{codec;serializer;deserializer;mixin=new Nf;constructor(e){super(e);const r={timestampFormat:{useTrait:!0,default:5},httpBindings:!0,xmlNamespace:e.xmlNamespace,serviceNamespace:e.defaultNamespace};this.codec=new jf(r),this.serializer=new Hd(this.codec.createSerializer(),r),this.deserializer=new Fd(this.codec.createDeserializer(),r)}getPayloadCodec(){return this.codec}getShapeId(){return"aws.protocols#restXml"}async serializeRequest(e,r,s){const n=await super.serializeRequest(e,r,s),i=Q.of(e.input);if(!n.headers["content-type"]){const o=this.mixin.resolveRestContentType(this.getDefaultContentType(),i);o&&(n.headers["content-type"]=o)}return typeof n.body=="string"&&n.headers["content-type"]===this.getDefaultContentType()&&!n.body.startsWith("<?xml ")&&!this.hasUnstructuredPayloadBinding(i)&&(n.body='<?xml version="1.0" encoding="UTF-8"?>'+n.body),n}async deserializeResponse(e,r,s){return super.deserializeResponse(e,r,s)}async handleError(e,r,s,n,i){const o=Hf(s,n)??"Unknown",{errorSchema:a,errorMetadata:u}=await this.mixin.getErrorSchemaOrThrowBaseException(o,this.options.defaultNamespace,s,n,i),c=Q.of(a),f=n.Error?.message??n.Error?.Message??n.message??n.Message??"Unknown",l=V.for(a[1]).getErrorCtor(a)??Error,m=new l(f);await this.deserializeHttpMessage(a,r,s,n);const h={};for(const[S,A]of c.structIterator()){const b=A.getMergedTraits().xmlName??S,v=n.Error?.[b]??n[b];h[S]=this.codec.createDeserializer().readSchema(A,v)}throw this.mixin.decorateServiceException(Object.assign(m,u,{$fault:c.getMergedTraits().error,message:f},h),n)}getDefaultContentType(){return"application/xml"}hasUnstructuredPayloadBinding(e){for(const[,r]of e.structIterator())if(r.getMergedTraits().httpPayload)return!(r.isStructSchema()||r.isMapSchema()||r.isListSchema());return!1}}const qs=[K.CRC32,K.CRC32C,K.CRC64NVME,K.SHA1,K.SHA256],Wf=[K.SHA256,K.SHA1,K.CRC32,K.CRC32C,K.CRC64NVME],Vf=(t,{requestChecksumRequired:e,requestAlgorithmMember:r,requestChecksumCalculation:s})=>{if(!r)return s===bt.WHEN_SUPPORTED||e?Ns:void 0;if(!t[r])return;const n=t[r];if(!qs.includes(n))throw new Error(`The checksum algorithm "${n}" is not supported by the client. Select one of ${qs}.`);return n},wn=t=>t===K.MD5?"content-md5":`x-amz-checksum-${t.toLowerCase()}`,Gf=(t,e)=>{const r=t.toLowerCase();for(const s of Object.keys(e))if(r===s.toLowerCase())return!0;return!1},Kf=(t,e)=>{const r=t.toLowerCase();for(const s of Object.keys(e))if(s.toLowerCase().startsWith(r))return!0;return!1},dc=t=>t!==void 0&&typeof t!="string"&&!ArrayBuffer.isView(t)&&!cc(t);function xn(t,e,r,s){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(f){try{c(s.next(f))}catch(l){o(l)}}function u(f){try{c(s.throw(f))}catch(l){o(l)}}function c(f){f.done?i(f.value):n(f.value).then(a,u)}c((s=s.apply(t,e||[])).next())})}function bn(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},s,n,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(f){return u([c,f])}}function u(c){if(s)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(r=0)),r;)try{if(s=1,n&&(i=c[0]&2?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,n=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(c[0]===6&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(f){c=[6,f],n=0}finally{s=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function fc(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],s=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}const Xf=t=>new TextEncoder().encode(t);var Zf=typeof Buffer<"u"&&Buffer.from?function(t){return Buffer.from(t,"utf8")}:Xf;function Ye(t){return t instanceof Uint8Array?t:typeof t=="string"?Zf(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t)}function qt(t){return typeof t=="string"?t.length===0:t.byteLength===0}function hc(t){return new Uint8Array([(t&4278190080)>>24,(t&16711680)>>16,(t&65280)>>8,t&255])}function pc(t){if(!Uint32Array.from){for(var e=new Uint32Array(t.length),r=0;r<t.length;)e[r]=t[r],r+=1;return e}return Uint32Array.from(t)}var Qf=(function(){function t(){this.crc32c=new Hi}return t.prototype.update=function(e){qt(e)||this.crc32c.update(Ye(e))},t.prototype.digest=function(){return xn(this,void 0,void 0,function(){return bn(this,function(e){return[2,hc(this.crc32c.digest())]})})},t.prototype.reset=function(){this.crc32c=new Hi},t})(),Hi=(function(){function t(){this.checksum=4294967295}return t.prototype.update=function(e){var r,s;try{for(var n=fc(e),i=n.next();!i.done;i=n.next()){var o=i.value;this.checksum=this.checksum>>>8^Yf[(this.checksum^o)&255]}}catch(a){r={error:a}}finally{try{i&&!i.done&&(s=n.return)&&s.call(n)}finally{if(r)throw r.error}}return this},t.prototype.digest=function(){return(this.checksum^4294967295)>>>0},t})(),Jf=[0,4067132163,3778769143,324072436,3348797215,904991772,648144872,3570033899,2329499855,2024987596,1809983544,2575936315,1296289744,3207089363,2893594407,1578318884,274646895,3795141740,4049975192,51262619,3619967088,632279923,922689671,3298075524,2592579488,1760304291,2075979607,2312596564,1562183871,2943781820,3156637768,1313733451,549293790,3537243613,3246849577,871202090,3878099393,357341890,102525238,4101499445,2858735121,1477399826,1264559846,3107202533,1845379342,2677391885,2361733625,2125378298,820201905,3263744690,3520608582,598981189,4151959214,85089709,373468761,3827903834,3124367742,1213305469,1526817161,2842354314,2107672161,2412447074,2627466902,1861252501,1098587580,3004210879,2688576843,1378610760,2262928035,1955203488,1742404180,2511436119,3416409459,969524848,714683780,3639785095,205050476,4266873199,3976438427,526918040,1361435347,2739821008,2954799652,1114974503,2529119692,1691668175,2005155131,2247081528,3690758684,697762079,986182379,3366744552,476452099,3993867776,4250756596,255256311,1640403810,2477592673,2164122517,1922457750,2791048317,1412925310,1197962378,3037525897,3944729517,427051182,170179418,4165941337,746937522,3740196785,3451792453,1070968646,1905808397,2213795598,2426610938,1657317369,3053634322,1147748369,1463399397,2773627110,4215344322,153784257,444234805,3893493558,1021025245,3467647198,3722505002,797665321,2197175160,1889384571,1674398607,2443626636,1164749927,3070701412,2757221520,1446797203,137323447,4198817972,3910406976,461344835,3484808360,1037989803,781091935,3705997148,2460548119,1623424788,1939049696,2180517859,1429367560,2807687179,3020495871,1180866812,410100952,3927582683,4182430767,186734380,3756733383,763408580,1053836080,3434856499,2722870694,1344288421,1131464017,2971354706,1708204729,2545590714,2229949006,1988219213,680717673,3673779818,3383336350,1002577565,4010310262,493091189,238226049,4233660802,2987750089,1082061258,1395524158,2705686845,1972364758,2279892693,2494862625,1725896226,952904198,3399985413,3656866545,731699698,4283874585,222117402,510512622,3959836397,3280807620,837199303,582374963,3504198960,68661723,4135334616,3844915500,390545967,1230274059,3141532936,2825850620,1510247935,2395924756,2091215383,1878366691,2644384480,3553878443,565732008,854102364,3229815391,340358836,3861050807,4117890627,119113024,1493875044,2875275879,3090270611,1247431312,2660249211,1828433272,2141937292,2378227087,3811616794,291187481,34330861,4032846830,615137029,3603020806,3314634738,939183345,1776939221,2609017814,2295496738,2058945313,2926798794,1545135305,1330124605,3173225534,4084100981,17165430,307568514,3762199681,888469610,3332340585,3587147933,665062302,2042050490,2346497209,2559330125,1793573966,3190661285,1279665062,1595330642,2910671697],Yf=pc(Jf);const eh=()=>{const e=new Array(8);for(let r=0;r<8;r++){const s=new Array(512);for(let n=0;n<256;n++){let i=BigInt(n);for(let o=0;o<8*(r+1);o++)i&1n?i=i>>1n^0x9a6c9329ac4bc9b5n:i=i>>1n;s[n*2]=Number(i>>32n&0xffffffffn),s[n*2+1]=Number(i&0xffffffffn)}e[r]=new Uint32Array(s)}return e};let rs,Pt,Ws,Vs,Gs,Ks,Xs,Zs,Qs;const th=()=>{rs||(rs=eh(),[Pt,Ws,Vs,Gs,Ks,Xs,Zs,Qs]=rs)};class rh{c1=0;c2=0;constructor(){th(),this.reset()}update(e){const r=e.length;let s=0,n=this.c1,i=this.c2;for(;s+8<=r;){const o=((i^e[s++])&255)<<1,a=((i>>>8^e[s++])&255)<<1,u=((i>>>16^e[s++])&255)<<1,c=((i>>>24^e[s++])&255)<<1,f=((n^e[s++])&255)<<1,l=((n>>>8^e[s++])&255)<<1,m=((n>>>16^e[s++])&255)<<1,h=((n>>>24^e[s++])&255)<<1;n=Qs[o]^Zs[a]^Xs[u]^Ks[c]^Gs[f]^Vs[l]^Ws[m]^Pt[h],i=Qs[o+1]^Zs[a+1]^Xs[u+1]^Ks[c+1]^Gs[f+1]^Vs[l+1]^Ws[m+1]^Pt[h+1]}for(;s<r;){const o=((i^e[s])&255)<<1;i=(i>>>8|(n&255)<<24)>>>0,n=n>>>8^Pt[o],i^=Pt[o+1],s++}this.c1=n,this.c2=i}async digest(){const e=this.c1^4294967295,r=this.c2^4294967295;return new Uint8Array([e>>>24,e>>>16&255,e>>>8&255,e&255,r>>>24,r>>>16&255,r>>>8&255,r&255])}reset(){this.c1=4294967295,this.c2=4294967295}}var sh=(function(){function t(){this.crc32=new yr}return t.prototype.update=function(e){qt(e)||this.crc32.update(Ye(e))},t.prototype.digest=function(){return xn(this,void 0,void 0,function(){return bn(this,function(e){return[2,hc(this.crc32.digest())]})})},t.prototype.reset=function(){this.crc32=new yr},t})(),yr=(function(){function t(){this.checksum=4294967295}return t.prototype.update=function(e){var r,s;try{for(var n=fc(e),i=n.next();!i.done;i=n.next()){var o=i.value;this.checksum=this.checksum>>>8^ih[(this.checksum^o)&255]}}catch(a){r={error:a}}finally{try{i&&!i.done&&(s=n.return)&&s.call(n)}finally{if(r)throw r.error}}return this},t.prototype.digest=function(){return(this.checksum^4294967295)>>>0},t})(),nh=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],ih=pc(nh);const oh=()=>sh,mc=(t,e)=>{switch(t){case K.MD5:return e.md5;case K.CRC32:return oh();case K.CRC32C:return Qf;case K.CRC64NVME:return rh;case K.SHA1:return e.sha1;case K.SHA256:return e.sha256;default:throw new Error(`Unsupported checksum algorithm: ${t}`)}},gc=(t,e)=>{const r=new t;return r.update(Ct(e||"")),r.digest()},ah={name:"flexibleChecksumsMiddleware",step:"build",tags:["BODY_CHECKSUM"],override:!0},ch=(t,e)=>(r,s)=>async n=>{if(!ae.isInstance(n.request)||Kf("x-amz-checksum-",n.request.headers))return r(n);const{request:i,input:o}=n,{body:a,headers:u}=i,{base64Encoder:c,streamHasher:f}=t,{requestChecksumRequired:l,requestAlgorithmMember:m}=e,h=await t.requestChecksumCalculation(),S=m?.name,A=m?.httpHeader;S&&!o[S]&&(h===bt.WHEN_SUPPORTED||l)&&(o[S]=Ns,A&&(u[A]=Ns));const b=Vf(o,{requestChecksumRequired:l,requestAlgorithmMember:m?.name,requestChecksumCalculation:h});let v=a,_=u;if(b){switch(b){case K.CRC32:se(s,"FLEXIBLE_CHECKSUMS_REQ_CRC32","U");break;case K.CRC32C:se(s,"FLEXIBLE_CHECKSUMS_REQ_CRC32C","V");break;case K.CRC64NVME:se(s,"FLEXIBLE_CHECKSUMS_REQ_CRC64","W");break;case K.SHA1:se(s,"FLEXIBLE_CHECKSUMS_REQ_SHA1","X");break;case K.SHA256:se(s,"FLEXIBLE_CHECKSUMS_REQ_SHA256","Y");break}const I=wn(b),M=mc(b,t);if(dc(a)){const{getAwsChunkedEncodingStream:W,bodyLengthChecker:ue}=t;v=W(typeof t.requestStreamBufferSize=="number"&&t.requestStreamBufferSize>=8*1024?Fl(a,t.requestStreamBufferSize,s.logger):a,{base64Encoder:c,bodyLengthChecker:ue,checksumLocationName:I,checksumAlgorithmFn:M,streamHasher:f}),_={...u,"content-encoding":u["content-encoding"]?`${u["content-encoding"]},aws-chunked`:"aws-chunked","transfer-encoding":"chunked","x-amz-decoded-content-length":u["content-length"],"x-amz-content-sha256":"STREAMING-UNSIGNED-PAYLOAD-TRAILER","x-amz-trailer":I},delete _["content-length"]}else if(!Gf(I,u)){const W=await gc(M,a);_={...u,[I]:c(W)}}}try{return await r({...n,request:{...i,headers:_,body:v}})}catch(I){if(I instanceof Error&&I.name==="InvalidChunkSizeError")try{I.message.endsWith(".")||(I.message+="."),I.message+=" Set [requestStreamBufferSize=number e.g. 65_536] in client constructor to instruct AWS SDK to buffer your input stream."}catch{}throw I}},uh={name:"flexibleChecksumsInputMiddleware",toMiddleware:"serializerMiddleware",relation:"before",tags:["BODY_CHECKSUM"],override:!0},lh=(t,e)=>(r,s)=>async n=>{const i=n.input,{requestValidationModeMember:o}=e,a=await t.requestChecksumCalculation(),u=await t.responseChecksumValidation();switch(a){case bt.WHEN_REQUIRED:se(s,"FLEXIBLE_CHECKSUMS_REQ_WHEN_REQUIRED","a");break;case bt.WHEN_SUPPORTED:se(s,"FLEXIBLE_CHECKSUMS_REQ_WHEN_SUPPORTED","Z");break}switch(u){case zr.WHEN_REQUIRED:se(s,"FLEXIBLE_CHECKSUMS_RES_WHEN_REQUIRED","c");break;case zr.WHEN_SUPPORTED:se(s,"FLEXIBLE_CHECKSUMS_RES_WHEN_SUPPORTED","b");break}return o&&!i[o]&&u===zr.WHEN_SUPPORTED&&(i[o]="ENABLED"),r(n)},yc=(t=[])=>{const e=[];for(const r of Wf)!t.includes(r)||!qs.includes(r)||e.push(r);return e},dh=t=>{const e=t.lastIndexOf("-");if(e!==-1){const r=t.slice(e+1);if(!r.startsWith("0")){const s=parseInt(r,10);if(!isNaN(s)&&s>=1&&s<=1e4)return!0}}return!1},fh=async(t,{checksumAlgorithmFn:e,base64Encoder:r})=>r(await gc(e,t)),hh=async(t,{config:e,responseAlgorithms:r,logger:s})=>{const n=yc(r),{body:i,headers:o}=t;for(const a of n){const u=wn(a),c=o[u];if(c){let f;try{f=mc(a,e)}catch(h){if(a===K.CRC64NVME){s?.warn(`Skipping ${K.CRC64NVME} checksum validation: ${h.message}`);continue}throw h}const{base64Encoder:l}=e;if(dc(i)){t.body=Ol({expectedChecksum:c,checksumSourceLocation:u,checksum:new f,source:i,base64Encoder:l});return}const m=await fh(i,{checksumAlgorithmFn:f,base64Encoder:l});if(m===c)break;throw new Error(`Checksum mismatch: expected "${m}" but received "${c}" in response header "${u}".`)}}},ph={name:"flexibleChecksumsResponseMiddleware",toMiddleware:"deserializerMiddleware",relation:"after",tags:["BODY_CHECKSUM"],override:!0},mh=(t,e)=>(r,s)=>async n=>{if(!ae.isInstance(n.request))return r(n);const i=n.input,o=await r(n),a=o.response,{requestValidationModeMember:u,responseAlgorithms:c}=e;if(u&&i[u]==="ENABLED"){const{clientName:f,commandName:l}=s;if(f==="S3Client"&&l==="GetObjectCommand"&&yc(c).every(h=>{const S=wn(h),A=a.headers[S];return!A||dh(A)}))return o;await hh(a,{config:t,responseAlgorithms:c,logger:s.logger})}return o},Sc=(t,e)=>({applyToStack:r=>{r.add(ch(t,e),ah),r.addRelativeTo(lh(t,e),uh),r.addRelativeTo(mh(t,e),ph)}}),gh=t=>{const{requestChecksumCalculation:e,responseChecksumValidation:r,requestStreamBufferSize:s}=t;return Object.assign(t,{requestChecksumCalculation:Me(e??yl),responseChecksumValidation:Me(r??Sl),requestStreamBufferSize:Number(s??0)})};const yh=t=>e=>async r=>{if(!ae.isInstance(r.request))return e(r);const{request:s}=r,{handlerProtocol:n=""}=t.requestHandler.metadata||{};if(n.indexOf("h2")>=0&&!s.headers[":authority"])delete s.headers.host,s.headers[":authority"]=s.hostname+(s.port?":"+s.port:"");else if(!s.headers.host){let i=s.hostname;s.port!=null&&(i+=`:${s.port}`),s.headers.host=i}return e(r)},Sh={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},wh=t=>({applyToStack:e=>{e.add(yh(t),Sh)}}),xh=()=>(t,e)=>async r=>{try{const s=await t(r),{clientName:n,commandName:i,logger:o,dynamoDbDocumentClientOptions:a={}}=e,{overrideInputFilterSensitiveLog:u,overrideOutputFilterSensitiveLog:c}=a,f=u??e.inputFilterSensitiveLog,l=c??e.outputFilterSensitiveLog,{$metadata:m,...h}=s.output;return o?.info?.({clientName:n,commandName:i,input:f(r.input),output:l(h),metadata:m}),s}catch(s){const{clientName:n,commandName:i,logger:o,dynamoDbDocumentClientOptions:a={}}=e,{overrideInputFilterSensitiveLog:u}=a,c=u??e.inputFilterSensitiveLog;throw o?.error?.({clientName:n,commandName:i,input:c(r.input),error:s,metadata:s.$metadata}),s}},bh={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},Eh=t=>({applyToStack:e=>{e.add(xh(),bh)}}),Ch={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},Ah=()=>t=>async e=>t(e),_h=t=>({applyToStack:e=>{e.add(Ah(),Ch)}}),vh="content-length",Rh="x-amz-decoded-content-length";function kh(){return(t,e)=>async r=>{const{request:s}=r;if(ae.isInstance(s)&&!(vh in s.headers)&&!(Rh in s.headers)){const n="Are you using a Stream of unknown length as the Body of a PutObject request? Consider using Upload instead from @aws-sdk/lib-storage.";typeof e?.logger?.warn=="function"&&!(e.logger instanceof yn)?e.logger.warn(n):console.warn(n)}return t({...r})}}const Th={step:"finalizeRequest",tags:["CHECK_CONTENT_LENGTH_HEADER"],name:"getCheckContentLengthHeaderPlugin",override:!0},Dh=t=>({applyToStack:e=>{e.add(kh(),Th)}}),Bh=t=>(e,r)=>async s=>{const n=await t.region(),i=t.region;let o=()=>{};r.__s3RegionRedirect&&(Object.defineProperty(t,"region",{writable:!1,value:async()=>r.__s3RegionRedirect}),o=()=>Object.defineProperty(t,"region",{writable:!0,value:i}));try{const a=await e(s);if(r.__s3RegionRedirect){o();const u=await t.region();if(n!==u)throw new Error("Region was not restored following S3 region redirect.")}return a}catch(a){throw o(),a}},Ih={tags:["REGION_REDIRECT","S3"],name:"regionRedirectEndpointMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"};function Ph(t){return(e,r)=>async s=>{try{return await e(s)}catch(n){if(t.followRegionRedirects){const i=n?.$metadata?.httpStatusCode,o=r.commandName==="HeadBucketCommand",a=n?.$response?.headers?.["x-amz-bucket-region"];if(a&&(i===301||i===400&&(n?.name==="IllegalLocationConstraintException"||o))){try{const u=a;r.logger?.debug(`Redirecting from ${await t.region()} to ${u}`),r.__s3RegionRedirect=u}catch(u){throw new Error("Region redirect failed: "+u)}return e(s)}}throw n}}}const Mh={step:"initialize",tags:["REGION_REDIRECT","S3"],name:"regionRedirectMiddleware",override:!0},Nh=t=>({applyToStack:e=>{e.add(Ph(t),Mh),e.addRelativeTo(Bh(t),Ih)}}),Oh=t=>(e,r)=>async s=>{const n=await e(s),{response:i}=n;if(Qe.isInstance(i)&&i.headers.expires){i.headers.expiresstring=i.headers.expires;try{gd(i.headers.expires)}catch(o){r.logger?.warn(`AWS SDK Warning for ${r.clientName}::${r.commandName} response parsing (${i.headers.expires}): ${o}`),delete i.headers.expires}}return n},$h={tags:["S3"],name:"s3ExpiresMiddleware",override:!0,relation:"after",toMiddleware:"deserializerMiddleware"},Uh=t=>({applyToStack:e=>{e.addRelativeTo(Oh(),$h)}});class En{data;lastPurgeTime=Date.now();static EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS=3e4;constructor(e={}){this.data=e}get(e){const r=this.data[e];if(r)return r}set(e,r){return this.data[e]=r,r}delete(e){delete this.data[e]}async purgeExpired(){const e=Date.now();if(!(this.lastPurgeTime+En.EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS>e))for(const r in this.data){const s=this.data[r];if(!s.isRefreshing){const n=await s.identity;n.expiration&&n.expiration.getTime()<e&&delete this.data[r]}}}}class ss{_identity;isRefreshing;accessed;constructor(e,r=!1,s=Date.now()){this._identity=e,this.isRefreshing=r,this.accessed=s}get identity(){return this.accessed=Date.now(),this._identity}}class Cn{createSessionFn;cache;static REFRESH_WINDOW_MS=6e4;constructor(e,r=new En){this.createSessionFn=e,this.cache=r}async getS3ExpressIdentity(e,r){const s=r.Bucket,{cache:n}=this,i=n.get(s);return i?i.identity.then(o=>(o.expiration?.getTime()??0)<Date.now()?n.set(s,new ss(this.getIdentity(s))).identity:((o.expiration?.getTime()??0)<Date.now()+Cn.REFRESH_WINDOW_MS&&!i.isRefreshing&&(i.isRefreshing=!0,this.getIdentity(s).then(c=>{n.set(s,new ss(Promise.resolve(c)))})),o)):n.set(s,new ss(this.getIdentity(s))).identity}async getIdentity(e){await this.cache.purgeExpired().catch(n=>{console.warn(`Error while clearing expired entries in S3ExpressIdentityCache: 
`+n)});const r=await this.createSessionFn(e);if(!r.Credentials?.AccessKeyId||!r.Credentials?.SecretAccessKey)throw new Error("s3#createSession response credential missing AccessKeyId or SecretAccessKey.");return{accessKeyId:r.Credentials.AccessKeyId,secretAccessKey:r.Credentials.SecretAccessKey,sessionToken:r.Credentials.SessionToken,expiration:r.Credentials.Expiration?new Date(r.Credentials.Expiration):void 0}}}const Fh="Directory",Lh="S3Express",Hh="sigv4-s3express",Js="X-Amz-S3session-Token",Ys=Js.toLowerCase();class zh extends Hs{async signWithCredentials(e,r,s){const n=zi(r);e.headers[Ys]=r.sessionToken;const i=this;return ji(i,n),i.signRequest(e,s??{})}async presignWithCredentials(e,r,s){const n=zi(r);return delete e.headers[Ys],e.headers[Js]=r.sessionToken,e.query=e.query??{},e.query[Js]=r.sessionToken,ji(this,n),this.presign(e,s)}}function zi(t){return{accessKeyId:t.accessKeyId,secretAccessKey:t.secretAccessKey,expiration:t.expiration}}function ji(t,e){const r=setTimeout(()=>{throw new Error("SignatureV4S3Express credential override was created but not called.")},10),s=t.credentialProvider,n=()=>(clearTimeout(r),t.credentialProvider=s,Promise.resolve(e));t.credentialProvider=n}const jh=t=>(e,r)=>async s=>{if(r.endpointV2){const n=r.endpointV2,i=n.properties?.authSchemes?.[0]?.name===Hh;if((n.properties?.backend===Lh||n.properties?.bucketType===Fh)&&(se(r,"S3_EXPRESS_BUCKET","J"),r.isS3ExpressBucket=!0),i){const a=s.input.Bucket;if(a){const u=await t.s3ExpressIdentityProvider.getS3ExpressIdentity(await t.credentials(),{Bucket:a});r.s3ExpressIdentity=u,ae.isInstance(s.request)&&u.sessionToken&&(s.request.headers[Ys]=u.sessionToken)}}}return e(s)},qh={name:"s3ExpressMiddleware",step:"build",tags:["S3","S3_EXPRESS"],override:!0},Wh=t=>({applyToStack:e=>{e.add(jh(t),qh)}}),Vh=async(t,e,r,s)=>{const n=await s.signWithCredentials(r,t,{});if(n.headers["X-Amz-Security-Token"]||n.headers["x-amz-security-token"])throw new Error("X-Amz-Security-Token must not be set for s3-express requests.");return n},Gh=t=>e=>{throw e},Kh=(t,e)=>{},Xh=t=>(e,r)=>async s=>{if(!ae.isInstance(s.request))return e(s);const i=tt(r).selectedHttpAuthScheme;if(!i)throw new Error("No HttpAuthScheme was selected: unable to sign request");const{httpAuthOption:{signingProperties:o={}},identity:a,signer:u}=i;let c;r.s3ExpressIdentity?c=await Vh(r.s3ExpressIdentity,o,s.request,await t.signer()):c=await u.sign(s.request,a,o);const f=await e({...s,request:c}).catch((u.errorHandler||Gh)(o));return(u.successHandler||Kh)(f.response,o),f},Zh=t=>({applyToStack:e=>{e.addRelativeTo(Xh(t),ja)}}),Qh=(t,{session:e})=>{const[r,s]=e,{forcePathStyle:n,useAccelerateEndpoint:i,disableMultiregionAccessPoints:o,followRegionRedirects:a,s3ExpressIdentityProvider:u,bucketEndpoint:c,expectContinueHeader:f}=t;return Object.assign(t,{forcePathStyle:n??!1,useAccelerateEndpoint:i??!1,disableMultiregionAccessPoints:o??!1,followRegionRedirects:a??!1,s3ExpressIdentityProvider:u??new Cn(async l=>r().send(new s({Bucket:l}))),bucketEndpoint:c??!1,expectContinueHeader:f??2097152})},Jh={CopyObjectCommand:!0,UploadPartCopyCommand:!0,CompleteMultipartUploadCommand:!0},Yh=3e3,ep=t=>(e,r)=>async s=>{const n=await e(s),{response:i}=n;if(!Qe.isInstance(i))return n;const{statusCode:o,body:a}=i;if(o<200||o>=300||!(typeof a?.stream=="function"||typeof a?.pipe=="function"||typeof a?.tee=="function"))return n;let c=a,f=a;a&&typeof a=="object"&&!(a instanceof Uint8Array)&&([c,f]=await Zl(a)),i.body=f;const l=await tp(c,{streamCollector:async h=>jl(h,Yh)});typeof c?.destroy=="function"&&c.destroy();const m=t.utf8Encoder(l.subarray(l.length-16));if(l.length===0&&Jh[r.commandName]){const h=new Error("S3 aborted request");throw h.name="InternalError",h}return m&&m.endsWith("</Error>")&&(i.statusCode=400),n},tp=(t=new Uint8Array,e)=>t instanceof Uint8Array?Promise.resolve(t):e.streamCollector(t)||Promise.resolve(new Uint8Array),rp={relation:"after",toMiddleware:"deserializerMiddleware",tags:["THROW_200_EXCEPTIONS","S3"],name:"throw200ExceptionsMiddleware",override:!0},wc=t=>({applyToStack:e=>{e.addRelativeTo(ep(t),rp)}}),sp=t=>typeof t=="string"&&t.indexOf("arn:")===0&&t.split(":").length>=6;function np(t){return(e,r)=>async s=>{if(t.bucketEndpoint){const n=r.endpointV2;if(n){const i=s.input.Bucket;if(typeof i=="string")try{const o=new URL(i);r.endpointV2={...n,url:o}}catch(o){const a=`@aws-sdk/middleware-sdk-s3: bucketEndpoint=true was set but Bucket=${i} could not be parsed as URL.`;throw r.logger?.constructor?.name==="NoOpLogger"?console.warn(a):r.logger?.warn?.(a),o}}}return e(s)}}const ip={name:"bucketEndpointMiddleware",override:!0,relation:"after",toMiddleware:"endpointV2Middleware"};function op({bucketEndpoint:t}){return e=>async r=>{const{input:{Bucket:s}}=r;if(!t&&typeof s=="string"&&!sp(s)&&s.indexOf("/")>=0){const n=new Error(`Bucket name shouldn't contain '/', received '${s}'`);throw n.name="InvalidBucketName",n}return e({...r})}}const ap={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},cp=t=>({applyToStack:e=>{e.add(op(t),ap),e.addRelativeTo(np(t),ip)}}),up=void 0;function lp(t){return t===void 0?!0:typeof t=="string"&&t.length<=50}function dp(t){const e=yt(t.userAgentAppId??up),{customUserAgent:r}=t;return Object.assign(t,{customUserAgent:typeof r=="string"?[[r]]:r,userAgentAppId:async()=>{const s=await e();if(!lp(s)){const n=t.logger?.constructor?.name==="NoOpLogger"||!t.logger?console:t.logger;typeof s!="string"?n?.warn("userAgentAppId must be a string or undefined."):s.length>50&&n?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return s}})}class fp{capacity;data=new Map;parameters=[];constructor({size:e,params:r}){this.capacity=e??50,r&&(this.parameters=r)}get(e,r){const s=this.hash(e);if(s===!1)return r();if(!this.data.has(s)){if(this.data.size>this.capacity+10){const n=this.data.keys();let i=0;for(;;){const{value:o,done:a}=n.next();if(this.data.delete(o),a||++i>10)break}}this.data.set(s,r())}return this.data.get(s)}size(){return this.data.size}hash(e){let r="";const{parameters:s}=this;if(s.length===0)return!1;for(const n of s){const i=String(e[n]??"");if(i.includes("|;"))return!1;r+=i+"|;"}return r}}const hp=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),An=t=>hp.test(t)||t.startsWith("[")&&t.endsWith("]"),pp=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),Kt=(t,e=!1)=>{if(!e)return pp.test(t);const r=t.split(".");for(const s of r)if(!Kt(s))return!1;return!0},Wt={},Vt="endpoints";function et(t){return typeof t!="object"||t==null?t:"ref"in t?`$${et(t.ref)}`:"fn"in t?`${t.fn}(${(t.argv||[]).map(et).join(", ")})`:JSON.stringify(t,null,2)}class De extends Error{constructor(e){super(e),this.name="EndpointError"}}const mp=(t,e)=>t===e,gp=t=>{const e=t.split("."),r=[];for(const s of e){const n=s.indexOf("[");if(n!==-1){if(s.indexOf("]")!==s.length-1)throw new De(`Path: '${t}' does not end with ']'`);const i=s.slice(n+1,-1);if(Number.isNaN(parseInt(i)))throw new De(`Invalid array index: '${i}' in path: '${t}'`);n!==0&&r.push(s.slice(0,n)),r.push(i)}else r.push(s)}return r},xc=(t,e)=>gp(e).reduce((r,s)=>{if(typeof r!="object")throw new De(`Index '${s}' in '${e}' not found in '${JSON.stringify(t)}'`);return Array.isArray(r)?r[parseInt(s)]:r[s]},t),yp=t=>t!=null,Sp=t=>!t,ns={[jt.HTTP]:80,[jt.HTTPS]:443},wp=t=>{const e=(()=>{try{if(t instanceof URL)return t;if(typeof t=="object"&&"hostname"in t){const{hostname:m,port:h,protocol:S="",path:A="",query:b={}}=t,v=new URL(`${S}//${m}${h?`:${h}`:""}${A}`);return v.search=Object.entries(b).map(([_,I])=>`${_}=${I}`).join("&"),v}return new URL(t)}catch{return null}})();if(!e)return console.error(`Unable to parse ${JSON.stringify(t)} as a whatwg URL.`),null;const r=e.href,{host:s,hostname:n,pathname:i,protocol:o,search:a}=e;if(a)return null;const u=o.slice(0,-1);if(!Object.values(jt).includes(u))return null;const c=An(n),f=r.includes(`${s}:${ns[u]}`)||typeof t=="string"&&t.includes(`${s}:${ns[u]}`),l=`${s}${f?`:${ns[u]}`:""}`;return{scheme:u,authority:l,path:i,normalizedPath:i.endsWith("/")?i:`${i}/`,isIp:c}},xp=(t,e)=>t===e,bp=(t,e,r,s)=>e>=r||t.length<r?null:s?t.substring(t.length-r,t.length-e):t.substring(e,r),Ep=t=>encodeURIComponent(t).replace(/[!*'()]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),Cp={booleanEquals:mp,getAttr:xc,isSet:yp,isValidHostLabel:Kt,not:Sp,parseURL:wp,stringEquals:xp,substring:bp,uriEncode:Ep},bc=(t,e)=>{const r=[],s={...e.endpointParams,...e.referenceRecord};let n=0;for(;n<t.length;){const i=t.indexOf("{",n);if(i===-1){r.push(t.slice(n));break}r.push(t.slice(n,i));const o=t.indexOf("}",i);if(o===-1){r.push(t.slice(i));break}t[i+1]==="{"&&t[o+1]==="}"&&(r.push(t.slice(i+1,o)),n=o+2);const a=t.substring(i+1,o);if(a.includes("#")){const[u,c]=a.split("#");r.push(xc(s[u],c))}else r.push(s[a]);n=o+1}return r.join("")},Ap=({ref:t},e)=>({...e.endpointParams,...e.referenceRecord})[t],Pr=(t,e,r)=>{if(typeof t=="string")return bc(t,r);if(t.fn)return Cc.callFunction(t,r);if(t.ref)return Ap(t,r);throw new De(`'${e}': ${String(t)} is not a string, function or reference.`)},Ec=({fn:t,argv:e},r)=>{const s=e.map(i=>["boolean","number"].includes(typeof i)?i:Cc.evaluateExpression(i,"arg",r)),n=t.split(".");return n[0]in Wt&&n[1]!=null?Wt[n[0]][n[1]](...s):Cp[t](...s)},Cc={evaluateExpression:Pr,callFunction:Ec},_p=({assign:t,...e},r)=>{if(t&&t in r.referenceRecord)throw new De(`'${t}' is already defined in Reference Record.`);const s=Ec(e,r);return r.logger?.debug?.(`${Vt} evaluateCondition: ${et(e)} = ${et(s)}`),{result:s===""?!0:!!s,...t!=null&&{toAssign:{name:t,value:s}}}},_n=(t=[],e)=>{const r={};for(const s of t){const{result:n,toAssign:i}=_p(s,{...e,referenceRecord:{...e.referenceRecord,...r}});if(!n)return{result:n};i&&(r[i.name]=i.value,e.logger?.debug?.(`${Vt} assign: ${i.name} := ${et(i.value)}`))}return{result:!0,referenceRecord:r}},vp=(t,e)=>Object.entries(t).reduce((r,[s,n])=>({...r,[s]:n.map(i=>{const o=Pr(i,"Header value entry",e);if(typeof o!="string")throw new De(`Header '${s}' value '${o}' is not a string`);return o})}),{}),Ac=(t,e)=>Object.entries(t).reduce((r,[s,n])=>({...r,[s]:vc.getEndpointProperty(n,e)}),{}),_c=(t,e)=>{if(Array.isArray(t))return t.map(r=>_c(r,e));switch(typeof t){case"string":return bc(t,e);case"object":if(t===null)throw new De(`Unexpected endpoint property: ${t}`);return vc.getEndpointProperties(t,e);case"boolean":return t;default:throw new De(`Unexpected endpoint property type: ${typeof t}`)}},vc={getEndpointProperty:_c,getEndpointProperties:Ac},Rp=(t,e)=>{const r=Pr(t,"Endpoint URL",e);if(typeof r=="string")try{return new URL(r)}catch(s){throw console.error(`Failed to construct URL with ${r}`,s),s}throw new De(`Endpoint URL must be a string, got ${typeof r}`)},kp=(t,e)=>{const{conditions:r,endpoint:s}=t,{result:n,referenceRecord:i}=_n(r,e);if(!n)return;const o={...e,referenceRecord:{...e.referenceRecord,...i}},{url:a,properties:u,headers:c}=s;return e.logger?.debug?.(`${Vt} Resolving endpoint from template: ${et(s)}`),{...c!=null&&{headers:vp(c,o)},...u!=null&&{properties:Ac(u,o)},url:Rp(a,o)}},Tp=(t,e)=>{const{conditions:r,error:s}=t,{result:n,referenceRecord:i}=_n(r,e);if(n)throw new De(Pr(s,"Error",{...e,referenceRecord:{...e.referenceRecord,...i}}))},Rc=(t,e)=>{for(const r of t)if(r.type==="endpoint"){const s=kp(r,e);if(s)return s}else if(r.type==="error")Tp(r,e);else if(r.type==="tree"){const s=kc.evaluateTreeRule(r,e);if(s)return s}else throw new De(`Unknown endpoint rule: ${r}`);throw new De("Rules evaluation failed")},Dp=(t,e)=>{const{conditions:r,rules:s}=t,{result:n,referenceRecord:i}=_n(r,e);if(n)return kc.evaluateRules(s,{...e,referenceRecord:{...e.referenceRecord,...i}})},kc={evaluateRules:Rc,evaluateTreeRule:Dp},Bp=(t,e)=>{const{endpointParams:r,logger:s}=e,{parameters:n,rules:i}=t;e.logger?.debug?.(`${Vt} Initial EndpointParams: ${et(r)}`);const o=Object.entries(n).filter(([,c])=>c.default!=null).map(([c,f])=>[c,f.default]);if(o.length>0)for(const[c,f]of o)r[c]=r[c]??f;const a=Object.entries(n).filter(([,c])=>c.required).map(([c])=>c);for(const c of a)if(r[c]==null)throw new De(`Missing required parameter: '${c}'`);const u=Rc(i,{endpointParams:r,logger:s,referenceRecord:{}});return e.logger?.debug?.(`${Vt} Resolved endpoint: ${et(u)}`),u},Tc=(t,e=!1)=>{if(e){for(const r of t.split("."))if(!Tc(r))return!1;return!0}return!(!Kt(t)||t.length<3||t.length>63||t!==t.toLowerCase()||An(t))},qi=":",Ip="/",Pp=t=>{const e=t.split(qi);if(e.length<6)return null;const[r,s,n,i,o,...a]=e;if(r!=="arn"||s===""||n===""||a.join(qi)==="")return null;const u=a.map(c=>c.split(Ip)).flat();return{partition:s,service:n,region:i,accountId:o,resourceId:u}},Mp=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-east-2":{description:"Asia Pacific (Taipei)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-6":{description:"Asia Pacific (New Zealand)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"aws global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"mx-central-1":{description:"Mexico (Central)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"aws-cn global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-eusc",outputs:{dnsSuffix:"amazonaws.eu",dualStackDnsSuffix:"api.amazonwebservices.eu",implicitGlobalRegion:"eusc-de-east-1",name:"aws-eusc",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eusc\\-(de)\\-\\w+\\-\\d+$",regions:{"eusc-de-east-1":{description:"AWS European Sovereign Cloud (Germany)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"api.aws.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"aws-iso global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"api.aws.scloud",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"aws-iso-b global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"},"us-isob-west-1":{description:"US ISOB West"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"api.cloud-aws.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"aws-iso-e-global":{description:"aws-iso-e global region"},"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"api.aws.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{"aws-iso-f-global":{description:"aws-iso-f global region"},"us-isof-east-1":{description:"US ISOF EAST"},"us-isof-south-1":{description:"US ISOF SOUTH"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"aws-us-gov global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}}],Np={partitions:Mp};let Op=Np;const $p=t=>{const{partitions:e}=Op;for(const s of e){const{regions:n,outputs:i}=s;for(const[o,a]of Object.entries(n))if(o===t)return{...i,...a}}for(const s of e){const{regionRegex:n,outputs:i}=s;if(new RegExp(n).test(t))return{...i}}const r=e.find(s=>s.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}},Up={isVirtualHostableS3Bucket:Tc,parseArn:Pp,partition:$p};Wt.aws=Up;function Fp(t){const e={};if(t=t.replace(/^\?/,""),t)for(const r of t.split("&")){let[s,n=null]=r.split("=");s=decodeURIComponent(s),n&&(n=decodeURIComponent(n)),s in e?Array.isArray(e[s])?e[s].push(n):e[s]=[e[s],n]:e[s]=n}return e}const Sr=t=>{if(typeof t=="string")return Sr(new URL(t));const{hostname:e,pathname:r,port:s,protocol:n,search:i}=t;let o;return i&&(o=Fp(i)),{hostname:e,port:s?parseInt(s):void 0,protocol:n,path:r,query:o}},Lp=/\d{12}\.ddb/;async function Hp(t,e,r){if(r.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor"&&se(t,"PROTOCOL_RPC_V2_CBOR","M"),typeof e.retryStrategy=="function"){const i=await e.retryStrategy();typeof i.acquireInitialRetryToken=="function"?i.constructor?.name?.includes("Adaptive")?se(t,"RETRY_MODE_ADAPTIVE","F"):se(t,"RETRY_MODE_STANDARD","E"):se(t,"RETRY_MODE_LEGACY","D")}if(typeof e.accountIdEndpointMode=="function"){const i=t.endpointV2;switch(String(i?.url?.hostname).match(Lp)&&se(t,"ACCOUNT_ID_ENDPOINT","O"),await e.accountIdEndpointMode?.()){case"disabled":se(t,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":se(t,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":se(t,"ACCOUNT_ID_MODE_REQUIRED","R");break}}const n=t.__smithy_context?.selectedHttpAuthScheme?.identity;if(n?.$source){const i=n;i.accountId&&se(t,"RESOLVED_ACCOUNT_ID","T");for(const[o,a]of Object.entries(i.$source??{}))se(t,o,a)}}const Wi="user-agent",is="x-amz-user-agent",Vi=" ",os="/",zp=/[^!$%&'*+\-.^_`|~\w]/g,jp=/[^!$%&'*+\-.^_`|~\w#]/g,Gi="-",qp=1024;function Wp(t){let e="";for(const r in t){const s=t[r];if(e.length+s.length+1<=qp){e.length?e+=","+s:e+=s;continue}break}return e}const Vp=t=>(e,r)=>async s=>{const{request:n}=s;if(!ae.isInstance(n))return e(s);const{headers:i}=n,o=r?.userAgent?.map(ir)||[],a=(await t.defaultUserAgentProvider()).map(ir);await Hp(r,t,s);const u=r;a.push(`m/${Wp(Object.assign({},r.__smithy_context?.features,u.__aws_sdk_context?.features))}`);const c=t?.customUserAgent?.map(ir)||[],f=await t.userAgentAppId();f&&a.push(ir(["app",`${f}`]));const l=[].concat([...a,...o,...c]).join(Vi),m=[...a.filter(h=>h.startsWith("aws-sdk-")),...c].join(Vi);return t.runtime!=="browser"?(m&&(i[is]=i[is]?`${i[Wi]} ${m}`:m),i[Wi]=l):i[is]=l,e({...s,request:n})},ir=t=>{const e=t[0].split(os).map(o=>o.replace(zp,Gi)).join(os),r=t[1]?.replace(jp,Gi),s=e.indexOf(os),n=e.substring(0,s);let i=e.substring(s+1);return n==="api"&&(i=i.toLowerCase()),[n,i,r].filter(o=>o&&o.length>0).reduce((o,a,u)=>{switch(u){case 0:return a;case 1:return`${o}/${a}`;default:return`${o}#${a}`}},"")},Gp={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},Kp=t=>({applyToStack:e=>{e.add(Vp(t),Gp)}}),Xp=!1,Zp=!1,Ki=new Set,Qp=(t,e=Kt)=>{if(!Ki.has(t)&&!e(t))if(t==="*")console.warn('@smithy/config-resolver WARN - Please use the caller region instead of "*". See "sigv4a" in https://github.com/aws/aws-sdk-js-v3/blob/main/supplemental-docs/CLIENTS.md.');else throw new Error(`Region not accepted: region="${t}" is not a valid hostname component.`);else Ki.add(t)},Dc=t=>typeof t=="string"&&(t.startsWith("fips-")||t.endsWith("-fips")),Jp=t=>Dc(t)?["fips-aws-global","aws-fips"].includes(t)?"us-east-1":t.replace(/fips-(dkr-|prod-)?|-fips/,""):t,Yp=t=>{const{region:e,useFipsEndpoint:r}=t;if(!e)throw new Error("Region is missing");return Object.assign(t,{region:async()=>{const s=typeof e=="function"?await e():e,n=Jp(s);return Qp(n),n},useFipsEndpoint:async()=>{const s=typeof e=="string"?e:await e();return Dc(s)?!0:typeof r!="function"?Promise.resolve(!!r):r()}})},em=t=>Object.assign(t,{eventStreamMarshaller:t.eventStreamSerdeProvider(t)}),Xi="content-length";function tm(t){return e=>async r=>{const s=r.request;if(ae.isInstance(s)){const{body:n,headers:i}=s;if(n&&Object.keys(i).map(o=>o.toLowerCase()).indexOf(Xi)===-1)try{const o=t(n);s.headers={...s.headers,[Xi]:String(o)}}catch{}}return e({...r,request:s})}}const rm={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},sm=t=>({applyToStack:e=>{e.add(tm(t.bodyLengthChecker),rm)}}),nm=async t=>{const e=t?.Bucket||"";if(typeof t.Bucket=="string"&&(t.Bucket=e.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),um(e)){if(t.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!cm(e)||e.indexOf(".")!==-1&&!String(t.Endpoint).startsWith("http:")||e.toLowerCase()!==e||e.length<3)&&(t.ForcePathStyle=!0);return t.DisableMultiRegionAccessPoints&&(t.disableMultiRegionAccessPoints=!0,t.DisableMRAP=!0),t},im=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,om=/(\d+\.){3}\d+/,am=/\.\./,cm=t=>im.test(t)&&!om.test(t)&&!am.test(t),um=t=>{const[e,r,s,,,n]=t.split(":"),i=e==="arn"&&t.split(":").length>=6,o=!!(i&&r&&s&&n);if(i&&!o)throw new Error(`Invalid ARN: ${t} was an invalid ARN.`);return o},lm=(t,e,r,s=!1)=>{const n=async()=>{let i;return s?i=r.clientContextParams?.[t]??r[t]??r[e]:i=r[t]??r[e],typeof i=="function"?i():i};return t==="credentialScope"||e==="CredentialScope"?async()=>{const i=typeof r.credentials=="function"?await r.credentials():r.credentials;return i?.credentialScope??i?.CredentialScope}:t==="accountId"||e==="AccountId"?async()=>{const i=typeof r.credentials=="function"?await r.credentials():r.credentials;return i?.accountId??i?.AccountId}:t==="endpoint"||e==="endpoint"?async()=>{if(r.isCustomEndpoint===!1)return;const i=await n();if(i&&typeof i=="object"){if("url"in i)return i.url.href;if("hostname"in i){const{protocol:o,hostname:a,port:u,path:c}=i;return`${o}//${a}${u?":"+u:""}${c}`}}return i}:n},Bc=async t=>{},Ic=t=>typeof t=="object"?"url"in t?Sr(t.url):t:Sr(t),dm=async(t,e,r,s)=>{if(!r.isCustomEndpoint){let o;r.serviceConfiguredEndpoint?o=await r.serviceConfiguredEndpoint():o=await Bc(r.serviceId),o&&(r.endpoint=()=>Promise.resolve(Ic(o)),r.isCustomEndpoint=!0)}const n=await Pc(t,e,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(n,s)},Pc=async(t,e,r)=>{const s={},n=e?.getEndpointParameterInstructions?.()||{};for(const[i,o]of Object.entries(n))switch(o.type){case"staticContextParams":s[i]=o.value;break;case"contextParams":s[i]=t[o.name];break;case"clientContextParams":case"builtInParams":s[i]=await lm(o.name,i,r,o.type!=="builtInParams")();break;case"operationContextParams":s[i]=o.get(t);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(o))}return Object.keys(n).length===0&&Object.assign(s,r),String(r.serviceId).toLowerCase()==="s3"&&await nm(s),s},fm=({config:t,instructions:e})=>(r,s)=>async n=>{t.isCustomEndpoint&&zd(s,"ENDPOINT_OVERRIDE","N");const i=await dm(n.input,{getEndpointParameterInstructions(){return e}},{...t},s);s.endpointV2=i,s.authSchemes=i.properties?.authSchemes;const o=s.authSchemes?.[0];if(o){s.signing_region=o.signingRegion,s.signing_service=o.signingName;const u=tt(s)?.selectedHttpAuthScheme?.httpAuthOption;u&&(u.signingProperties=Object.assign(u.signingProperties||{},{signing_region:o.signingRegion,signingRegion:o.signingRegion,signing_service:o.signingName,signingName:o.signingName,signingRegionSet:o.signingRegionSet},o.properties))}return r({...n})},hm={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:Rl.name},vn=(t,e)=>({applyToStack:r=>{r.addRelativeTo(fm({config:t,instructions:e}),hm)}}),pm=t=>{const e=t.tls??!0,{endpoint:r,useDualstackEndpoint:s,useFipsEndpoint:n}=t,i=r!=null?async()=>Ic(await Me(r)()):void 0,a=Object.assign(t,{endpoint:i,tls:e,isCustomEndpoint:!!r,useDualstackEndpoint:Me(s??!1),useFipsEndpoint:Me(n??!1)});let u;return a.serviceConfiguredEndpoint=async()=>(t.serviceId&&!u&&(u=Bc(t.serviceId)),u),a};var At;(function(t){t.STANDARD="standard",t.ADAPTIVE="adaptive"})(At||(At={}));const wr=3,mm=At.STANDARD,gm=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],ym=["TimeoutError","RequestTimeout","RequestTimeoutException"],Sm=[500,502,503,504],wm=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],xm=["EHOSTUNREACH","ENETUNREACH","ENOTFOUND"],bm=t=>t?.$retryable!==void 0,Em=t=>t.$metadata?.clockSkewCorrected,Cm=t=>{const e=new Set(["Failed to fetch","NetworkError when attempting to fetch resource","The Internet connection appears to be offline","Load failed","Network request failed"]);return t&&t instanceof TypeError?e.has(t.message):!1},Mc=t=>t.$metadata?.httpStatusCode===429||gm.includes(t.name)||t.$retryable?.throttling==!0,Rn=(t,e=0)=>bm(t)||Em(t)||ym.includes(t.name)||wm.includes(t?.code||"")||xm.includes(t?.code||"")||Sm.includes(t.$metadata?.httpStatusCode||0)||Cm(t)||t.cause!==void 0&&e<=10&&Rn(t.cause,e+1),Am=t=>{if(t.$metadata?.httpStatusCode!==void 0){const e=t.$metadata.httpStatusCode;return 500<=e&&e<=599&&!Rn(t)}return!1};class kn{static setTimeoutFn=setTimeout;beta;minCapacity;minFillRate;scaleConstant;smooth;currentCapacity=0;enabled=!1;lastMaxRate=0;measuredTxRate=0;requestCount=0;fillRate;lastThrottleTime;lastTimestamp=0;lastTxRateBucket;maxCapacity;timeWindow=0;constructor(e){this.beta=e?.beta??.7,this.minCapacity=e?.minCapacity??1,this.minFillRate=e?.minFillRate??.5,this.scaleConstant=e?.scaleConstant??.4,this.smooth=e?.smooth??.8;const r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(e){if(this.enabled){if(this.refillTokenBucket(),e>this.currentCapacity){const r=(e-this.currentCapacity)/this.fillRate*1e3;await new Promise(s=>kn.setTimeoutFn(s,r))}this.currentCapacity=this.currentCapacity-e}}refillTokenBucket(){const e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=e;return}const r=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=e}updateClientSendingRate(e){let r;if(this.updateMeasuredRate(),Mc(e)){const n=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=n,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(n),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());const s=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(s)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){const e=this.getCurrentTimeInSeconds(),r=Math.floor(e*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){const s=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(s*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(e){return parseFloat(e.toFixed(8))}}const en=100,Nc=20*1e3,_m=500,Zi=500,vm=5,Rm=10,km=1,Tm="amz-sdk-invocation-id",Dm="amz-sdk-request",Bm=()=>{let t=en;return{computeNextBackoffDelay:s=>Math.floor(Math.min(Nc,Math.random()*2**s*t)),setDelayBase:s=>{t=s}}},Qi=({retryDelay:t,retryCount:e,retryCost:r})=>({getRetryCount:()=>e,getRetryDelay:()=>Math.min(Nc,t),getRetryCost:()=>r});class Oc{maxAttempts;mode=At.STANDARD;capacity=Zi;retryBackoffStrategy=Bm();maxAttemptsProvider;constructor(e){this.maxAttempts=e,this.maxAttemptsProvider=typeof e=="function"?e:async()=>e}async acquireInitialRetryToken(e){return Qi({retryDelay:en,retryCount:0})}async refreshRetryTokenForRetry(e,r){const s=await this.getMaxAttempts();if(this.shouldRetry(e,r,s)){const n=r.errorType;this.retryBackoffStrategy.setDelayBase(n==="THROTTLING"?_m:en);const i=this.retryBackoffStrategy.computeNextBackoffDelay(e.getRetryCount()),o=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,i):i,a=this.getCapacityCost(n);return this.capacity-=a,Qi({retryDelay:o,retryCount:e.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(e){this.capacity=Math.max(Zi,this.capacity+(e.getRetryCost()??km))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${wr}`),wr}}shouldRetry(e,r,s){return e.getRetryCount()+1<s&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(e){return e==="TRANSIENT"?Rm:vm}isRetryableError(e){return e==="THROTTLING"||e==="TRANSIENT"}}class Im{maxAttemptsProvider;rateLimiter;standardRetryStrategy;mode=At.ADAPTIVE;constructor(e,r){this.maxAttemptsProvider=e;const{rateLimiter:s}=r??{};this.rateLimiter=s??new kn,this.standardRetryStrategy=new Oc(e)}async acquireInitialRetryToken(e){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)}async refreshRetryTokenForRetry(e,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(e,r)}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}}const Pm=t=>t instanceof Error?t:t instanceof Object?Object.assign(new Error,t):typeof t=="string"?new Error(t):new Error(`AWS SDK error wrapper for ${t}`),Mm=t=>{const{retryStrategy:e,retryMode:r,maxAttempts:s}=t,n=Me(s??wr);return Object.assign(t,{maxAttempts:n,retryStrategy:async()=>e||(await Me(r)()===At.ADAPTIVE?new Im(n):new Oc(n))})},Nm=t=>t?.body instanceof ReadableStream,Om=t=>(e,r)=>async s=>{let n=await t.retryStrategy();const i=await t.maxAttempts();if($m(n)){n=n;let o=await n.acquireInitialRetryToken(r.partition_id),a=new Error,u=0,c=0;const{request:f}=s,l=ae.isInstance(f);for(l&&(f.headers[Tm]=fn());;)try{l&&(f.headers[Dm]=`attempt=${u+1}; max=${i}`);const{response:m,output:h}=await e(s);return n.recordSuccess(o),h.$metadata.attempts=u+1,h.$metadata.totalRetryDelay=c,{response:m,output:h}}catch(m){const h=Um(m);if(a=Pm(m),l&&Nm(f))throw(r.logger instanceof yn?console:r.logger)?.warn("An error was encountered in a non-retryable streaming request."),a;try{o=await n.refreshRetryTokenForRetry(o,h)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=u+1,a.$metadata.totalRetryDelay=c,a}u=o.getRetryCount();const S=o.getRetryDelay();c+=S,await new Promise(A=>setTimeout(A,S))}}else return n=n,n?.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",n.mode]]),n.retry(e,s)},$m=t=>typeof t.acquireInitialRetryToken<"u"&&typeof t.refreshRetryTokenForRetry<"u"&&typeof t.recordSuccess<"u",Um=t=>{const e={error:t,errorType:Fm(t)},r=zm(t.$response);return r&&(e.retryAfterHint=r),e},Fm=t=>Mc(t)?"THROTTLING":Rn(t)?"TRANSIENT":Am(t)?"SERVER_ERROR":"CLIENT_ERROR",Lm={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},Hm=t=>({applyToStack:e=>{e.add(Om(t),Lm)}}),zm=t=>{if(!Qe.isInstance(t))return;const e=Object.keys(t.headers).find(i=>i.toLowerCase()==="retry-after");if(!e)return;const r=t.headers[e],s=Number(r);return Number.isNaN(s)?new Date(r):new Date(s*1e3)};class $c{sigv4aSigner;sigv4Signer;signerOptions;static sigv4aDependency(){return"none"}constructor(e){this.sigv4Signer=new zh(e),this.signerOptions=e}async sign(e,r={}){return r.signingRegion==="*"?this.getSigv4aSigner().sign(e,r):this.sigv4Signer.sign(e,r)}async signWithCredentials(e,r,s={}){if(s.signingRegion==="*")throw this.getSigv4aSigner(),new Error(`signWithCredentials with signingRegion '*' is only supported when using the CRT dependency @aws-sdk/signature-v4-crt. Please check whether you have installed the "@aws-sdk/signature-v4-crt" package explicitly. You must also register the package by calling [require("@aws-sdk/signature-v4-crt");] or an ESM equivalent such as [import "@aws-sdk/signature-v4-crt";]. For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`);return this.sigv4Signer.signWithCredentials(e,r,s)}async presign(e,r={}){if(r.signingRegion==="*")throw this.getSigv4aSigner(),new Error(`presign with signingRegion '*' is only supported when using the CRT dependency @aws-sdk/signature-v4-crt. Please check whether you have installed the "@aws-sdk/signature-v4-crt" package explicitly. You must also register the package by calling [require("@aws-sdk/signature-v4-crt");] or an ESM equivalent such as [import "@aws-sdk/signature-v4-crt";]. For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`);return this.sigv4Signer.presign(e,r)}async presignWithCredentials(e,r,s={}){if(s.signingRegion==="*")throw new Error("Method presignWithCredentials is not supported for [signingRegion=*].");return this.sigv4Signer.presignWithCredentials(e,r,s)}getSigv4aSigner(){if(!this.sigv4aSigner)throw this.signerOptions.runtime==="node"?new Error("Neither CRT nor JS SigV4a implementation is available. Please load either @aws-sdk/signature-v4-crt or @aws-sdk/signature-v4a. For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt"):new Error("JS SigV4a implementation is not available or not a valid constructor. Please check whether you have installed the @aws-sdk/signature-v4a package explicitly. The CRT implementation is not available for browsers. You must also register the package by calling [require('@aws-sdk/signature-v4a');] or an ESM equivalent such as [import '@aws-sdk/signature-v4a';]. For more information please go to https://github.com/aws/aws-sdk-js-v3#using-javascript-non-crt-implementation-of-sigv4a");return this.sigv4aSigner}}const Uc=(t,e=!1)=>{if(e){for(const r of t.split("."))if(!Uc(r))return!1;return!0}return!(!Kt(t)||t.length<3||t.length>63||t!==t.toLowerCase()||An(t))},Ji=":",jm="/",qm=t=>{const e=t.split(Ji);if(e.length<6)return null;const[r,s,n,i,o,...a]=e;if(r!=="arn"||s===""||n===""||a.join(Ji)==="")return null;const u=a.map(c=>c.split(jm)).flat();return{partition:s,service:n,region:i,accountId:o,resourceId:u}},Wm=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-east-2":{description:"Asia Pacific (Taipei)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-6":{description:"Asia Pacific (New Zealand)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"aws global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"mx-central-1":{description:"Mexico (Central)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"aws-cn global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-eusc",outputs:{dnsSuffix:"amazonaws.eu",dualStackDnsSuffix:"api.amazonwebservices.eu",implicitGlobalRegion:"eusc-de-east-1",name:"aws-eusc",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eusc\\-(de)\\-\\w+\\-\\d+$",regions:{"eusc-de-east-1":{description:"AWS European Sovereign Cloud (Germany)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"api.aws.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"aws-iso global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"api.aws.scloud",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"aws-iso-b global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"},"us-isob-west-1":{description:"US ISOB West"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"api.cloud-aws.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"aws-iso-e-global":{description:"aws-iso-e global region"},"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"api.aws.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{"aws-iso-f-global":{description:"aws-iso-f global region"},"us-isof-east-1":{description:"US ISOF EAST"},"us-isof-south-1":{description:"US ISOF SOUTH"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"aws-us-gov global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}}],Vm={partitions:Wm};let Gm=Vm;const Km=t=>{const{partitions:e}=Gm;for(const s of e){const{regions:n,outputs:i}=s;for(const[o,a]of Object.entries(n))if(o===t)return{...i,...a}}for(const s of e){const{regionRegex:n,outputs:i}=s;if(new RegExp(n).test(t))return{...i}}const r=e.find(s=>s.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}},Fc={isVirtualHostableS3Bucket:Uc,parseArn:qm,partition:Km};Wt.aws=Fc;const Tn="required",d="type",w="rules",p="conditions",g="fn",y="argv",B="ref",$="assign",R="url",k="properties",je="backend",he="authSchemes",ne="disableDoubleEncoding",ie="signingName",me="signingRegion",T="headers",Dn="signingRegionSet",Xm=6,Zm=!1,$e=!0,Te="isSet",te="booleanEquals",D="error",xr="aws.partition",z="stringEquals",J="getAttr",Y="name",G="substring",Yi="bucketSuffix",Bn="parseURL",E="endpoint",x="tree",br="aws.isVirtualHostableS3Bucket",Er="{url#scheme}://{Bucket}.{url#authority}{url#path}",Le="not",eo="accessPointSuffix",dr="{url#scheme}://{url#authority}{url#path}",Lc="hardwareType",Hc="regionPrefix",to="bucketAliasSuffix",tn="outpostId",ut="isValidHostLabel",In="sigv4a",Gt="s3-outposts",_t="s3",zc="{url#scheme}://{url#authority}{url#normalizedPath}{Bucket}",jc="https://{Bucket}.s3-accelerate.{partitionResult#dnsSuffix}",ro="https://{Bucket}.s3.{partitionResult#dnsSuffix}",qc="aws.parseArn",Wc="bucketArn",Vc="arnType",Cr="",Pn="s3-object-lambda",Gc="accesspoint",Mn="accessPointName",so="{url#scheme}://{accessPointName}-{bucketArn#accountId}.{url#authority}{url#path}",no="mrapPartition",io="outpostType",oo="arnPrefix",Kc="{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",ao="https://s3.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",co="https://s3.{partitionResult#dnsSuffix}",dt={[Tn]:!1,[d]:"string"},ft={[Tn]:!0,default:!1,[d]:"boolean"},Bt={[Tn]:!1,[d]:"boolean"},Ie={[g]:te,[y]:[{[B]:"Accelerate"},!0]},X={[g]:te,[y]:[{[B]:"UseFIPS"},!0]},j={[g]:te,[y]:[{[B]:"UseDualStack"},!0]},ee={[g]:Te,[y]:[{[B]:"Endpoint"}]},Xc={[g]:xr,[y]:[{[B]:"Region"}],[$]:"partitionResult"},uo={[g]:z,[y]:[{[g]:J,[y]:[{[B]:"partitionResult"},Y]},"aws-cn"]},$t={[g]:Te,[y]:[{[B]:"Bucket"}]},H={[B]:"Bucket"},lo={[p]:[Ie],[D]:"S3Express does not support S3 Accelerate.",[d]:D},fo={[p]:[ee,{[g]:Bn,[y]:[{[B]:"Endpoint"}],[$]:"url"}],[w]:[{[p]:[{[g]:Te,[y]:[{[B]:"DisableS3ExpressSessionAuth"}]},{[g]:te,[y]:[{[B]:"DisableS3ExpressSessionAuth"},!0]}],[w]:[{[p]:[{[g]:te,[y]:[{[g]:J,[y]:[{[B]:"url"},"isIp"]},!0]}],[w]:[{[p]:[{[g]:"uriEncode",[y]:[H],[$]:"uri_encoded_bucket"}],[w]:[{[E]:{[R]:"{url#scheme}://{url#authority}/{uri_encoded_bucket}{url#path}",[k]:{[je]:"S3Express",[he]:[{[ne]:!0,[Y]:"sigv4",[ie]:"s3express",[me]:"{Region}"}]},[T]:{}},[d]:E}],[d]:x}],[d]:x},{[p]:[{[g]:br,[y]:[H,!1]}],[w]:[{[E]:{[R]:Er,[k]:{[je]:"S3Express",[he]:[{[ne]:!0,[Y]:"sigv4",[ie]:"s3express",[me]:"{Region}"}]},[T]:{}},[d]:E}],[d]:x},{[D]:"S3Express bucket name is not a valid virtual hostable name.",[d]:D}],[d]:x},{[p]:[{[g]:te,[y]:[{[g]:J,[y]:[{[B]:"url"},"isIp"]},!0]}],[w]:[{[p]:[{[g]:"uriEncode",[y]:[H],[$]:"uri_encoded_bucket"}],[w]:[{[E]:{[R]:"{url#scheme}://{url#authority}/{uri_encoded_bucket}{url#path}",[k]:{[je]:"S3Express",[he]:[{[ne]:!0,[Y]:"sigv4-s3express",[ie]:"s3express",[me]:"{Region}"}]},[T]:{}},[d]:E}],[d]:x}],[d]:x},{[p]:[{[g]:br,[y]:[H,!1]}],[w]:[{[E]:{[R]:Er,[k]:{[je]:"S3Express",[he]:[{[ne]:!0,[Y]:"sigv4-s3express",[ie]:"s3express",[me]:"{Region}"}]},[T]:{}},[d]:E}],[d]:x},{[D]:"S3Express bucket name is not a valid virtual hostable name.",[d]:D}],[d]:x},be={[g]:Bn,[y]:[{[B]:"Endpoint"}],[$]:"url"},as={[g]:te,[y]:[{[g]:J,[y]:[{[B]:"url"},"isIp"]},!0]},Zc={[B]:"url"},Qc={[g]:"uriEncode",[y]:[H],[$]:"uri_encoded_bucket"},ke={[je]:"S3Express",[he]:[{[ne]:!0,[Y]:"sigv4",[ie]:"s3express",[me]:"{Region}"}]},P={},Jc={[g]:br,[y]:[H,!1]},ho={[D]:"S3Express bucket name is not a valid virtual hostable name.",[d]:D},po={[g]:Te,[y]:[{[B]:"UseS3ExpressControlEndpoint"}]},mo={[g]:te,[y]:[{[B]:"UseS3ExpressControlEndpoint"},!0]},O={[g]:Le,[y]:[ee]},F={[g]:te,[y]:[{[B]:"UseDualStack"},!1]},U={[g]:te,[y]:[{[B]:"UseFIPS"},!1]},or={[D]:"Unrecognized S3Express bucket name format.",[d]:D},go={[g]:Le,[y]:[$t]},yo={[B]:Lc},So={[p]:[O],[D]:"Expected a endpoint to be specified but no endpoint was found",[d]:D},ar={[he]:[{[ne]:!0,[Y]:In,[ie]:Gt,[Dn]:["*"]},{[ne]:!0,[Y]:"sigv4",[ie]:Gt,[me]:"{Region}"}]},cs={[g]:te,[y]:[{[B]:"ForcePathStyle"},!1]},Qm={[B]:"ForcePathStyle"},re={[g]:te,[y]:[{[B]:"Accelerate"},!1]},ce={[g]:z,[y]:[{[B]:"Region"},"aws-global"]},le={[he]:[{[ne]:!0,[Y]:"sigv4",[ie]:_t,[me]:"us-east-1"}]},L={[g]:Le,[y]:[ce]},de={[g]:te,[y]:[{[B]:"UseGlobalEndpoint"},!0]},wo={[R]:"https://{Bucket}.s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[k]:{[he]:[{[ne]:!0,[Y]:"sigv4",[ie]:_t,[me]:"{Region}"}]},[T]:{}},oe={[he]:[{[ne]:!0,[Y]:"sigv4",[ie]:_t,[me]:"{Region}"}]},fe={[g]:te,[y]:[{[B]:"UseGlobalEndpoint"},!1]},xo={[R]:"https://{Bucket}.s3-fips.{Region}.{partitionResult#dnsSuffix}",[k]:oe,[T]:{}},bo={[R]:"https://{Bucket}.s3-accelerate.dualstack.{partitionResult#dnsSuffix}",[k]:oe,[T]:{}},Eo={[R]:"https://{Bucket}.s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[k]:oe,[T]:{}},us={[g]:te,[y]:[{[g]:J,[y]:[Zc,"isIp"]},!1]},ls={[R]:zc,[k]:oe,[T]:{}},rn={[R]:Er,[k]:oe,[T]:{}},Co={[E]:rn,[d]:E},ds={[R]:jc,[k]:oe,[T]:{}},Ao={[R]:"https://{Bucket}.s3.{Region}.{partitionResult#dnsSuffix}",[k]:oe,[T]:{}},cr={[D]:"Invalid region: region was not a valid DNS name.",[d]:D},ve={[B]:Wc},Yc={[B]:Vc},fs={[g]:J,[y]:[ve,"service"]},Nn={[B]:Mn},_o={[p]:[j],[D]:"S3 Object Lambda does not support Dual-stack",[d]:D},vo={[p]:[Ie],[D]:"S3 Object Lambda does not support S3 Accelerate",[d]:D},Ro={[p]:[{[g]:Te,[y]:[{[B]:"DisableAccessPoints"}]},{[g]:te,[y]:[{[B]:"DisableAccessPoints"},!0]}],[D]:"Access points are not supported for this operation",[d]:D},hs={[p]:[{[g]:Te,[y]:[{[B]:"UseArnRegion"}]},{[g]:te,[y]:[{[B]:"UseArnRegion"},!1]},{[g]:Le,[y]:[{[g]:z,[y]:[{[g]:J,[y]:[ve,"region"]},"{Region}"]}]}],[D]:"Invalid configuration: region from ARN `{bucketArn#region}` does not match client region `{Region}` and UseArnRegion is `false`",[d]:D},eu={[g]:J,[y]:[{[B]:"bucketPartition"},Y]},tu={[g]:J,[y]:[ve,"accountId"]},ps={[he]:[{[ne]:!0,[Y]:"sigv4",[ie]:Pn,[me]:"{bucketArn#region}"}]},ko={[D]:"Invalid ARN: The access point name may only contain a-z, A-Z, 0-9 and `-`. Found: `{accessPointName}`",[d]:D},ms={[D]:"Invalid ARN: The account id may only contain a-z, A-Z, 0-9 and `-`. Found: `{bucketArn#accountId}`",[d]:D},gs={[D]:"Invalid region in ARN: `{bucketArn#region}` (invalid DNS name)",[d]:D},ys={[D]:"Client was configured for partition `{partitionResult#name}` but ARN (`{Bucket}`) has `{bucketPartition#name}`",[d]:D},To={[D]:"Invalid ARN: The ARN may only contain a single resource component after `accesspoint`.",[d]:D},Do={[D]:"Invalid ARN: Expected a resource of the format `accesspoint:<accesspoint name>` but no name was provided",[d]:D},It={[he]:[{[ne]:!0,[Y]:"sigv4",[ie]:_t,[me]:"{bucketArn#region}"}]},Bo={[he]:[{[ne]:!0,[Y]:In,[ie]:Gt,[Dn]:["*"]},{[ne]:!0,[Y]:"sigv4",[ie]:Gt,[me]:"{bucketArn#region}"}]},Io={[g]:qc,[y]:[H]},Po={[R]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:oe,[T]:{}},Mo={[R]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:oe,[T]:{}},No={[R]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:oe,[T]:{}},Ss={[R]:Kc,[k]:oe,[T]:{}},Oo={[R]:"https://s3.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:oe,[T]:{}},$o={[B]:"UseObjectLambdaEndpoint"},ws={[he]:[{[ne]:!0,[Y]:"sigv4",[ie]:Pn,[me]:"{Region}"}]},Uo={[R]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[k]:oe,[T]:{}},Fo={[R]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}",[k]:oe,[T]:{}},Lo={[R]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[k]:oe,[T]:{}},xs={[R]:dr,[k]:oe,[T]:{}},Ho={[R]:"https://s3.{Region}.{partitionResult#dnsSuffix}",[k]:oe,[T]:{}},bs=[{[B]:"Region"}],Jm=[{[B]:"Endpoint"}],Ym=[H],Es=[Ie],ht=[ee,be],zo=[{[g]:Te,[y]:[{[B]:"DisableS3ExpressSessionAuth"}]},{[g]:te,[y]:[{[B]:"DisableS3ExpressSessionAuth"},!0]}],eg=[Qc],Cs=[Jc],Be=[Xc],As=[X,j],Ut=[X,F],Ft=[U,j],Lt=[U,F],jo=[{[g]:G,[y]:[H,6,14,!0],[$]:"s3expressAvailabilityZoneId"},{[g]:G,[y]:[H,14,16,!0],[$]:"s3expressAvailabilityZoneDelim"},{[g]:z,[y]:[{[B]:"s3expressAvailabilityZoneDelim"},"--"]}],Ue=[{[p]:[X,j],[E]:{[R]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.dualstack.{Region}.{partitionResult#dnsSuffix}",[k]:ke,[T]:{}},[d]:E},{[p]:Ut,[E]:{[R]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.{Region}.{partitionResult#dnsSuffix}",[k]:ke,[T]:{}},[d]:E},{[p]:Ft,[E]:{[R]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.dualstack.{Region}.{partitionResult#dnsSuffix}",[k]:ke,[T]:{}},[d]:E},{[p]:Lt,[E]:{[R]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.{Region}.{partitionResult#dnsSuffix}",[k]:ke,[T]:{}},[d]:E}],qo=[{[g]:G,[y]:[H,6,15,!0],[$]:"s3expressAvailabilityZoneId"},{[g]:G,[y]:[H,15,17,!0],[$]:"s3expressAvailabilityZoneDelim"},{[g]:z,[y]:[{[B]:"s3expressAvailabilityZoneDelim"},"--"]}],Wo=[{[g]:G,[y]:[H,6,19,!0],[$]:"s3expressAvailabilityZoneId"},{[g]:G,[y]:[H,19,21,!0],[$]:"s3expressAvailabilityZoneDelim"},{[g]:z,[y]:[{[B]:"s3expressAvailabilityZoneDelim"},"--"]}],Vo=[{[g]:G,[y]:[H,6,20,!0],[$]:"s3expressAvailabilityZoneId"},{[g]:G,[y]:[H,20,22,!0],[$]:"s3expressAvailabilityZoneDelim"},{[g]:z,[y]:[{[B]:"s3expressAvailabilityZoneDelim"},"--"]}],Go=[{[g]:G,[y]:[H,6,26,!0],[$]:"s3expressAvailabilityZoneId"},{[g]:G,[y]:[H,26,28,!0],[$]:"s3expressAvailabilityZoneDelim"},{[g]:z,[y]:[{[B]:"s3expressAvailabilityZoneDelim"},"--"]}],Fe=[{[p]:[X,j],[E]:{[R]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.dualstack.{Region}.{partitionResult#dnsSuffix}",[k]:{[je]:"S3Express",[he]:[{[ne]:!0,[Y]:"sigv4-s3express",[ie]:"s3express",[me]:"{Region}"}]},[T]:{}},[d]:E},{[p]:Ut,[E]:{[R]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.{Region}.{partitionResult#dnsSuffix}",[k]:{[je]:"S3Express",[he]:[{[ne]:!0,[Y]:"sigv4-s3express",[ie]:"s3express",[me]:"{Region}"}]},[T]:{}},[d]:E},{[p]:Ft,[E]:{[R]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.dualstack.{Region}.{partitionResult#dnsSuffix}",[k]:{[je]:"S3Express",[he]:[{[ne]:!0,[Y]:"sigv4-s3express",[ie]:"s3express",[me]:"{Region}"}]},[T]:{}},[d]:E},{[p]:Lt,[E]:{[R]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.{Region}.{partitionResult#dnsSuffix}",[k]:{[je]:"S3Express",[he]:[{[ne]:!0,[Y]:"sigv4-s3express",[ie]:"s3express",[me]:"{Region}"}]},[T]:{}},[d]:E}],Ko=[H,0,7,!0],Xo=[{[g]:G,[y]:[H,7,15,!0],[$]:"s3expressAvailabilityZoneId"},{[g]:G,[y]:[H,15,17,!0],[$]:"s3expressAvailabilityZoneDelim"},{[g]:z,[y]:[{[B]:"s3expressAvailabilityZoneDelim"},"--"]}],Zo=[{[g]:G,[y]:[H,7,16,!0],[$]:"s3expressAvailabilityZoneId"},{[g]:G,[y]:[H,16,18,!0],[$]:"s3expressAvailabilityZoneDelim"},{[g]:z,[y]:[{[B]:"s3expressAvailabilityZoneDelim"},"--"]}],Qo=[{[g]:G,[y]:[H,7,20,!0],[$]:"s3expressAvailabilityZoneId"},{[g]:G,[y]:[H,20,22,!0],[$]:"s3expressAvailabilityZoneDelim"},{[g]:z,[y]:[{[B]:"s3expressAvailabilityZoneDelim"},"--"]}],Jo=[{[g]:G,[y]:[H,7,21,!0],[$]:"s3expressAvailabilityZoneId"},{[g]:G,[y]:[H,21,23,!0],[$]:"s3expressAvailabilityZoneDelim"},{[g]:z,[y]:[{[B]:"s3expressAvailabilityZoneDelim"},"--"]}],Yo=[{[g]:G,[y]:[H,7,27,!0],[$]:"s3expressAvailabilityZoneId"},{[g]:G,[y]:[H,27,29,!0],[$]:"s3expressAvailabilityZoneDelim"},{[g]:z,[y]:[{[B]:"s3expressAvailabilityZoneDelim"},"--"]}],tg=[$t],ea=[{[g]:ut,[y]:[{[B]:tn},!1]}],ta=[{[g]:z,[y]:[{[B]:Hc},"beta"]}],rg=["*"],ra=[{[g]:ut,[y]:[{[B]:"Region"},!1]}],We=[{[g]:z,[y]:[{[B]:"Region"},"us-east-1"]}],_s=[{[g]:z,[y]:[Yc,Gc]}],sa=[{[g]:J,[y]:[ve,"resourceId[1]"],[$]:Mn},{[g]:Le,[y]:[{[g]:z,[y]:[Nn,Cr]}]}],sg=[ve,"resourceId[1]"],na=[j],vs=[{[g]:Le,[y]:[{[g]:z,[y]:[{[g]:J,[y]:[ve,"region"]},Cr]}]}],ia=[{[g]:Le,[y]:[{[g]:Te,[y]:[{[g]:J,[y]:[ve,"resourceId[2]"]}]}]}],ng=[ve,"resourceId[2]"],Rs=[{[g]:xr,[y]:[{[g]:J,[y]:[ve,"region"]}],[$]:"bucketPartition"}],oa=[{[g]:z,[y]:[eu,{[g]:J,[y]:[{[B]:"partitionResult"},Y]}]}],ks=[{[g]:ut,[y]:[{[g]:J,[y]:[ve,"region"]},!0]}],Ts=[{[g]:ut,[y]:[tu,!1]}],aa=[{[g]:ut,[y]:[Nn,!1]}],ur=[X],ca=[{[g]:ut,[y]:[{[B]:"Region"},!0]}],ig={parameters:{Bucket:dt,Region:dt,UseFIPS:ft,UseDualStack:ft,Endpoint:dt,ForcePathStyle:ft,Accelerate:ft,UseGlobalEndpoint:ft,UseObjectLambdaEndpoint:Bt,Key:dt,Prefix:dt,CopySource:dt,DisableAccessPoints:Bt,DisableMultiRegionAccessPoints:ft,UseArnRegion:Bt,UseS3ExpressControlEndpoint:Bt,DisableS3ExpressSessionAuth:Bt},[w]:[{[p]:[{[g]:Te,[y]:bs}],[w]:[{[p]:[Ie,X],error:"Accelerate cannot be used with FIPS",[d]:D},{[p]:[j,ee],error:"Cannot set dual-stack in combination with a custom endpoint.",[d]:D},{[p]:[ee,X],error:"A custom endpoint cannot be combined with FIPS",[d]:D},{[p]:[ee,Ie],error:"A custom endpoint cannot be combined with S3 Accelerate",[d]:D},{[p]:[X,Xc,uo],error:"Partition does not support FIPS",[d]:D},{[p]:[$t,{[g]:G,[y]:[H,0,Xm,$e],[$]:Yi},{[g]:z,[y]:[{[B]:Yi},"--x-s3"]}],[w]:[lo,fo,{[p]:[po,mo],[w]:[{[p]:Be,[w]:[{[p]:[Qc,O],[w]:[{[p]:As,endpoint:{[R]:"https://s3express-control-fips.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:ke,[T]:P},[d]:E},{[p]:Ut,endpoint:{[R]:"https://s3express-control-fips.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:ke,[T]:P},[d]:E},{[p]:Ft,endpoint:{[R]:"https://s3express-control.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:ke,[T]:P},[d]:E},{[p]:Lt,endpoint:{[R]:"https://s3express-control.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:ke,[T]:P},[d]:E}],[d]:x}],[d]:x}],[d]:x},{[p]:Cs,[w]:[{[p]:Be,[w]:[{[p]:zo,[w]:[{[p]:jo,[w]:Ue,[d]:x},{[p]:qo,[w]:Ue,[d]:x},{[p]:Wo,[w]:Ue,[d]:x},{[p]:Vo,[w]:Ue,[d]:x},{[p]:Go,[w]:Ue,[d]:x},or],[d]:x},{[p]:jo,[w]:Fe,[d]:x},{[p]:qo,[w]:Fe,[d]:x},{[p]:Wo,[w]:Fe,[d]:x},{[p]:Vo,[w]:Fe,[d]:x},{[p]:Go,[w]:Fe,[d]:x},or],[d]:x}],[d]:x},ho],[d]:x},{[p]:[$t,{[g]:G,[y]:Ko,[$]:eo},{[g]:z,[y]:[{[B]:eo},"--xa-s3"]}],[w]:[lo,fo,{[p]:Cs,[w]:[{[p]:Be,[w]:[{[p]:zo,[w]:[{[p]:Xo,[w]:Ue,[d]:x},{[p]:Zo,[w]:Ue,[d]:x},{[p]:Qo,[w]:Ue,[d]:x},{[p]:Jo,[w]:Ue,[d]:x},{[p]:Yo,[w]:Ue,[d]:x},or],[d]:x},{[p]:Xo,[w]:Fe,[d]:x},{[p]:Zo,[w]:Fe,[d]:x},{[p]:Qo,[w]:Fe,[d]:x},{[p]:Jo,[w]:Fe,[d]:x},{[p]:Yo,[w]:Fe,[d]:x},or],[d]:x}],[d]:x},ho],[d]:x},{[p]:[go,po,mo],[w]:[{[p]:Be,[w]:[{[p]:ht,endpoint:{[R]:dr,[k]:ke,[T]:P},[d]:E},{[p]:As,endpoint:{[R]:"https://s3express-control-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[k]:ke,[T]:P},[d]:E},{[p]:Ut,endpoint:{[R]:"https://s3express-control-fips.{Region}.{partitionResult#dnsSuffix}",[k]:ke,[T]:P},[d]:E},{[p]:Ft,endpoint:{[R]:"https://s3express-control.dualstack.{Region}.{partitionResult#dnsSuffix}",[k]:ke,[T]:P},[d]:E},{[p]:Lt,endpoint:{[R]:"https://s3express-control.{Region}.{partitionResult#dnsSuffix}",[k]:ke,[T]:P},[d]:E}],[d]:x}],[d]:x},{[p]:[$t,{[g]:G,[y]:[H,49,50,$e],[$]:Lc},{[g]:G,[y]:[H,8,12,$e],[$]:Hc},{[g]:G,[y]:Ko,[$]:to},{[g]:G,[y]:[H,32,49,$e],[$]:tn},{[g]:xr,[y]:bs,[$]:"regionPartition"},{[g]:z,[y]:[{[B]:to},"--op-s3"]}],[w]:[{[p]:ea,[w]:[{[p]:Cs,[w]:[{[p]:[{[g]:z,[y]:[yo,"e"]}],[w]:[{[p]:ta,[w]:[So,{[p]:ht,endpoint:{[R]:"https://{Bucket}.ec2.{url#authority}",[k]:ar,[T]:P},[d]:E}],[d]:x},{endpoint:{[R]:"https://{Bucket}.ec2.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[k]:ar,[T]:P},[d]:E}],[d]:x},{[p]:[{[g]:z,[y]:[yo,"o"]}],[w]:[{[p]:ta,[w]:[So,{[p]:ht,endpoint:{[R]:"https://{Bucket}.op-{outpostId}.{url#authority}",[k]:ar,[T]:P},[d]:E}],[d]:x},{endpoint:{[R]:"https://{Bucket}.op-{outpostId}.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[k]:ar,[T]:P},[d]:E}],[d]:x},{error:'Unrecognized hardware type: "Expected hardware type o or e but got {hardwareType}"',[d]:D}],[d]:x},{error:"Invalid Outposts Bucket alias - it must be a valid bucket name.",[d]:D}],[d]:x},{error:"Invalid ARN: The outpost Id must only contain a-z, A-Z, 0-9 and `-`.",[d]:D}],[d]:x},{[p]:tg,[w]:[{[p]:[ee,{[g]:Le,[y]:[{[g]:Te,[y]:[{[g]:Bn,[y]:Jm}]}]}],error:"Custom endpoint `{Endpoint}` was not a valid URI",[d]:D},{[p]:[cs,Jc],[w]:[{[p]:Be,[w]:[{[p]:ra,[w]:[{[p]:[Ie,uo],error:"S3 Accelerate cannot be used in this region",[d]:D},{[p]:[j,X,re,O,ce],endpoint:{[R]:"https://{Bucket}.s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[k]:le,[T]:P},[d]:E},{[p]:[j,X,re,O,L,de],[w]:[{endpoint:wo,[d]:E}],[d]:x},{[p]:[j,X,re,O,L,fe],endpoint:wo,[d]:E},{[p]:[F,X,re,O,ce],endpoint:{[R]:"https://{Bucket}.s3-fips.us-east-1.{partitionResult#dnsSuffix}",[k]:le,[T]:P},[d]:E},{[p]:[F,X,re,O,L,de],[w]:[{endpoint:xo,[d]:E}],[d]:x},{[p]:[F,X,re,O,L,fe],endpoint:xo,[d]:E},{[p]:[j,U,Ie,O,ce],endpoint:{[R]:"https://{Bucket}.s3-accelerate.dualstack.us-east-1.{partitionResult#dnsSuffix}",[k]:le,[T]:P},[d]:E},{[p]:[j,U,Ie,O,L,de],[w]:[{endpoint:bo,[d]:E}],[d]:x},{[p]:[j,U,Ie,O,L,fe],endpoint:bo,[d]:E},{[p]:[j,U,re,O,ce],endpoint:{[R]:"https://{Bucket}.s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[k]:le,[T]:P},[d]:E},{[p]:[j,U,re,O,L,de],[w]:[{endpoint:Eo,[d]:E}],[d]:x},{[p]:[j,U,re,O,L,fe],endpoint:Eo,[d]:E},{[p]:[F,U,re,ee,be,as,ce],endpoint:{[R]:zc,[k]:le,[T]:P},[d]:E},{[p]:[F,U,re,ee,be,us,ce],endpoint:{[R]:Er,[k]:le,[T]:P},[d]:E},{[p]:[F,U,re,ee,be,as,L,de],[w]:[{[p]:We,endpoint:ls,[d]:E},{endpoint:ls,[d]:E}],[d]:x},{[p]:[F,U,re,ee,be,us,L,de],[w]:[{[p]:We,endpoint:rn,[d]:E},Co],[d]:x},{[p]:[F,U,re,ee,be,as,L,fe],endpoint:ls,[d]:E},{[p]:[F,U,re,ee,be,us,L,fe],endpoint:rn,[d]:E},{[p]:[F,U,Ie,O,ce],endpoint:{[R]:jc,[k]:le,[T]:P},[d]:E},{[p]:[F,U,Ie,O,L,de],[w]:[{[p]:We,endpoint:ds,[d]:E},{endpoint:ds,[d]:E}],[d]:x},{[p]:[F,U,Ie,O,L,fe],endpoint:ds,[d]:E},{[p]:[F,U,re,O,ce],endpoint:{[R]:ro,[k]:le,[T]:P},[d]:E},{[p]:[F,U,re,O,L,de],[w]:[{[p]:We,endpoint:{[R]:ro,[k]:oe,[T]:P},[d]:E},{endpoint:Ao,[d]:E}],[d]:x},{[p]:[F,U,re,O,L,fe],endpoint:Ao,[d]:E}],[d]:x},cr],[d]:x}],[d]:x},{[p]:[ee,be,{[g]:z,[y]:[{[g]:J,[y]:[Zc,"scheme"]},"http"]},{[g]:br,[y]:[H,$e]},cs,U,F,re],[w]:[{[p]:Be,[w]:[{[p]:ra,[w]:[Co],[d]:x},cr],[d]:x}],[d]:x},{[p]:[cs,{[g]:qc,[y]:Ym,[$]:Wc}],[w]:[{[p]:[{[g]:J,[y]:[ve,"resourceId[0]"],[$]:Vc},{[g]:Le,[y]:[{[g]:z,[y]:[Yc,Cr]}]}],[w]:[{[p]:[{[g]:z,[y]:[fs,Pn]}],[w]:[{[p]:_s,[w]:[{[p]:sa,[w]:[_o,vo,{[p]:vs,[w]:[Ro,{[p]:ia,[w]:[hs,{[p]:Rs,[w]:[{[p]:Be,[w]:[{[p]:oa,[w]:[{[p]:ks,[w]:[{[p]:[{[g]:z,[y]:[tu,Cr]}],error:"Invalid ARN: Missing account id",[d]:D},{[p]:Ts,[w]:[{[p]:aa,[w]:[{[p]:ht,endpoint:{[R]:so,[k]:ps,[T]:P},[d]:E},{[p]:ur,endpoint:{[R]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[k]:ps,[T]:P},[d]:E},{endpoint:{[R]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda.{bucketArn#region}.{bucketPartition#dnsSuffix}",[k]:ps,[T]:P},[d]:E}],[d]:x},ko],[d]:x},ms],[d]:x},gs],[d]:x},ys],[d]:x}],[d]:x}],[d]:x},To],[d]:x},{error:"Invalid ARN: bucket ARN is missing a region",[d]:D}],[d]:x},Do],[d]:x},{error:"Invalid ARN: Object Lambda ARNs only support `accesspoint` arn types, but found: `{arnType}`",[d]:D}],[d]:x},{[p]:_s,[w]:[{[p]:sa,[w]:[{[p]:vs,[w]:[{[p]:_s,[w]:[{[p]:vs,[w]:[Ro,{[p]:ia,[w]:[hs,{[p]:Rs,[w]:[{[p]:Be,[w]:[{[p]:[{[g]:z,[y]:[eu,"{partitionResult#name}"]}],[w]:[{[p]:ks,[w]:[{[p]:[{[g]:z,[y]:[fs,_t]}],[w]:[{[p]:Ts,[w]:[{[p]:aa,[w]:[{[p]:Es,error:"Access Points do not support S3 Accelerate",[d]:D},{[p]:As,endpoint:{[R]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[k]:It,[T]:P},[d]:E},{[p]:Ut,endpoint:{[R]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[k]:It,[T]:P},[d]:E},{[p]:Ft,endpoint:{[R]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[k]:It,[T]:P},[d]:E},{[p]:[U,F,ee,be],endpoint:{[R]:so,[k]:It,[T]:P},[d]:E},{[p]:Lt,endpoint:{[R]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.{bucketArn#region}.{bucketPartition#dnsSuffix}",[k]:It,[T]:P},[d]:E}],[d]:x},ko],[d]:x},ms],[d]:x},{error:"Invalid ARN: The ARN was not for the S3 service, found: {bucketArn#service}",[d]:D}],[d]:x},gs],[d]:x},ys],[d]:x}],[d]:x}],[d]:x},To],[d]:x}],[d]:x}],[d]:x},{[p]:[{[g]:ut,[y]:[Nn,$e]}],[w]:[{[p]:na,error:"S3 MRAP does not support dual-stack",[d]:D},{[p]:ur,error:"S3 MRAP does not support FIPS",[d]:D},{[p]:Es,error:"S3 MRAP does not support S3 Accelerate",[d]:D},{[p]:[{[g]:te,[y]:[{[B]:"DisableMultiRegionAccessPoints"},$e]}],error:"Invalid configuration: Multi-Region Access Point ARNs are disabled.",[d]:D},{[p]:[{[g]:xr,[y]:bs,[$]:no}],[w]:[{[p]:[{[g]:z,[y]:[{[g]:J,[y]:[{[B]:no},Y]},{[g]:J,[y]:[ve,"partition"]}]}],[w]:[{endpoint:{[R]:"https://{accessPointName}.accesspoint.s3-global.{mrapPartition#dnsSuffix}",[k]:{[he]:[{[ne]:$e,name:In,[ie]:_t,[Dn]:rg}]},[T]:P},[d]:E}],[d]:x},{error:"Client was configured for partition `{mrapPartition#name}` but bucket referred to partition `{bucketArn#partition}`",[d]:D}],[d]:x}],[d]:x},{error:"Invalid Access Point Name",[d]:D}],[d]:x},Do],[d]:x},{[p]:[{[g]:z,[y]:[fs,Gt]}],[w]:[{[p]:na,error:"S3 Outposts does not support Dual-stack",[d]:D},{[p]:ur,error:"S3 Outposts does not support FIPS",[d]:D},{[p]:Es,error:"S3 Outposts does not support S3 Accelerate",[d]:D},{[p]:[{[g]:Te,[y]:[{[g]:J,[y]:[ve,"resourceId[4]"]}]}],error:"Invalid Arn: Outpost Access Point ARN contains sub resources",[d]:D},{[p]:[{[g]:J,[y]:sg,[$]:tn}],[w]:[{[p]:ea,[w]:[hs,{[p]:Rs,[w]:[{[p]:Be,[w]:[{[p]:oa,[w]:[{[p]:ks,[w]:[{[p]:Ts,[w]:[{[p]:[{[g]:J,[y]:ng,[$]:io}],[w]:[{[p]:[{[g]:J,[y]:[ve,"resourceId[3]"],[$]:Mn}],[w]:[{[p]:[{[g]:z,[y]:[{[B]:io},Gc]}],[w]:[{[p]:ht,endpoint:{[R]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.{url#authority}",[k]:Bo,[T]:P},[d]:E},{endpoint:{[R]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.s3-outposts.{bucketArn#region}.{bucketPartition#dnsSuffix}",[k]:Bo,[T]:P},[d]:E}],[d]:x},{error:"Expected an outpost type `accesspoint`, found {outpostType}",[d]:D}],[d]:x},{error:"Invalid ARN: expected an access point name",[d]:D}],[d]:x},{error:"Invalid ARN: Expected a 4-component resource",[d]:D}],[d]:x},ms],[d]:x},gs],[d]:x},ys],[d]:x}],[d]:x}],[d]:x},{error:"Invalid ARN: The outpost Id may only contain a-z, A-Z, 0-9 and `-`. Found: `{outpostId}`",[d]:D}],[d]:x},{error:"Invalid ARN: The Outpost Id was not set",[d]:D}],[d]:x},{error:"Invalid ARN: Unrecognized format: {Bucket} (type: {arnType})",[d]:D}],[d]:x},{error:"Invalid ARN: No ARN type specified",[d]:D}],[d]:x},{[p]:[{[g]:G,[y]:[H,0,4,Zm],[$]:oo},{[g]:z,[y]:[{[B]:oo},"arn:"]},{[g]:Le,[y]:[{[g]:Te,[y]:[Io]}]}],error:"Invalid ARN: `{Bucket}` was not a valid ARN",[d]:D},{[p]:[{[g]:te,[y]:[Qm,$e]},Io],error:"Path-style addressing cannot be used with ARN buckets",[d]:D},{[p]:eg,[w]:[{[p]:Be,[w]:[{[p]:[re],[w]:[{[p]:[j,O,X,ce],endpoint:{[R]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:le,[T]:P},[d]:E},{[p]:[j,O,X,L,de],[w]:[{endpoint:Po,[d]:E}],[d]:x},{[p]:[j,O,X,L,fe],endpoint:Po,[d]:E},{[p]:[F,O,X,ce],endpoint:{[R]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:le,[T]:P},[d]:E},{[p]:[F,O,X,L,de],[w]:[{endpoint:Mo,[d]:E}],[d]:x},{[p]:[F,O,X,L,fe],endpoint:Mo,[d]:E},{[p]:[j,O,U,ce],endpoint:{[R]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:le,[T]:P},[d]:E},{[p]:[j,O,U,L,de],[w]:[{endpoint:No,[d]:E}],[d]:x},{[p]:[j,O,U,L,fe],endpoint:No,[d]:E},{[p]:[F,ee,be,U,ce],endpoint:{[R]:Kc,[k]:le,[T]:P},[d]:E},{[p]:[F,ee,be,U,L,de],[w]:[{[p]:We,endpoint:Ss,[d]:E},{endpoint:Ss,[d]:E}],[d]:x},{[p]:[F,ee,be,U,L,fe],endpoint:Ss,[d]:E},{[p]:[F,O,U,ce],endpoint:{[R]:ao,[k]:le,[T]:P},[d]:E},{[p]:[F,O,U,L,de],[w]:[{[p]:We,endpoint:{[R]:ao,[k]:oe,[T]:P},[d]:E},{endpoint:Oo,[d]:E}],[d]:x},{[p]:[F,O,U,L,fe],endpoint:Oo,[d]:E}],[d]:x},{error:"Path-style addressing cannot be used with S3 Accelerate",[d]:D}],[d]:x}],[d]:x}],[d]:x},{[p]:[{[g]:Te,[y]:[$o]},{[g]:te,[y]:[$o,$e]}],[w]:[{[p]:Be,[w]:[{[p]:ca,[w]:[_o,vo,{[p]:ht,endpoint:{[R]:dr,[k]:ws,[T]:P},[d]:E},{[p]:ur,endpoint:{[R]:"https://s3-object-lambda-fips.{Region}.{partitionResult#dnsSuffix}",[k]:ws,[T]:P},[d]:E},{endpoint:{[R]:"https://s3-object-lambda.{Region}.{partitionResult#dnsSuffix}",[k]:ws,[T]:P},[d]:E}],[d]:x},cr],[d]:x}],[d]:x},{[p]:[go],[w]:[{[p]:Be,[w]:[{[p]:ca,[w]:[{[p]:[X,j,O,ce],endpoint:{[R]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[k]:le,[T]:P},[d]:E},{[p]:[X,j,O,L,de],[w]:[{endpoint:Uo,[d]:E}],[d]:x},{[p]:[X,j,O,L,fe],endpoint:Uo,[d]:E},{[p]:[X,F,O,ce],endpoint:{[R]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}",[k]:le,[T]:P},[d]:E},{[p]:[X,F,O,L,de],[w]:[{endpoint:Fo,[d]:E}],[d]:x},{[p]:[X,F,O,L,fe],endpoint:Fo,[d]:E},{[p]:[U,j,O,ce],endpoint:{[R]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[k]:le,[T]:P},[d]:E},{[p]:[U,j,O,L,de],[w]:[{endpoint:Lo,[d]:E}],[d]:x},{[p]:[U,j,O,L,fe],endpoint:Lo,[d]:E},{[p]:[U,F,ee,be,ce],endpoint:{[R]:dr,[k]:le,[T]:P},[d]:E},{[p]:[U,F,ee,be,L,de],[w]:[{[p]:We,endpoint:xs,[d]:E},{endpoint:xs,[d]:E}],[d]:x},{[p]:[U,F,ee,be,L,fe],endpoint:xs,[d]:E},{[p]:[U,F,O,ce],endpoint:{[R]:co,[k]:le,[T]:P},[d]:E},{[p]:[U,F,O,L,de],[w]:[{[p]:We,endpoint:{[R]:co,[k]:oe,[T]:P},[d]:E},{endpoint:Ho,[d]:E}],[d]:x},{[p]:[U,F,O,L,fe],endpoint:Ho,[d]:E}],[d]:x},cr],[d]:x}],[d]:x}],[d]:x},{error:"A region must be set when sending requests to S3.",[d]:D}]},og=ig,ag=new fp({size:50,params:["Accelerate","Bucket","DisableAccessPoints","DisableMultiRegionAccessPoints","DisableS3ExpressSessionAuth","Endpoint","ForcePathStyle","Region","UseArnRegion","UseDualStack","UseFIPS","UseGlobalEndpoint","UseObjectLambdaEndpoint","UseS3ExpressControlEndpoint"]}),ru=(t,e={})=>ag.get(t,()=>Bp(og,{endpointParams:t,logger:e.logger}));Wt.aws=Fc;const cg=t=>async(e,r,s)=>{if(!s)throw new Error("Could not find `input` for `defaultEndpointRuleSetHttpAuthSchemeParametersProvider`");const n=await t(e,r,s),i=tt(r)?.commandInstance?.constructor?.getEndpointParameterInstructions;if(!i)throw new Error(`getEndpointParameterInstructions() is not defined on '${r.commandName}'`);const o=await Pc(s,{getEndpointParameterInstructions:i},e);return Object.assign(n,o)},ug=async(t,e,r)=>({operation:tt(e).operation,region:await Me(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()}),lg=cg(ug);function su(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"s3",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}function nu(t){return{schemeId:"aws.auth#sigv4a",signingProperties:{name:"s3",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}const dg=(t,e,r)=>n=>{const o=t(n).properties?.authSchemes;if(!o)return e(n);const a=[];for(const u of o){const{name:c,properties:f={},...l}=u,m=c.toLowerCase();c!==m&&console.warn(`HttpAuthScheme has been normalized with lowercasing: '${c}' to '${m}'`);let h;if(m==="sigv4a"){h="aws.auth#sigv4a";const b=o.find(v=>{const _=v.name.toLowerCase();return _!=="sigv4a"&&_.startsWith("sigv4")});if($c.sigv4aDependency()==="none"&&b)continue}else if(m.startsWith("sigv4"))h="aws.auth#sigv4";else throw new Error(`Unknown HttpAuthScheme found in '@smithy.rules#endpointRuleSet': '${m}'`);const S=r[h];if(!S)throw new Error(`Could not find HttpAuthOption create function for '${h}'`);const A=S(n);A.schemeId=h,A.signingProperties={...A.signingProperties||{},...l,...f},a.push(A)}return a},fg=t=>{const e=[];switch(t.operation){default:e.push(su(t)),e.push(nu(t))}return e},hg=dg(ru,fg,{"aws.auth#sigv4":su,"aws.auth#sigv4a":nu}),pg=t=>{const e=Ef(t),r=Xd(e);return Object.assign(r,{authSchemePreference:Me(t.authSchemePreference??[])})},mg=t=>Object.assign(t,{useFipsEndpoint:t.useFipsEndpoint??!1,useDualstackEndpoint:t.useDualstackEndpoint??!1,forcePathStyle:t.forcePathStyle??!1,useAccelerateEndpoint:t.useAccelerateEndpoint??!1,useGlobalEndpoint:t.useGlobalEndpoint??!1,disableMultiregionAccessPoints:t.disableMultiregionAccessPoints??!1,defaultSigningName:"s3",clientContextParams:t.clientContextParams??{}}),On={ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},DisableS3ExpressSessionAuth:{type:"clientContextParams",name:"disableS3ExpressSessionAuth"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};class pe extends mt{constructor(e){super(e),Object.setPrototypeOf(this,pe.prototype)}}class $n extends pe{name="NoSuchUpload";$fault="client";constructor(e){super({name:"NoSuchUpload",$fault:"client",...e}),Object.setPrototypeOf(this,$n.prototype)}}class Un extends pe{name="AccessDenied";$fault="client";constructor(e){super({name:"AccessDenied",$fault:"client",...e}),Object.setPrototypeOf(this,Un.prototype)}}class Fn extends pe{name="ObjectNotInActiveTierError";$fault="client";constructor(e){super({name:"ObjectNotInActiveTierError",$fault:"client",...e}),Object.setPrototypeOf(this,Fn.prototype)}}class Ln extends pe{name="BucketAlreadyExists";$fault="client";constructor(e){super({name:"BucketAlreadyExists",$fault:"client",...e}),Object.setPrototypeOf(this,Ln.prototype)}}class Hn extends pe{name="BucketAlreadyOwnedByYou";$fault="client";constructor(e){super({name:"BucketAlreadyOwnedByYou",$fault:"client",...e}),Object.setPrototypeOf(this,Hn.prototype)}}class zn extends pe{name="NoSuchBucket";$fault="client";constructor(e){super({name:"NoSuchBucket",$fault:"client",...e}),Object.setPrototypeOf(this,zn.prototype)}}class jn extends pe{name="InvalidObjectState";$fault="client";StorageClass;AccessTier;constructor(e){super({name:"InvalidObjectState",$fault:"client",...e}),Object.setPrototypeOf(this,jn.prototype),this.StorageClass=e.StorageClass,this.AccessTier=e.AccessTier}}class qn extends pe{name="NoSuchKey";$fault="client";constructor(e){super({name:"NoSuchKey",$fault:"client",...e}),Object.setPrototypeOf(this,qn.prototype)}}class Wn extends pe{name="NotFound";$fault="client";constructor(e){super({name:"NotFound",$fault:"client",...e}),Object.setPrototypeOf(this,Wn.prototype)}}class Vn extends pe{name="EncryptionTypeMismatch";$fault="client";constructor(e){super({name:"EncryptionTypeMismatch",$fault:"client",...e}),Object.setPrototypeOf(this,Vn.prototype)}}class Gn extends pe{name="InvalidRequest";$fault="client";constructor(e){super({name:"InvalidRequest",$fault:"client",...e}),Object.setPrototypeOf(this,Gn.prototype)}}class Kn extends pe{name="InvalidWriteOffset";$fault="client";constructor(e){super({name:"InvalidWriteOffset",$fault:"client",...e}),Object.setPrototypeOf(this,Kn.prototype)}}class Xn extends pe{name="TooManyParts";$fault="client";constructor(e){super({name:"TooManyParts",$fault:"client",...e}),Object.setPrototypeOf(this,Xn.prototype)}}class Zn extends pe{name="IdempotencyParameterMismatch";$fault="client";constructor(e){super({name:"IdempotencyParameterMismatch",$fault:"client",...e}),Object.setPrototypeOf(this,Zn.prototype)}}class Qn extends pe{name="ObjectAlreadyInActiveTierError";$fault="client";constructor(e){super({name:"ObjectAlreadyInActiveTierError",$fault:"client",...e}),Object.setPrototypeOf(this,Qn.prototype)}}const gg="ACL",yg="AccessDenied",ua="AccessKeyId",Sg="AcceptRanges",wg="AccessTier",Jn="Bucket",xg="BucketAlreadyExists",bg="BucketAlreadyOwnedByYou",Xt="BucketKeyEnabled",iu="Body",Eg="ChecksumAlgorithm",ou="CacheControl",Yn="ChecksumCRC32",ei="ChecksumCRC32C",ti="ChecksumCRC64NVME",au="Cache-Control",cu="Content-Disposition",uu="ContentDisposition",lu="Content-Encoding",du="ContentEncoding",fu="ContentLanguage",hu="Content-Language",pu="Content-Length",mu="ContentLength",Cg="Content-MD5",Ag="ContentMD5",_g="ChecksumMode",vg="ContentRange",Rg="Content-Range",ri="ChecksumSHA1",si="ChecksumSHA256",kg="CreateSessionOutput",Tg="CreateSessionResult",Dg="CreateSessionRequest",Bg="CreateSession",gu="ChecksumType",yu="Content-Type",Su="ContentType",la="Credentials",Ig="DeleteMarker",Ar="Expiration",wu="ExpectedBucketOwner",da="ExpiresString",Pg="EncryptionTypeMismatch",_r="ETag",vr="Expires",Mg="GrantFullControl",Ng="GetObject",Og="GetObjectOutput",$g="GetObjectRequest",Ug="GrantRead",Fg="GrantReadACP",Lg="GrantWriteACP",xu="IfMatch",Hg="If-Modified-Since",zg="IfModifiedSince",bu="If-Match",Eu="IfNoneMatch",Cu="If-None-Match",jg="InvalidObjectState",qg="IdempotencyParameterMismatch",Wg="InvalidRequest",Vg="IfUnmodifiedSince",Gg="If-Unmodified-Since",Kg="InvalidWriteOffset",Au="Key",Xg="LastModified",Zg="Last-Modified",_u="Metadata",Qg="MissingMeta",Jg="NotFound",Yg="NoSuchBucket",ey="NoSuchKey",ty="NoSuchUpload",ry="ObjectAlreadyInActiveTierError",vu="ObjectLockLegalHoldStatus",Ru="ObjectLockMode",ku="ObjectLockRetainUntilDate",sy="ObjectNotInActiveTierError",ny="PartsCount",iy="PartNumber",oy="PutObject",ay="PutObjectOutput",cy="PutObjectRequest",Tu="RequestCharged",uy="ResponseCacheControl",ly="ResponseContentDisposition",dy="ResponseContentEncoding",fy="ResponseContentLanguage",hy="ResponseContentType",py="ResponseExpires",Du="RequestPayer",my="ReplicationStatus",fa="Range",gy="Restore",ha="SecretAccessKey",yy="StreamingBlob",ni="StorageClass",Sy="SessionCredentialValue",wy="SessionCredentials",xy="SessionMode",Zt="ServerSideEncryption",Mr="SSECustomerAlgorithm",ii="SSECustomerKey",Nr="SSECustomerKeyMD5",Qt="SSEKMSEncryptionContext",Rt="SSEKMSKeyId",pa="SessionToken",by="Size",Ey="TagCount",Cy="TooManyParts",Ay="Tagging",oi="VersionId",_y="WriteOffsetBytes",Bu="WebsiteRedirectLocation",vy="accept-ranges",Ce="client",Ae="error",ai="http",Iu="httpChecksum",Re="httpError",C="httpHeader",Pu="httpPrefixHeaders",Ve="httpQuery",Ry="partNumber",ky="response-cache-control",Ty="response-content-disposition",Dy="response-content-encoding",By="response-content-language",Iy="response-content-type",Py="response-expires",My="streaming",Mu="smithy.ts.sdk.synthetic.com.amazonaws.s3",Ny="versionId",gt="xmlName",Oy="x-amz-acl",ci="x-amz-checksum-crc32",ui="x-amz-checksum-crc32c",li="x-amz-checksum-crc64nvme",$y="x-amz-checksum-mode",di="x-amz-checksum-sha1",fi="x-amz-checksum-sha256",Uy="x-amz-create-session-mode",Nu="x-amz-checksum-type",Fy="x-amz-delete-marker",Ou="x-amz-expiration",$u="x-amz-expected-bucket-owner",Ly="x-amz-grant-full-control",Hy="x-amz-grant-read",zy="x-amz-grant-read-acp",jy="x-amz-grant-write-acp",Uu="x-amz-meta-",qy="x-amz-missing-meta",Wy="x-amz-mp-parts-count",Fu="x-amz-object-lock-legal-hold",Lu="x-amz-object-lock-mode",Hu="x-amz-object-lock-retain-until-date",Vy="x-amz-object-size",Gy="x-amz-restore",zu="x-amz-request-charged",ju="x-amz-request-payer",Ky="x-amz-replication-status",qu="x-amz-storage-class",Xy="x-amz-sdk-checksum-algorithm",Jt="x-amz-server-side-encryption",Yt="x-amz-server-side-encryption-aws-kms-key-id",er="x-amz-server-side-encryption-bucket-key-enabled",Or="x-amz-server-side-encryption-context",$r="x-amz-server-side-encryption-customer-algorithm",Wu="x-amz-server-side-encryption-customer-key",Ur="x-amz-server-side-encryption-customer-key-MD5",Zy="x-amz-tagging",Qy="x-amz-tagging-count",Vu="x-amz-version-id",Jy="x-amz-write-offset-bytes",Gu="x-amz-website-redirect-location",N="com.amazonaws.s3";var ma=[0,N,Sy,8,0],Ku=[0,N,ii,8,0],Fr=[0,N,Qt,8,0],tr=[0,N,Rt,8,0],Xu=[0,N,yy,{[My]:1},42],Yy=[-3,N,yg,{[Ae]:Ce,[Re]:403},[],[]];V.for(N).registerError(Yy,Un);var e0=[-3,N,xg,{[Ae]:Ce,[Re]:409},[],[]];V.for(N).registerError(e0,Ln);var t0=[-3,N,bg,{[Ae]:Ce,[Re]:409},[],[]];V.for(N).registerError(t0,Hn);var r0=[3,N,kg,{[gt]:Tg},[la,Zt,Rt,Qt,Xt],[[()=>w0,{[gt]:la}],[0,{[C]:Jt}],[()=>tr,{[C]:Yt}],[()=>Fr,{[C]:Or}],[2,{[C]:er}]],1],s0=[3,N,Dg,0,[Jn,xy,Zt,Rt,Qt,Xt],[[0,1],[0,{[C]:Uy}],[0,{[C]:Jt}],[()=>tr,{[C]:Yt}],[()=>Fr,{[C]:Or}],[2,{[C]:er}]],1],n0=[-3,N,Pg,{[Ae]:Ce,[Re]:400},[],[]];V.for(N).registerError(n0,Vn);var i0=[3,N,Og,0,[iu,Ig,Sg,Ar,gy,Xg,mu,_r,Yn,ei,ti,ri,si,gu,Qg,oi,ou,uu,du,fu,vg,Su,vr,da,Bu,Zt,_u,Mr,Nr,Rt,Xt,ni,Tu,my,ny,Ey,Ru,ku,vu],[[()=>Xu,16],[2,{[C]:Fy}],[0,{[C]:vy}],[0,{[C]:Ou}],[0,{[C]:Gy}],[4,{[C]:Zg}],[1,{[C]:pu}],[0,{[C]:_r}],[0,{[C]:ci}],[0,{[C]:ui}],[0,{[C]:li}],[0,{[C]:di}],[0,{[C]:fi}],[0,{[C]:Nu}],[1,{[C]:qy}],[0,{[C]:Vu}],[0,{[C]:au}],[0,{[C]:cu}],[0,{[C]:lu}],[0,{[C]:hu}],[0,{[C]:Rg}],[0,{[C]:yu}],[4,{[C]:vr}],[0,{[C]:da}],[0,{[C]:Gu}],[0,{[C]:Jt}],[128,{[Pu]:Uu}],[0,{[C]:$r}],[0,{[C]:Ur}],[()=>tr,{[C]:Yt}],[2,{[C]:er}],[0,{[C]:qu}],[0,{[C]:zu}],[0,{[C]:Ky}],[1,{[C]:Wy}],[1,{[C]:Qy}],[0,{[C]:Lu}],[5,{[C]:Hu}],[0,{[C]:Fu}]]],o0=[3,N,$g,0,[Jn,Au,xu,zg,Eu,Vg,fa,uy,ly,dy,fy,hy,py,oi,Mr,ii,Nr,Du,iy,wu,_g],[[0,1],[0,1],[0,{[C]:bu}],[4,{[C]:Hg}],[0,{[C]:Cu}],[4,{[C]:Gg}],[0,{[C]:fa}],[0,{[Ve]:ky}],[0,{[Ve]:Ty}],[0,{[Ve]:Dy}],[0,{[Ve]:By}],[0,{[Ve]:Iy}],[6,{[Ve]:Py}],[0,{[Ve]:Ny}],[0,{[C]:$r}],[()=>Ku,{[C]:Wu}],[0,{[C]:Ur}],[0,{[C]:ju}],[1,{[Ve]:Ry}],[0,{[C]:$u}],[0,{[C]:$y}]],2],a0=[-3,N,qg,{[Ae]:Ce,[Re]:400},[],[]];V.for(N).registerError(a0,Zn);var c0=[-3,N,jg,{[Ae]:Ce,[Re]:403},[ni,wg],[0,0]];V.for(N).registerError(c0,jn);var u0=[-3,N,Wg,{[Ae]:Ce,[Re]:400},[],[]];V.for(N).registerError(u0,Gn);var l0=[-3,N,Kg,{[Ae]:Ce,[Re]:400},[],[]];V.for(N).registerError(l0,Kn);var d0=[-3,N,Yg,{[Ae]:Ce,[Re]:404},[],[]];V.for(N).registerError(d0,zn);var f0=[-3,N,ey,{[Ae]:Ce,[Re]:404},[],[]];V.for(N).registerError(f0,qn);var h0=[-3,N,ty,{[Ae]:Ce,[Re]:404},[],[]];V.for(N).registerError(h0,$n);var p0=[-3,N,Jg,{[Ae]:Ce},[],[]];V.for(N).registerError(p0,Wn);var m0=[-3,N,ry,{[Ae]:Ce,[Re]:403},[],[]];V.for(N).registerError(m0,Qn);var g0=[-3,N,sy,{[Ae]:Ce,[Re]:403},[],[]];V.for(N).registerError(g0,Fn);var y0=[3,N,ay,0,[Ar,_r,Yn,ei,ti,ri,si,gu,Zt,oi,Mr,Nr,Rt,Qt,Xt,by,Tu],[[0,{[C]:Ou}],[0,{[C]:_r}],[0,{[C]:ci}],[0,{[C]:ui}],[0,{[C]:li}],[0,{[C]:di}],[0,{[C]:fi}],[0,{[C]:Nu}],[0,{[C]:Jt}],[0,{[C]:Vu}],[0,{[C]:$r}],[0,{[C]:Ur}],[()=>tr,{[C]:Yt}],[()=>Fr,{[C]:Or}],[2,{[C]:er}],[1,{[C]:Vy}],[0,{[C]:zu}]]],S0=[3,N,cy,0,[Jn,Au,gg,iu,ou,uu,du,fu,mu,Ag,Su,Eg,Yn,ei,ti,ri,si,vr,xu,Eu,Mg,Ug,Fg,Lg,_y,_u,Zt,ni,Bu,Mr,ii,Nr,Rt,Qt,Xt,Du,Ay,Ru,ku,vu,wu],[[0,1],[0,1],[0,{[C]:Oy}],[()=>Xu,16],[0,{[C]:au}],[0,{[C]:cu}],[0,{[C]:lu}],[0,{[C]:hu}],[1,{[C]:pu}],[0,{[C]:Cg}],[0,{[C]:yu}],[0,{[C]:Xy}],[0,{[C]:ci}],[0,{[C]:ui}],[0,{[C]:li}],[0,{[C]:di}],[0,{[C]:fi}],[4,{[C]:vr}],[0,{[C]:bu}],[0,{[C]:Cu}],[0,{[C]:Ly}],[0,{[C]:Hy}],[0,{[C]:zy}],[0,{[C]:jy}],[1,{[C]:Jy}],[128,{[Pu]:Uu}],[0,{[C]:Jt}],[0,{[C]:qu}],[0,{[C]:Gu}],[0,{[C]:$r}],[()=>Ku,{[C]:Wu}],[0,{[C]:Ur}],[()=>tr,{[C]:Yt}],[()=>Fr,{[C]:Or}],[2,{[C]:er}],[0,{[C]:ju}],[0,{[C]:Zy}],[0,{[C]:Lu}],[5,{[C]:Hu}],[0,{[C]:Fu}],[0,{[C]:$u}]],2],w0=[3,N,wy,0,[ua,ha,pa,Ar],[[0,{[gt]:ua}],[()=>ma,{[gt]:ha}],[()=>ma,{[gt]:pa}],[4,{[gt]:Ar}]],4],x0=[-3,N,Cy,{[Ae]:Ce,[Re]:400},[],[]];V.for(N).registerError(x0,Xn);var b0=[-3,Mu,"S3ServiceException",0,[],[]];V.for(Mu).registerError(b0,pe);var E0=[9,N,Bg,{[ai]:["GET","/?session",200]},()=>s0,()=>r0],C0=[9,N,Ng,{[Iu]:"-",[ai]:["GET","/{Key+}?x-id=GetObject",200]},()=>o0,()=>i0],A0=[9,N,oy,{[Iu]:"-",[ai]:["PUT","/{Key+}?x-id=PutObject",200]},()=>S0,()=>y0];class _0 extends Ir.classBuilder().ep({...On,DisableS3ExpressSessionAuth:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(e,r,s,n){return[vn(s,e.getEndpointParameterInstructions()),wc(s)]}).s("AmazonS3","CreateSession",{}).n("S3Client","CreateSessionCommand").sc(E0).build(){}const v0="3.983.0",R0={version:v0},k0=t=>new TextEncoder().encode(t);function ga(t){return typeof t=="string"?t.length===0:t.byteLength===0}var Zu={name:"SHA-1"},ya={name:"HMAC",hash:Zu},T0=new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9]);const D0={};function Ze(){return typeof window<"u"?window:typeof self<"u"?self:D0}var B0=(function(){function t(e){this.toHash=new Uint8Array(0),e!==void 0&&(this.key=new Promise(function(r,s){Ze().crypto.subtle.importKey("raw",Sa(e),ya,!1,["sign"]).then(r,s)}),this.key.catch(function(){}))}return t.prototype.update=function(e){if(!ga(e)){var r=Sa(e),s=new Uint8Array(this.toHash.byteLength+r.byteLength);s.set(this.toHash,0),s.set(r,this.toHash.byteLength),this.toHash=s}},t.prototype.digest=function(){var e=this;return this.key?this.key.then(function(r){return Ze().crypto.subtle.sign(ya,r,e.toHash).then(function(s){return new Uint8Array(s)})}):ga(this.toHash)?Promise.resolve(T0):Promise.resolve().then(function(){return Ze().crypto.subtle.digest(Zu,e.toHash)}).then(function(r){return Promise.resolve(new Uint8Array(r))})},t.prototype.reset=function(){this.toHash=new Uint8Array(0)},t})();function Sa(t){return typeof t=="string"?k0(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t)}var I0=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function Qu(t){if(P0(t)&&typeof t.crypto.subtle=="object"){var e=t.crypto.subtle;return M0(e)}return!1}function P0(t){if(typeof t=="object"&&typeof t.crypto=="object"){var e=t.crypto.getRandomValues;return typeof e=="function"}return!1}function M0(t){return t&&I0.every(function(e){return typeof t[e]=="function"})}var N0=(function(){function t(e){if(Qu(Ze()))this.hash=new B0(e);else throw new Error("SHA1 not supported")}return t.prototype.update=function(e,r){this.hash.update(Ye(e))},t.prototype.digest=function(){return this.hash.digest()},t.prototype.reset=function(){this.hash.reset()},t})(),Ju={name:"SHA-256"},wa={name:"HMAC",hash:Ju},O0=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85]),$0=(function(){function t(e){this.toHash=new Uint8Array(0),this.secret=e,this.reset()}return t.prototype.update=function(e){if(!qt(e)){var r=Ye(e),s=new Uint8Array(this.toHash.byteLength+r.byteLength);s.set(this.toHash,0),s.set(r,this.toHash.byteLength),this.toHash=s}},t.prototype.digest=function(){var e=this;return this.key?this.key.then(function(r){return Ze().crypto.subtle.sign(wa,r,e.toHash).then(function(s){return new Uint8Array(s)})}):qt(this.toHash)?Promise.resolve(O0):Promise.resolve().then(function(){return Ze().crypto.subtle.digest(Ju,e.toHash)}).then(function(r){return Promise.resolve(new Uint8Array(r))})},t.prototype.reset=function(){var e=this;this.toHash=new Uint8Array(0),this.secret&&this.secret!==void 0&&(this.key=new Promise(function(r,s){Ze().crypto.subtle.importKey("raw",Ye(e.secret),wa,!1,["sign"]).then(r,s)}),this.key.catch(function(){}))},t})(),Pe=64,U0=32,F0=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),L0=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],H0=Math.pow(2,53)-1,fr=(function(){function t(){this.state=Int32Array.from(L0),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return t.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var r=0,s=e.byteLength;if(this.bytesHashed+=s,this.bytesHashed*8>H0)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;s>0;)this.buffer[this.bufferLength++]=e[r++],s--,this.bufferLength===Pe&&(this.hashBuffer(),this.bufferLength=0)},t.prototype.digest=function(){if(!this.finished){var e=this.bytesHashed*8,r=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),s=this.bufferLength;if(r.setUint8(this.bufferLength++,128),s%Pe>=Pe-8){for(var n=this.bufferLength;n<Pe;n++)r.setUint8(n,0);this.hashBuffer(),this.bufferLength=0}for(var n=this.bufferLength;n<Pe-8;n++)r.setUint8(n,0);r.setUint32(Pe-8,Math.floor(e/4294967296),!0),r.setUint32(Pe-4,e),this.hashBuffer(),this.finished=!0}for(var i=new Uint8Array(U0),n=0;n<8;n++)i[n*4]=this.state[n]>>>24&255,i[n*4+1]=this.state[n]>>>16&255,i[n*4+2]=this.state[n]>>>8&255,i[n*4+3]=this.state[n]>>>0&255;return i},t.prototype.hashBuffer=function(){for(var e=this,r=e.buffer,s=e.state,n=s[0],i=s[1],o=s[2],a=s[3],u=s[4],c=s[5],f=s[6],l=s[7],m=0;m<Pe;m++){if(m<16)this.temp[m]=(r[m*4]&255)<<24|(r[m*4+1]&255)<<16|(r[m*4+2]&255)<<8|r[m*4+3]&255;else{var h=this.temp[m-2],S=(h>>>17|h<<15)^(h>>>19|h<<13)^h>>>10;h=this.temp[m-15];var A=(h>>>7|h<<25)^(h>>>18|h<<14)^h>>>3;this.temp[m]=(S+this.temp[m-7]|0)+(A+this.temp[m-16]|0)}var b=(((u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7))+(u&c^~u&f)|0)+(l+(F0[m]+this.temp[m]|0)|0)|0,v=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&i^n&o^i&o)|0;l=f,f=c,c=u,u=a+b|0,a=o,o=i,i=n,n=b+v|0}s[0]+=n,s[1]+=i,s[2]+=o,s[3]+=a,s[4]+=u,s[5]+=c,s[6]+=f,s[7]+=l},t})(),z0=(function(){function t(e){this.secret=e,this.hash=new fr,this.reset()}return t.prototype.update=function(e){if(!(qt(e)||this.error))try{this.hash.update(Ye(e))}catch(r){this.error=r}},t.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},t.prototype.digest=function(){return xn(this,void 0,void 0,function(){return bn(this,function(e){return[2,this.digestSync()]})})},t.prototype.reset=function(){if(this.hash=new fr,this.secret){this.outer=new fr;var e=j0(this.secret),r=new Uint8Array(Pe);r.set(e);for(var s=0;s<Pe;s++)e[s]^=54,r[s]^=92;this.hash.update(e),this.outer.update(r);for(var s=0;s<e.byteLength;s++)e[s]=0}},t})();function j0(t){var e=Ye(t);if(e.byteLength>Pe){var r=new fr;r.update(e),e=r.digest()}var s=new Uint8Array(Pe);return s.set(e),s}var q0=(function(){function t(e){Qu(Ze())?this.hash=new $0(e):this.hash=new z0(e)}return t.prototype.update=function(e,r){this.hash.update(Ye(e))},t.prototype.digest=function(){return this.hash.digest()},t.prototype.reset=function(){this.hash.reset()},t})();const W0=({serviceId:t,clientVersion:e})=>async r=>{const s=typeof window<"u"?window.navigator:void 0,n=s?.userAgent??"",i=s?.userAgentData?.platform??xa.os(n)??"other",o=void 0,a=s?.userAgentData?.brands??[],u=a[a.length-1],c=u?.brand??xa.browser(n)??"unknown",f=u?.version??"unknown",l=[["aws-sdk-js",e],["ua","2.1"],[`os/${i}`,o],["lang/js"],["md/browser",`${c}_${f}`]];t&&l.push([`api/${t}`,e]);const m=await r?.userAgentAppId?.();return m&&l.push([`app/${m}`]),l},xa={os(t){if(/iPhone|iPad|iPod/.test(t))return"iOS";if(/Macintosh|Mac OS X/.test(t))return"macOS";if(/Windows NT/.test(t))return"Windows";if(/Android/.test(t))return"Android";if(/Linux/.test(t))return"Linux"},browser(t){if(/EdgiOS|EdgA|Edg\//.test(t))return"Microsoft Edge";if(/Firefox\//.test(t))return"Firefox";if(/Chrome\//.test(t))return"Chrome";if(/Safari\//.test(t))return"Safari"}};class Ht{bytes;constructor(e){if(this.bytes=e,e.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>9223372036854776e3||e<-9223372036854776e3)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);const r=new Uint8Array(8);for(let s=7,n=Math.abs(Math.round(e));s>-1&&n>0;s--,n/=256)r[s]=n;return e<0&&ba(r),new Ht(r)}valueOf(){const e=this.bytes.slice(0),r=e[0]&128;return r&&ba(e),parseInt(_e(e),16)*(r?-1:1)}toString(){return String(this.valueOf())}}function ba(t){for(let e=0;e<8;e++)t[e]^=255;for(let e=7;e>-1&&(t[e]++,t[e]===0);e--);}class V0{toUtf8;fromUtf8;constructor(e,r){this.toUtf8=e,this.fromUtf8=r}format(e){const r=[];for(const i of Object.keys(e)){const o=this.fromUtf8(i);r.push(Uint8Array.from([o.byteLength]),o,this.formatHeaderValue(e[i]))}const s=new Uint8Array(r.reduce((i,o)=>i+o.byteLength,0));let n=0;for(const i of r)s.set(i,n),n+=i.byteLength;return s}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":const r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,e.value,!1),new Uint8Array(r.buffer);case"integer":const s=new DataView(new ArrayBuffer(5));return s.setUint8(0,4),s.setInt32(1,e.value,!1),new Uint8Array(s.buffer);case"long":const n=new Uint8Array(9);return n[0]=5,n.set(e.value.bytes,1),n;case"binary":const i=new DataView(new ArrayBuffer(3+e.value.byteLength));i.setUint8(0,6),i.setUint16(1,e.value.byteLength,!1);const o=new Uint8Array(i.buffer);return o.set(e.value,3),o;case"string":const a=this.fromUtf8(e.value),u=new DataView(new ArrayBuffer(3+a.byteLength));u.setUint8(0,7),u.setUint16(1,a.byteLength,!1);const c=new Uint8Array(u.buffer);return c.set(a,3),c;case"timestamp":const f=new Uint8Array(9);return f[0]=8,f.set(Ht.fromNumber(e.value.valueOf()).bytes,1),f;case"uuid":if(!tS.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);const l=new Uint8Array(17);return l[0]=9,l.set(Ga(e.value.replace(/\-/g,"")),1),l}}parse(e){const r={};let s=0;for(;s<e.byteLength;){const n=e.getUint8(s++),i=this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+s,n));switch(s+=n,e.getUint8(s++)){case 0:r[i]={type:Ca,value:!0};break;case 1:r[i]={type:Ca,value:!1};break;case 2:r[i]={type:G0,value:e.getInt8(s++)};break;case 3:r[i]={type:K0,value:e.getInt16(s,!1)},s+=2;break;case 4:r[i]={type:X0,value:e.getInt32(s,!1)},s+=4;break;case 5:r[i]={type:Z0,value:new Ht(new Uint8Array(e.buffer,e.byteOffset+s,8))},s+=8;break;case 6:const o=e.getUint16(s,!1);s+=2,r[i]={type:Q0,value:new Uint8Array(e.buffer,e.byteOffset+s,o)},s+=o;break;case 7:const a=e.getUint16(s,!1);s+=2,r[i]={type:J0,value:this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+s,a))},s+=a;break;case 8:r[i]={type:Y0,value:new Date(new Ht(new Uint8Array(e.buffer,e.byteOffset+s,8)).valueOf())},s+=8;break;case 9:const u=new Uint8Array(e.buffer,e.byteOffset+s,16);s+=16,r[i]={type:eS,value:`${_e(u.subarray(0,4))}-${_e(u.subarray(4,6))}-${_e(u.subarray(6,8))}-${_e(u.subarray(8,10))}-${_e(u.subarray(10))}`};break;default:throw new Error("Unrecognized header type tag")}}return r}}var Ea;(function(t){t[t.boolTrue=0]="boolTrue",t[t.boolFalse=1]="boolFalse",t[t.byte=2]="byte",t[t.short=3]="short",t[t.integer=4]="integer",t[t.long=5]="long",t[t.byteArray=6]="byteArray",t[t.string=7]="string",t[t.timestamp=8]="timestamp",t[t.uuid=9]="uuid"})(Ea||(Ea={}));const Ca="boolean",G0="byte",K0="short",X0="integer",Z0="long",Q0="binary",J0="string",Y0="timestamp",eS="uuid",tS=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,Yu=4,Ke=Yu*2,st=4,rS=Ke+st*2;function sS({byteLength:t,byteOffset:e,buffer:r}){if(t<rS)throw new Error("Provided message too short to accommodate event stream message overhead");const s=new DataView(r,e,t),n=s.getUint32(0,!1);if(t!==n)throw new Error("Reported message length does not match received message length");const i=s.getUint32(Yu,!1),o=s.getUint32(Ke,!1),a=s.getUint32(t-st,!1),u=new yr().update(new Uint8Array(r,e,Ke));if(o!==u.digest())throw new Error(`The prelude checksum specified in the message (${o}) does not match the calculated CRC32 checksum (${u.digest()})`);if(u.update(new Uint8Array(r,e+Ke,t-(Ke+st))),a!==u.digest())throw new Error(`The message checksum (${u.digest()}) did not match the expected value of ${a}`);return{headers:new DataView(r,e+Ke+st,i),body:new Uint8Array(r,e+Ke+st+i,n-i-(Ke+st+st))}}class nS{headerMarshaller;messageBuffer;isEndOfStream;constructor(e,r){this.headerMarshaller=new V0(e,r),this.messageBuffer=[],this.isEndOfStream=!1}feed(e){this.messageBuffer.push(this.decode(e))}endOfStream(){this.isEndOfStream=!0}getMessage(){const e=this.messageBuffer.pop(),r=this.isEndOfStream;return{getMessage(){return e},isEndOfStream(){return r}}}getAvailableMessages(){const e=this.messageBuffer;this.messageBuffer=[];const r=this.isEndOfStream;return{getMessages(){return e},isEndOfStream(){return r}}}encode({headers:e,body:r}){const s=this.headerMarshaller.format(e),n=s.byteLength+r.byteLength+16,i=new Uint8Array(n),o=new DataView(i.buffer,i.byteOffset,i.byteLength),a=new yr;return o.setUint32(0,n,!1),o.setUint32(4,s.byteLength,!1),o.setUint32(8,a.update(i.subarray(0,8)).digest(),!1),i.set(s,12),i.set(r,s.byteLength+12),o.setUint32(n-4,a.update(i.subarray(8,n-4)).digest(),!1),i}decode(e){const{headers:r,body:s}=sS(e);return{headers:this.headerMarshaller.parse(r),body:s}}formatHeaders(e){return this.headerMarshaller.format(e)}}class iS{options;constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const e of this.options.inputStream)yield this.options.decoder.decode(e)}}class oS{options;constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const e of this.options.messageStream)yield this.options.encoder.encode(e);this.options.includeEndFrame&&(yield new Uint8Array(0))}}class aS{options;constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const e of this.options.messageStream){const r=await this.options.deserializer(e);r!==void 0&&(yield r)}}}class cS{options;constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const e of this.options.inputStream)yield this.options.serializer(e)}}function uS(t){let e=0,r=0,s=null,n=null;const i=a=>{if(typeof a!="number")throw new Error("Attempted to allocate an event message where size was not a number: "+a);e=a,r=4,s=new Uint8Array(a),new DataView(s.buffer).setUint32(0,a,!1)},o=async function*(){const a=t[Symbol.asyncIterator]();for(;;){const{value:u,done:c}=await a.next();if(c){if(e)if(e===r)yield s;else throw new Error("Truncated event message received.");else return;return}const f=u.length;let l=0;for(;l<f;){if(!s){const h=f-l;n||(n=new Uint8Array(4));const S=Math.min(4-r,h);if(n.set(u.slice(l,l+S),r),r+=S,l+=S,r<4)break;i(new DataView(n.buffer).getUint32(0,!1)),n=null}const m=Math.min(e-r,f-l);s.set(u.slice(l,l+m),r),r+=m,l+=m,e&&e===r&&(yield s,s=null,e=0,r=0)}}};return{[Symbol.asyncIterator]:o}}function lS(t,e){return async function(r){const{value:s}=r.headers[":message-type"];if(s==="error"){const n=new Error(r.headers[":error-message"].value||"UnknownError");throw n.name=r.headers[":error-code"].value,n}else if(s==="exception"){const n=r.headers[":exception-type"].value,i={[n]:r},o=await t(i);if(o.$unknown){const a=new Error(e(r.body));throw a.name=n,a}throw o[n]}else if(s==="event"){const n={[r.headers[":event-type"].value]:r},i=await t(n);return i.$unknown?void 0:i}else throw Error(`Unrecognizable event type: ${r.headers[":event-type"].value}`)}}let dS=class{eventStreamCodec;utfEncoder;constructor({utf8Encoder:e,utf8Decoder:r}){this.eventStreamCodec=new nS(e,r),this.utfEncoder=e}deserialize(e,r){const s=uS(e);return new aS({messageStream:new iS({inputStream:s,decoder:this.eventStreamCodec}),deserializer:lS(r,this.utfEncoder)})}serialize(e,r){return new oS({messageStream:new cS({inputStream:e,serializer:r}),encoder:this.eventStreamCodec,includeEndFrame:!0})}};const fS=t=>({[Symbol.asyncIterator]:async function*(){const e=t.getReader();try{for(;;){const{done:r,value:s}=await e.read();if(r)return;yield s}}finally{e.releaseLock()}}}),hS=t=>{const e=t[Symbol.asyncIterator]();return new ReadableStream({async pull(r){const{done:s,value:n}=await e.next();if(s)return r.close();r.enqueue(n)}})};class pS{universalMarshaller;constructor({utf8Encoder:e,utf8Decoder:r}){this.universalMarshaller=new dS({utf8Decoder:r,utf8Encoder:e})}deserialize(e,r){const s=mS(e)?fS(e):e;return this.universalMarshaller.deserialize(s,r)}serialize(e,r){const s=this.universalMarshaller.serialize(e,r);return typeof ReadableStream=="function"?hS(s):s}}const mS=t=>typeof ReadableStream=="function"&&t instanceof ReadableStream,gS=t=>new pS(t);async function yS(t,e,r=1024*1024){const s=t.size;let n=0;for(;n<s;){const i=t.slice(n,Math.min(s,n+r));e(new Uint8Array(await i.arrayBuffer())),n+=i.size}}const SS=async function(e,r){const s=new e;return await yS(r,n=>{s.update(n)}),s.digest()},wS=t=>()=>Promise.reject(t),Ge=64,xS=16,bS=[1732584193,4023233417,2562383102,271733878];class ES{state;buffer;bufferLength;bytesHashed;finished;constructor(){this.reset()}update(e){if(CS(e))return;if(this.finished)throw new Error("Attempted to update an already finished hash.");const r=AS(e);let s=0,{byteLength:n}=r;for(this.bytesHashed+=n;n>0;)this.buffer.setUint8(this.bufferLength++,r[s++]),n--,this.bufferLength===Ge&&(this.hashBuffer(),this.bufferLength=0)}async digest(){if(!this.finished){const{buffer:r,bufferLength:s,bytesHashed:n}=this,i=n*8;if(r.setUint8(this.bufferLength++,128),s%Ge>=Ge-8){for(let o=this.bufferLength;o<Ge;o++)r.setUint8(o,0);this.hashBuffer(),this.bufferLength=0}for(let o=this.bufferLength;o<Ge-8;o++)r.setUint8(o,0);r.setUint32(Ge-8,i>>>0,!0),r.setUint32(Ge-4,Math.floor(i/4294967296),!0),this.hashBuffer(),this.finished=!0}const e=new DataView(new ArrayBuffer(xS));for(let r=0;r<4;r++)e.setUint32(r*4,this.state[r],!0);return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}hashBuffer(){const{buffer:e,state:r}=this;let s=r[0],n=r[1],i=r[2],o=r[3];s=ye(s,n,i,o,e.getUint32(0,!0),7,3614090360),o=ye(o,s,n,i,e.getUint32(4,!0),12,3905402710),i=ye(i,o,s,n,e.getUint32(8,!0),17,606105819),n=ye(n,i,o,s,e.getUint32(12,!0),22,3250441966),s=ye(s,n,i,o,e.getUint32(16,!0),7,4118548399),o=ye(o,s,n,i,e.getUint32(20,!0),12,1200080426),i=ye(i,o,s,n,e.getUint32(24,!0),17,2821735955),n=ye(n,i,o,s,e.getUint32(28,!0),22,4249261313),s=ye(s,n,i,o,e.getUint32(32,!0),7,1770035416),o=ye(o,s,n,i,e.getUint32(36,!0),12,2336552879),i=ye(i,o,s,n,e.getUint32(40,!0),17,4294925233),n=ye(n,i,o,s,e.getUint32(44,!0),22,2304563134),s=ye(s,n,i,o,e.getUint32(48,!0),7,1804603682),o=ye(o,s,n,i,e.getUint32(52,!0),12,4254626195),i=ye(i,o,s,n,e.getUint32(56,!0),17,2792965006),n=ye(n,i,o,s,e.getUint32(60,!0),22,1236535329),s=Se(s,n,i,o,e.getUint32(4,!0),5,4129170786),o=Se(o,s,n,i,e.getUint32(24,!0),9,3225465664),i=Se(i,o,s,n,e.getUint32(44,!0),14,643717713),n=Se(n,i,o,s,e.getUint32(0,!0),20,3921069994),s=Se(s,n,i,o,e.getUint32(20,!0),5,3593408605),o=Se(o,s,n,i,e.getUint32(40,!0),9,38016083),i=Se(i,o,s,n,e.getUint32(60,!0),14,3634488961),n=Se(n,i,o,s,e.getUint32(16,!0),20,3889429448),s=Se(s,n,i,o,e.getUint32(36,!0),5,568446438),o=Se(o,s,n,i,e.getUint32(56,!0),9,3275163606),i=Se(i,o,s,n,e.getUint32(12,!0),14,4107603335),n=Se(n,i,o,s,e.getUint32(32,!0),20,1163531501),s=Se(s,n,i,o,e.getUint32(52,!0),5,2850285829),o=Se(o,s,n,i,e.getUint32(8,!0),9,4243563512),i=Se(i,o,s,n,e.getUint32(28,!0),14,1735328473),n=Se(n,i,o,s,e.getUint32(48,!0),20,2368359562),s=we(s,n,i,o,e.getUint32(20,!0),4,4294588738),o=we(o,s,n,i,e.getUint32(32,!0),11,2272392833),i=we(i,o,s,n,e.getUint32(44,!0),16,1839030562),n=we(n,i,o,s,e.getUint32(56,!0),23,4259657740),s=we(s,n,i,o,e.getUint32(4,!0),4,2763975236),o=we(o,s,n,i,e.getUint32(16,!0),11,1272893353),i=we(i,o,s,n,e.getUint32(28,!0),16,4139469664),n=we(n,i,o,s,e.getUint32(40,!0),23,3200236656),s=we(s,n,i,o,e.getUint32(52,!0),4,681279174),o=we(o,s,n,i,e.getUint32(0,!0),11,3936430074),i=we(i,o,s,n,e.getUint32(12,!0),16,3572445317),n=we(n,i,o,s,e.getUint32(24,!0),23,76029189),s=we(s,n,i,o,e.getUint32(36,!0),4,3654602809),o=we(o,s,n,i,e.getUint32(48,!0),11,3873151461),i=we(i,o,s,n,e.getUint32(60,!0),16,530742520),n=we(n,i,o,s,e.getUint32(8,!0),23,3299628645),s=xe(s,n,i,o,e.getUint32(0,!0),6,4096336452),o=xe(o,s,n,i,e.getUint32(28,!0),10,1126891415),i=xe(i,o,s,n,e.getUint32(56,!0),15,2878612391),n=xe(n,i,o,s,e.getUint32(20,!0),21,4237533241),s=xe(s,n,i,o,e.getUint32(48,!0),6,1700485571),o=xe(o,s,n,i,e.getUint32(12,!0),10,2399980690),i=xe(i,o,s,n,e.getUint32(40,!0),15,4293915773),n=xe(n,i,o,s,e.getUint32(4,!0),21,2240044497),s=xe(s,n,i,o,e.getUint32(32,!0),6,1873313359),o=xe(o,s,n,i,e.getUint32(60,!0),10,4264355552),i=xe(i,o,s,n,e.getUint32(24,!0),15,2734768916),n=xe(n,i,o,s,e.getUint32(52,!0),21,1309151649),s=xe(s,n,i,o,e.getUint32(16,!0),6,4149444226),o=xe(o,s,n,i,e.getUint32(44,!0),10,3174756917),i=xe(i,o,s,n,e.getUint32(8,!0),15,718787259),n=xe(n,i,o,s,e.getUint32(36,!0),21,3951481745),r[0]=s+r[0]&4294967295,r[1]=n+r[1]&4294967295,r[2]=i+r[2]&4294967295,r[3]=o+r[3]&4294967295}reset(){this.state=Uint32Array.from(bS),this.buffer=new DataView(new ArrayBuffer(Ge)),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}}function Lr(t,e,r,s,n,i){return e=(e+t&4294967295)+(s+i&4294967295)&4294967295,(e<<n|e>>>32-n)+r&4294967295}function ye(t,e,r,s,n,i,o){return Lr(e&r|~e&s,t,e,n,i,o)}function Se(t,e,r,s,n,i,o){return Lr(e&s|r&~s,t,e,n,i,o)}function we(t,e,r,s,n,i,o){return Lr(e^r^s,t,e,n,i,o)}function xe(t,e,r,s,n,i,o){return Lr(r^(e|~s),t,e,n,i,o)}function CS(t){return typeof t=="string"?t.length===0:t.byteLength===0}function AS(t){return typeof t=="string"?Je(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t)}const _S=["in-region","cross-region","mobile","standard","legacy"],vS=({defaultsMode:t}={})=>Kd(async()=>{const e=typeof t=="function"?await t():t;switch(e?.toLowerCase()){case"auto":return Promise.resolve(RS()?"mobile":"standard");case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return Promise.resolve(e?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${_S.join(", ")}, got ${e}`)}}),RS=()=>{const t=window?.navigator;if(t?.connection){const{effectiveType:e,rtt:r,downlink:s}=t?.connection;if(typeof e=="string"&&e!=="4g"||Number(r)>100||Number(s)<10)return!0}return t?.userAgentData?.mobile||typeof t?.maxTouchPoints=="number"&&t?.maxTouchPoints>1},kS=t=>({apiVersion:"2006-03-01",base64Decoder:t?.base64Decoder??Et,base64Encoder:t?.base64Encoder??ct,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??ru,extensions:t?.extensions??[],getAwsChunkedEncodingStream:t?.getAwsChunkedEncodingStream??zl,httpAuthSchemeProvider:t?.httpAuthSchemeProvider??hg,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new za},{schemeId:"aws.auth#sigv4a",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4a"),signer:new bl}],logger:t?.logger??new yn,protocol:t?.protocol??qf,protocolSettings:t?.protocolSettings??{defaultNamespace:"com.amazonaws.s3",xmlNamespace:"http://s3.amazonaws.com/doc/2006-03-01/",version:"2006-03-01",serviceTarget:"AmazonS3"},sdkStreamMixin:t?.sdkStreamMixin??Ka,serviceId:t?.serviceId??"S3",signerConstructor:t?.signerConstructor??$c,signingEscapePath:t?.signingEscapePath??!1,urlParser:t?.urlParser??Sr,useArnRegion:t?.useArnRegion??void 0,utf8Decoder:t?.utf8Decoder??Je,utf8Encoder:t?.utf8Encoder??vt}),TS=t=>{const e=vS(t),r=()=>e().then(kf),s=kS(t);return{...s,...t,runtime:"browser",defaultsMode:e,bodyLengthChecker:t?.bodyLengthChecker??_f,credentialDefaultProvider:t?.credentialDefaultProvider??(n=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:t?.defaultUserAgentProvider??W0({serviceId:s.serviceId,clientVersion:R0.version}),eventStreamSerdeProvider:t?.eventStreamSerdeProvider??gS,maxAttempts:t?.maxAttempts??wr,md5:t?.md5??ES,region:t?.region??wS("Region is missing"),requestHandler:un.create(t?.requestHandler??r),retryMode:t?.retryMode??(async()=>(await r()).retryMode||mm),sha1:t?.sha1??N0,sha256:t?.sha256??q0,streamCollector:t?.streamCollector??Wa,streamHasher:t?.streamHasher??SS,useDualstackEndpoint:t?.useDualstackEndpoint??(()=>Promise.resolve(Xp)),useFipsEndpoint:t?.useFipsEndpoint??(()=>Promise.resolve(Zp))}},DS=t=>({setRegion(e){t.region=e},region(){return t.region}}),BS=t=>({region:t.region()}),IS=t=>{const e=t.httpAuthSchemes;let r=t.httpAuthSchemeProvider,s=t.credentials;return{setHttpAuthScheme(n){const i=e.findIndex(o=>o.schemeId===n.schemeId);i===-1?e.push(n):e.splice(i,1,n)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(n){r=n},httpAuthSchemeProvider(){return r},setCredentials(n){s=n},credentials(){return s}}},PS=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()}),MS=(t,e)=>{const r=Object.assign(DS(t),Pf(t),dl(t),IS(t));return e.forEach(s=>s.configure(r)),Object.assign(t,BS(r),Mf(r),fl(r),PS(r))};class NS extends vf{config;constructor(...[e]){const r=TS(e||{});super(r),this.initConfig=r;const s=mg(r),n=dp(s),i=gh(n),o=Mm(i),a=Yp(o),u=a,c=pm(u),f=em(c),l=pg(f),m=Qh(l,{session:[()=>this,_0]}),h=MS(m,e?.extensions||[]);this.config=h,this.middlewareStack.use(td(this.config)),this.middlewareStack.use(Kp(this.config)),this.middlewareStack.use(Hm(this.config)),this.middlewareStack.use(sm(this.config)),this.middlewareStack.use(wh(this.config)),this.middlewareStack.use(Eh(this.config)),this.middlewareStack.use(_h(this.config)),this.middlewareStack.use(vl(this.config,{httpAuthSchemeParametersProvider:lg,identityProviderConfigProvider:async S=>new jd({"aws.auth#sigv4":S.credentials,"aws.auth#sigv4a":S.credentials})})),this.middlewareStack.use(Bl(this.config)),this.middlewareStack.use(cp(this.config)),this.middlewareStack.use(gl(this.config)),this.middlewareStack.use(Nh(this.config)),this.middlewareStack.use(Wh(this.config)),this.middlewareStack.use(Zh(this.config))}destroy(){super.destroy()}}function OS(t){return e=>async r=>{const s={...r.input},n=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}];for(const i of n){const o=s[i.target];if(o){let a;typeof o=="string"?US(o,t)?a=t.base64Decoder(o):(a=t.utf8Decoder(o),s[i.target]=t.base64Encoder(a)):(a=ArrayBuffer.isView(o)?new Uint8Array(o.buffer,o.byteOffset,o.byteLength):new Uint8Array(o),s[i.target]=t.base64Encoder(a));const u=new t.md5;u.update(a),s[i.hash]=t.base64Encoder(await u.digest())}}return e({...r,input:s})}}const $S={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},el=t=>({applyToStack:e=>{e.add(OS(t),$S)}});function US(t,e){if(!/^(?:[A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t))return!1;try{return e.base64Decoder(t).length===32}catch{return!1}}class FS extends Ir.classBuilder().ep({...On,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(e,r,s,n){return[vn(s,e.getEndpointParameterInstructions()),Sc(s,{requestChecksumRequired:!1,requestValidationModeMember:"ChecksumMode",responseAlgorithms:["CRC64NVME","CRC32","CRC32C","SHA256","SHA1"]}),el(s),Uh()]}).s("AmazonS3","GetObject",{}).n("S3Client","GetObjectCommand").sc(C0).build(){}class LS extends Ir.classBuilder().ep({...On,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(e,r,s,n){return[vn(s,e.getEndpointParameterInstructions()),Sc(s,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!1}),Dh(),wc(s),el(s)]}).s("AmazonS3","PutObject",{}).n("S3Client","PutObjectCommand").sc(A0).build(){}const HS={},{AWS_REGION:zS,AWS_ACCESS_KEY_ID:jS,AWS_SECRET_ACCESS_KEY:qS,BUCKET_NAME:WS}=HS,Aa=new NS({region:zS,credentials:{accessKeyId:jS,secretAccessKey:qS}}),_a=WS,va="data.json";async function Ra(t,e){if(e){const a=new LS({Bucket:_a,Key:va,Body:JSON.stringify(e)});await Aa.send(a);return}const r=new FS({Bucket:_a,Key:va});let s;try{s=await Aa.send(r)}catch(a){if(a.constructor.name=="_NoSuchKey")return[];throw a}const i=await s.Body.getReader().read(),o=new TextDecoder("utf-8").decode(i.value);return JSON.parse(o)}class VS{constructor(e,r){this.key=e,this.todos=[],this.onChanges=[r],this.init()}async init(){this.todos=await Ra(this.key),this.onChanges.forEach(e=>e())}async inform(){await Ra(this.key,this.todos),this.onChanges.forEach(e=>e())}addTodo(e){this.todos=this.todos.concat({id:ul(),title:e,completed:!1}),this.inform()}toggleAll(e){this.todos=this.todos.map(r=>({...r,completed:e})),this.inform()}toggle(e){this.todos=this.todos.map(r=>r!==e?r:{...r,completed:!r.completed}),this.inform()}destroy(e){this.todos=this.todos.filter(r=>r!==e),this.inform()}save(e,r){this.todos=this.todos.map(s=>s!==e?s:{...s,title:r}),this.inform()}clearCompleted(){this.todos=this.todos.filter(e=>!e.completed),this.inform()}}class GS extends it{render({nowShowing:e,count:r,completedCount:s,onClearCompleted:n}){return q("footer",{class:"footer",children:[q("span",{class:"todo-count",children:[q("strong",{children:r})," ",ll(r,"item")," left"]}),q("ul",{class:"filters",children:[q("li",{children:q("a",{href:"#/",class:e=="all"&&"selected",children:"All"})})," ",q("li",{children:q("a",{href:"#/active",class:e=="active"&&"selected",children:"Active"})})," ",q("li",{children:q("a",{href:"#/completed",class:e=="completed"&&"selected",children:"Completed"})})]}),s>0&&q("button",{class:"clear-completed",onClick:n,children:"Clear completed"})]})}}function KS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ds={exports:{}};var ka;function XS(){return ka||(ka=1,(function(t){(function(){var e={}.hasOwnProperty;function r(){for(var i="",o=0;o<arguments.length;o++){var a=arguments[o];a&&(i=n(i,s(a)))}return i}function s(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return r.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var o="";for(var a in i)e.call(i,a)&&i[a]&&(o=n(o,a));return o}function n(i,o){return o?i?i+" "+o:i+o:i}t.exports?(r.default=r,t.exports=r):window.classNames=r})()})(Ds)),Ds.exports}var ZS=XS();const QS=KS(ZS),JS=27,YS=13;class ew extends it{handleSubmit=()=>{let{onSave:e,onDestroy:r,todo:s}=this.props,n=this.state.editText.trim();n?(e(s,n),this.setState({editText:n})):r(s)};handleEdit=()=>{let{onEdit:e,todo:r}=this.props;e(r),this.setState({editText:r.title})};toggle=e=>{let{onToggle:r,todo:s}=this.props;r(s),e.preventDefault()};handleTextInput=e=>{this.setState({editText:e.target.value})};handleKeyDown=e=>{if(e.which===JS){let{todo:r}=this.props;this.setState({editText:r.title}),this.props.onCancel(r)}else e.which===YS&&this.handleSubmit()};handleDestroy=()=>{this.props.onDestroy(this.props.todo)};componentDidUpdate(){let e=this.base&&this.base.querySelector(".edit");e&&e.focus()}render({todo:{title:e,completed:r},onToggle:s,onDestroy:n,editing:i},{editText:o}){return q("li",{class:QS({completed:r,editing:i}),children:[q("div",{class:"view",children:[q("input",{class:"toggle",type:"checkbox",checked:r,onChange:this.toggle}),q("label",{onDblClick:this.handleEdit,children:e}),q("button",{class:"destroy",onClick:this.handleDestroy})]}),i&&q("input",{class:"edit",value:o,onBlur:this.handleSubmit,onInput:this.handleTextInput,onKeyDown:this.handleKeyDown})]})}}const tw=13,Ta={all:t=>!0,active:t=>!t.completed,completed:t=>t.completed};class rw extends it{constructor(){super(),this.model=new VS("preact-todos",()=>this.setState({})),addEventListener("hashchange",this.handleRoute.bind(this)),this.handleRoute()}handleRoute(){let e=String(location.hash||"").split("/").pop();Ta[e]||(e="all"),this.setState({nowShowing:e})}handleNewTodoKeyDown=e=>{if(e.keyCode!==tw)return;e.preventDefault();let r=this.state.newTodo.trim();r&&(this.model.addTodo(r),this.setState({newTodo:""}))};handleNewTodoInput=e=>{this.setState({newTodo:e.target.value})};toggleAll=e=>{let r=e.target.checked;this.model.toggleAll(r)};toggle=e=>{this.model.toggle(e)};destroy=e=>{this.model.destroy(e)};edit=e=>{this.setState({editing:e.id})};save=(e,r)=>{this.model.save(e,r),this.setState({editing:null})};cancel=()=>{this.setState({editing:null})};clearCompleted=()=>{this.model.clearCompleted()};render({},{nowShowing:e=ALL_TODOS,newTodo:r,editing:s}){let{todos:n}=this.model,i=n.filter(Ta[e]),o=n.reduce((u,c)=>u+(c.completed?0:1),0),a=n.length-o;return q("div",{children:[q("header",{class:"header",children:[q("h1",{children:"todos"}),q("input",{class:"new-todo",placeholder:"What needs to be done?",value:r,onKeyDown:this.handleNewTodoKeyDown,onInput:this.handleNewTodoInput,autoFocus:!0})]}),n.length?q("section",{class:"main",children:[q("input",{id:"toggle-all",class:"toggle-all",type:"checkbox",onChange:this.toggleAll,checked:o===0}),q("label",{for:"toggle-all",children:"Mark all as complete"}),q("ul",{class:"todo-list",children:i.map(u=>q(ew,{todo:u,onToggle:this.toggle,onDestroy:this.destroy,onEdit:this.edit,editing:s===u.id,onSave:this.save,onCancel:this.cancel}))})]}):null,o||a?q(GS,{count:o,completedCount:a,nowShowing:e,onClearCompleted:this.clearCompleted}):null]})}}al(q(rw,{}),document.getElementById("app"));export{Je as f,vt as t};
